"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[8153],{2496:((I,m,e)=>{e.d(m,{D:()=>se});var s=e(74848),l=e(9302),i=e(25708),h=e(52114),r=e(1279),n=e(66392),a=e(40053),t=e(6442);const o=({type:A,from:R,to:B,symbol:b})=>{const{formatMessage:y}=(0,t.A)(),O=(0,a.p)({value:R??"",maxCharsPerSide:7}),_=(0,a.p)({value:B??"",maxCharsPerSide:7});let U;switch(A){case n.w.Receive:case n.w.Claim:case n.w.ClaimRewards:case n.w.Undelegate:U=`${y({id:"generic.from"})}: ${O}`;break;case n.w.Send:case n.w.Delegate:case n.w.Redelegate:case n.w.Compound:case n.w.Approve:case n.w.Revoke:U=`${y({id:"generic.to"})}: ${_}`;break;case n.w.Swap:U=`${y({id:"generic.to"})}: ${b}`;break;default:return null}return(0,s.jsx)(h.E,{testid:"tx-item-subtitle",type:r.jK.BODY_14,theme:r.Il.UTILITY_1_OPACITY_1,children:U})};var u=e(26264),d=e(96540);const x=()=>(0,d.useMemo)(()=>["merlin","internet_computer","blast","scroll","bouncebit"],[]);var p=e(20413),f=e(94893),c=e(65504),E=e(68632),T=e(19376),M=e(73241),L=e(69254),W=e(21094),N=e(57379),Z=e(47767);const P=({transaction:A})=>{const{formatMessage:R}=(0,t.A)(),B=(0,Z.Zp)(),b=x(),{id:y,status:O,type:_,from:U,to:C,symbol:G,nft:F,amount:v,fee:D,isUnlimited:$}=(0,p.A)(A),w=_===n.w.Receive||_===n.w.ClaimRewards||_===n.w.Claim||_===n.w.Undelegate,J=(0,N.I)(_),X=Array.isArray(C)&&C.length>0&&C[0].id!==void 0?C[0].id:C,k=(0,d.useMemo)(()=>_===n.w.Revoke?"0":J||w||_===n.w.Contract&&parseFloat(v)>0||_===n.w.Approve&&parseFloat(v)>0?v:D[0]||"0",[J,D,v,_]),z=()=>k==="0"||_===n.w.Approve||_===n.w.Revoke?"":w?"+":"-",V=()=>k==="0"?r.Il.UTILITY_1_DEFAULT:w?r.Il.SUCCESS_1_DEFAULT:r.Il.UTILITY_1_DEFAULT,q=_===n.w.Approve&&$||_===n.w.Revoke;return(0,s.jsx)(f.c,{testid:"tx-item",onClick:()=>B(`${u.b.TRANSACTION}/${encodeURIComponent(y)}`),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex w-9 h-9 justify-center items-center",children:(0,s.jsx)(i.A,{status:O,type:_})}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(h.E,{testid:"tx-type",children:R({id:`component.transaction-item.type.${_}`})}),O!=="confirmed"&&(!b.includes(A.blockchain.id)||O==="pending")&&(0,s.jsx)(T.v,{testid:"tx-status",size:M.V.SMALL,theme:O==="pending"?M.x.WARNING:M.x.ERROR,children:R({id:`component.transaction-item.status.${O}`})})]}),(typeof X=="string"||typeof U=="string")&&(0,s.jsx)(o,{type:_,from:U,to:X,symbol:G})]})]}),(0,s.jsx)("div",{children:F?(0,s.jsx)(c.q,{size:E.Y.LARGE,src:F.previewImage.url,name:F.name,network:F.blockchain}):(0,s.jsx)(L.h,{testid:"tx-amount",amountType:W.Cu.CRYPTO,value:k,currency:G,theme:V(),prefix:z(),tinyThreshold:6,maxSignificantDecimals:6,shouldHideAmount:q})})]})})};var ee=e(26858),K=e(36322);const g=A=>{if(!A)return!1;const R=(0,ee.Mr)(A),B=(0,K.f)(A);return R?.isBuyCryptoEnabled&&!B};var j=e(65512),H=e(52619),S=e(8168),Y=e(21612),te=e(29584),ne=e(11717),re=e(38921);const se=({transactions:A,children:R,loadMoreItems:B,hasNextPage:b,historyAvailable:y,fetchingStarted:O,fetchingTransactions:_,scrollableAreaHeight:U,asset:C})=>{var G,F;const{formatMessage:v}=(0,t.A)(),D=(0,Y.s)(),$=(0,Z.Zp)(),w=g((G=C?.assetId)!=null?G:""),J=(0,ne.w)((F=C?.assetId)!=null?F:""),X=(0,re.G)(C),k=(0,d.useRef)(null),z=(0,d.useMemo)(()=>{var Q,oe;const ae=U<((oe=(Q=k.current)==null?void 0:Q.offsetHeight)!=null?oe:0);return y&&!ae&&b||O&&_},[y,Object.values(A).length,b]),V=Object.keys(A).length>0,q=()=>{var Q;D(`${u.b.BUY}/${(Q=C?.assetId)!=null?Q:""}`)},le=()=>{$(X,{state:{pageViewSource:te.Un.ASSET}})};return(0,s.jsxs)("div",{className:"flex flex-col w-full space-y-4 mb-3 items-center",ref:k,children:[R,V&&(0,s.jsx)("div",{className:"flex flex-col w-full space-y-4",children:Object.entries(A).map(([Q,oe])=>(0,s.jsx)(S.b,{title:Q,children:oe.map(ae=>(0,s.jsx)(P,{transaction:ae},ae.hash))},Q))}),!V&&!_&&(0,s.jsxs)("div",{className:"flex flex-col space-y-4 items-center w-[310px]",children:[(0,s.jsx)(l.x,{}),(0,s.jsx)("div",{className:"text-center px-6",children:(0,s.jsx)(h.E,{type:r.jK.BODY_14,theme:r.Il.UTILITY_1_OPACITY_1,children:v({id:"history-list.no-transactions-found",defaultMessage:"Your crypto transactions will appear here once you start using wallet."})})}),w||J&&(0,s.jsx)(j.$,{testid:"show-more-btn",onClick:w?q:le,shape:H.dB.DEFAULT,theme:H.ry.PRIMARY,children:v({id:`history-list.${w?"buy":"swap"}-crypto`,defaultMessage:w?"Buy Crypto":"Swap Crypto"})})]}),z&&(0,s.jsx)(j.$,{testid:"show-more-btn",onClick:B,shape:H.dB.DEFAULT,size:H.Vp.SMALL,theme:H.ry.SUBTLE,fullWidth:!1,loading:_,loadingData:v({id:"generic.loading",defaultMessage:"Loading"}),children:v({id:"history-list.load-more"})})]})}}),6475:((I,m,e)=>{e.d(m,{q:()=>r});var s=e(1651),l=e(58959),i=class extends s.${constructor(n,a){super(n,a)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(n,a){super.setOptions({...n,behavior:(0,l.PL)()},a)}getOptimisticResult(n){return n.behavior=(0,l.PL)(),super.getOptimisticResult(n)}fetchNextPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(n){return this.fetch({...n,meta:{fetchMore:{direction:"backward"}}})}createResult(n,a){const{state:t}=n,o=super.createResult(n,a),{isFetching:u,isRefetching:d,isError:x,isRefetchError:p}=o,f=t.fetchMeta?.fetchMore?.direction,c=x&&f==="forward",E=u&&f==="forward",T=x&&f==="backward",M=u&&f==="backward";return{...o,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,l.rB)(a,t.data),hasPreviousPage:(0,l.RQ)(a,t.data),isFetchNextPageError:c,isFetchingNextPage:E,isFetchPreviousPageError:T,isFetchingPreviousPage:M,isRefetchError:p&&!c&&!T,isRefetching:d&&!E&&!M}}},h=e(44171);function r(n,a){return(0,h.t)(n,i,a)}}),8168:((I,m,e)=>{e.d(m,{b:()=>h});var s=e(74848),l=e(52114),i=e(1279);const h=({title:r,children:n})=>(0,s.jsxs)("div",{className:"my-2 flex flex-col space-y-4 pb-2",children:[r&&(0,s.jsx)(l.E,{theme:i.Il.THIRD,testid:"category-title",children:r}),n]})}),11717:((I,m,e)=>{e.d(m,{w:()=>h});var s=e(26858),l=e(33055),i=e(29251);function h(r){const n=(0,s.Mr)(r),a=(0,l.A)();return(n?.isSwapEnabled||n?.isSwapCrossChainEnabled)&&a?.type!==i.S.HARDWARE}}),20413:((I,m,e)=>{e.d(m,{A:()=>t});var s=e(26858),l=e(40790),i=e(96540),h=e.n(i),r=e(44657),n=e(79941),a=e(34476);const t=o=>{const u=(0,a.m)(o.blockchain.id),d=(0,l.F7)(u.coinId),x=u.isCustom?(0,s.dJ)(u,o.assetId):(0,s.Mr)(o.assetId);return(0,i.useMemo)(()=>{var p,f;const c={id:o.hash,from:o.events[0].metadata.from,to:o.events[0].metadata.to,type:o.events[0].type,status:o.status,symbol:(p=x?.symbol)!=null?p:u.symbol,fee:o.fee,date:o.createdAt,amount:(0,n.ct)(o,x)};if((0,n.fO)(o.events)){if(!d)return c.type=r.wL.Send,c.amount=Math.abs(Number(c.amount)).toString(),c;const E=d.address,{from:T,to:M}=o.events[0].metadata,L=T===E?M:T;parseFloat(c.amount)>0?(c.type=r.wL.Receive,c.from=L,c.to=E):(c.type=r.wL.Send,c.from=E,c.to=L,c.amount=Math.abs(Number(c.amount)).toString())}return(0,n.x0)(o.events)&&(c.input=o.events[0].metadata.input),(0,n.m5)(o.events)&&(c.isUnlimited=o.events[0].metadata.isUnlimited),o.nft&&(c.nft={onChainId:o.nft.onChainId,previewImage:o.nft.previewImageURL,originalImage:o.nft.originalMediaURL,name:o.nft.name,collectionName:o.nft.collectionName,collectionId:o.nft.collectionId,blockchain:{iconUrl:u.iconUrl,name:(f=u.displayName)!=null?f:u.name}}),c},[JSON.stringify(o)])}}),25708:((I,m,e)=>{e.d(m,{A:()=>d});var s=e(74848),l=e(64720),i=e(93077),h=e(88774),r=e(30081),n=e(68632),a=e(79830),t=e(66392),o=e(96159),u=e(54290);const d=({status:x,type:p})=>{if(x==="pending")return(0,s.jsx)(a.y,{size:n.Y.SMALL});let f;switch(p){case t.w.Contract:case t.w.RegisterToken:case t.w.TrustLine:case t.w.Approve:case t.w.Revoke:f=(0,s.jsx)(r.p,{width:24,height:24,colorClass:"text-iconNormal"});break;case t.w.Receive:f=(0,s.jsx)(i.Z,{width:20,height:20,colorClass:"text-iconNormal"});break;case t.w.Send:f=(0,s.jsx)(u.s,{width:20,height:20,colorClass:"text-iconNormal"});break;case t.w.Swap:case t.w.Trade:f=(0,s.jsx)(o.f,{width:20,height:20,colorClass:"text-iconNormal"});break;case t.w.Delegate:case t.w.Undelegate:case t.w.Redelegate:case t.w.Claim:case t.w.ClaimRewards:f=(0,s.jsx)(l.S,{width:20,height:20,colorClass:"text-iconNormal"});break;default:f=(0,s.jsx)(h.S,{width:20,height:20,colorClass:"text-iconNormal"})}return(0,s.jsx)("div",{className:"flex w-full justify-center items-center h-full bg-bg3 rounded-full",children:f})}}),30081:((I,m,e)=>{e.d(m,{p:()=>h});var s=e(74848);const l=24,i=24,h=({width:r,height:n,colorClass:a})=>(0,s.jsx)("svg",{className:a,fill:"none",width:r??l,height:n??i,viewBox:`0 0 ${l} ${i}`,xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.0561 2.62763C4.45795 2.22576 5.00301 2 5.57132 2H14.857C15.0465 2 15.2282 2.07525 15.3621 2.20921L20.3622 7.20921C20.496 7.34316 20.5713 7.52484 20.5713 7.71429V19.8571C20.5713 20.4254 20.3456 20.9706 19.9438 21.3724C19.5419 21.7743 18.9968 22 18.4285 22H5.57132C5.003 22 4.45795 21.7743 4.0561 21.3724C3.65424 20.9706 3.42847 20.4254 3.42847 19.8571V4.14286C3.42847 3.57454 3.65424 3.02949 4.0561 2.62763ZM8.42847 7.53571C7.93535 7.53571 7.53561 7.93546 7.53561 8.42857C7.53561 8.92169 7.93535 9.32143 8.42847 9.32143H11.2856C11.7787 9.32143 12.1785 8.92169 12.1785 8.42857C12.1785 7.93546 11.7787 7.53571 11.2856 7.53571H8.42847ZM8.42847 11.8214C7.93535 11.8214 7.53561 12.2212 7.53561 12.7143C7.53561 13.2074 7.93535 13.6071 8.42847 13.6071H15.5713C16.0644 13.6071 16.4642 13.2074 16.4642 12.7143C16.4642 12.2212 16.0644 11.8214 15.5713 11.8214H8.42847ZM7.53561 17C7.53561 16.5069 7.93535 16.1071 8.42847 16.1071H15.5713C16.0644 16.1071 16.4642 16.5069 16.4642 17C16.4642 17.4931 16.0644 17.8929 15.5713 17.8929H8.42847C7.93535 17.8929 7.53561 17.4931 7.53561 17Z",fill:"currentColor"})})}),34476:((I,m,e)=>{e.d(m,{m:()=>r});var s=e(96540),l=e.n(s),i=e(10537),h=e(15078);function r(n){const a=(0,i.n)(),t=(0,h.I)();return(0,s.useMemo)(()=>{var o;return(o=a[n])!=null?o:t[n]},[n,a,t])}}),36322:((I,m,e)=>{e.d(m,{f:()=>i});var s=e(92257),l=e(79372);function i(h){return(0,s.F)()==="GB"&&!l.uV.includes(h)}}),38921:((I,m,e)=>{e.d(m,{G:()=>l});var s=e(26264);function l(i){return i?i.defaultSwapPair?`${s.b.SWAP}?from=${i.defaultSwapPair.fromAsset}&to=${i.defaultSwapPair.toAsset}`:i.defaultSwapCrossChainPair?`${s.b.SWAP}?from=${i.defaultSwapCrossChainPair.fromAsset}&to=${i.defaultSwapCrossChainPair.toAsset}`:`${s.b.SWAP}?from=${i.assetId}`:s.b.SWAP}}),45871:((I,m,e)=>{e.d(m,{x:()=>h});var s=e(68157),l=e(96540),i=e.n(l);const h=()=>{var r;const n=(r=(0,s.GV)(a=>{var t;return(t=a.tx.itemsPerWalletAccount[a.wallet.walletId])==null?void 0:t[a.wallet.selectedAccountId]}))!=null?r:[];return(0,l.useMemo)(()=>(n.sort((a,t)=>t.createdAt-a.createdAt),n),[n])}}),54894:((I,m,e)=>{e.d(m,{d:()=>h});var s=e(68157),l=e(96540),i=e.n(l);const h=r=>{const{tx:n,wallet:a}=s.M_.getState();return(0,l.useMemo)(()=>{var t,o,u,d;return(d=(u=(o=(t=n.fetchedTransactionPeriodsByAccount)==null?void 0:t[a.walletId])==null?void 0:o[a.selectedAccountId])==null?void 0:u[r])!=null?d:{}},[n.fetchedTransactionPeriodsByAccount,a.walletId,a.selectedAccountId,r])}}),62266:((I,m,e)=>{e.d(m,{Qp:()=>E,Tl:()=>T});var s=e(54894),l=e(64145),i=e(22670),h=e(68157),r=e(52856),n=e(9389),a=e(33055),t=e(85005),o=e(97665),u=e(6475),d=e(96540),x=e.n(d),p=(M,L,W)=>new Promise((N,Z)=>{var P=g=>{try{K(W.next(g))}catch(j){Z(j)}},ee=g=>{try{K(W.throw(g))}catch(j){Z(j)}},K=g=>g.done?N(g.value):Promise.resolve(g.value).then(P,ee);K((W=W.apply(M,L)).next())});const f=1,c=6,E=new Date("01/03/2009");function T(M,L,W){const[N,Z]=(0,d.useState)(new Date),[P,ee]=(0,d.useState)((0,t.NW)(new Date,f)),[K,g]=(0,d.useState)(!1),j=(0,a.v)(),H=(0,n.Cb)(),{from:S,to:Y,nextToken:te}=(0,s.d)(M.assetId),ne=(0,d.useRef)(void 0),[re,se]=(0,d.useState)(!1),[A,R]=(0,d.useState)(!1),B=(0,o.jE)();(0,d.useEffect)(()=>{P<=E&&se(!1)},[P]);const b=(0,d.useCallback)(()=>{!S||!Y||new Date(S).getTime()<P.getTime()&&p(null,null,function*(){yield l.YW.emit(i.A.FETCH_MISSING_TRANSACTIONS,{from:N,to:S,asset:M,blockchain:L,accountAddress:W,limit:50})})},[S,Y,N,P]),y=(v,D,$)=>{h.M_.dispatch(r.B.actions.updateCachedTransactionsPeriod({selectedWalletId:j,accountId:H,assetId:M.assetId,from:v,to:D,nextToken:$}))},{data:O,hasNextPage:_,isFetching:U,status:C,fetchNextPage:G}=(0,u.q)({queryKey:["transactions",M.assetId],queryFn:v=>p(null,[v],function*({pageParam:D}){if(ne.current||D.from<E)return se(!1),null;const $={asset:M,blockchain:L,accountAddress:W,from:D.from.toISOString(),to:D.to.toISOString(),limit:50,nextToken:D.nextToken},{transactions:w,chainUnsupported:J,emptyPeriodFetched:X,nextToken:k}=yield l.YW.emit(i.A.FETCH_ASSET_TRANSACTION_HISTORY,$);let z=D.from,V=D.to,q=k;return J?(ne.current=!0,se(!1),{}):(w?.length&&h.M_.dispatch(r.B.actions.updateTxs({items:w,walletId:j,accountId:H})),S||y(N.toUTCString(),P.toUTCString()),D.from>new Date(S)&&P<new Date(S)&&(y($.from,Y,te),z=(0,t.NW)(new Date(Y),-c),V=new Date(Y),q=void 0),D.to<new Date(Y)&&y(S,$.to,D.nextToken),Z(z),ee(V),g(!!X),A||b(),{from:z,to:V,nextToken:q})}),refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:1e3*60*5,gcTime:1e3*60*60*24,initialPageParam:{to:P,from:N,nextToken:void 0},getNextPageParam:v=>{var D;if(!(P<=E||v===null))return v.nextToken||te||!v.from?{nextToken:(D=v.nextToken)!=null?D:te,from:N,to:P}:{from:new Date(v.to.getTime()),to:(0,t.NW)(v.to,c)}}}),F=(0,d.useMemo)(()=>{var v;if(!!((v=O?.pages[0])!=null&&v.from))return P.getTime()},[C,P,O]);return(0,d.useEffect)(()=>{K&&P>E&&(G(),g(!1))},[K]),(0,d.useEffect)(()=>()=>{B.removeQueries(),R(!0)},[]),{isFetching:U,transactionsFetched:re,hasNextPage:_,lastFetchedTransactionTime:F,emptyPeriodFetched:K,fetchNextPage:G}}}),69325:((I,m,e)=>{e.d(m,{q:()=>a});var s=e(66392);function l(t){return t===s.w.Trade||t===s.w.Inscribe||t===s.w.Send||t===s.w.Delegate||t===s.w.Undelegate||t===s.w.ClaimRewards||t===s.w.Claim||t===s.w.Compound||t===s.w.Redelegate||t===s.w.Utxo||t===s.w.Contract||t===s.w.Receive||t===s.w.Revoke||t===s.w.Approve}function i(t){return l(t.metadata.internal.type)?t.metadata.internal.asset:void 0}var h=e(45871),r=e(96540),n=e(6442);const a=(t,o)=>{const{locale:u}=(0,n.A)(),d=(0,h.x)();return(0,r.useMemo)(()=>{const p=(t&&o?d.filter(c=>{const E=c.events.some(T=>l(T.type)||T.type==="swap")&&c.blockchain.id===t.id&&c.assetId===o.assetId;return c.events.some(T=>T.type==="contract")?E:E&&!c.events.some(T=>!T.metadata.to)}):d).filter(c=>c.events.some(E=>E.type!==void 0)),f={};for(const c of p){const E=new Date(c.createdAt),T=`${E.toLocaleDateString(u,{month:"short"})} ${E.getDate()}, ${E.getFullYear()}`;f[T]||(f[T]=[]),f[T].push(c)}return f},[o?.address,t?.chainId,t?.id,d])}}),85005:((I,m,e)=>{e.d(m,{NW:()=>h,t6:()=>n});var s=e(15192);function l(t){return t.div(864e5)}function i(t){const o=Math.floor(t/864e5),u=Math.floor(t%(1440*60*1e3)/(3600*1e3)),d=Math.floor(t%(3600*1e3)/(60*1e3));return{days:o,hours:u,minutes:d}}function h(t,o){const u=new Date(t.getTime());return u.setMonth(u.getMonth()-o),u}function r(t,o){return o.getMonth()-t.getMonth()+12*(o.getFullYear()-t.getFullYear())}function n(t,o){const u=new Date(t.getTime());return u.setDate(u.getDate()-o),u}function a(t,o){return l(new Big(o.getTime()-t.getTime())).toNumber()}})}]);
