"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[3170],{9505:((yt,ge,l)=>{l.d(ge,{R:()=>Oe});var a=l(15192),H=l(96540),$e=l.n(H),Re=l(6442),_=Object.defineProperty,te=Object.defineProperties,Ce=Object.getOwnPropertyDescriptors,fe=Object.getOwnPropertySymbols,Me=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,be=(N,E,P)=>E in N?_(N,E,{enumerable:!0,configurable:!0,writable:!0,value:P}):N[E]=P,c=(N,E)=>{for(var P in E||(E={}))Me.call(E,P)&&be(N,P,E[P]);if(fe)for(var P of fe(E))Ne.call(E,P)&&be(N,P,E[P]);return N},ee=(N,E)=>te(N,Ce(E));const Ee=({value:N,min:E,max:P})=>{const G={number:!1,min:!1,max:!1};if(!N)return ee(c({},G),{isValid:!1});try{const z=(0,a.A)(N);G.number=!0,G.min=typeof E<"u"?z.gte((0,a.A)(E)):!0,G.max=typeof P<"u"?z.lte((0,a.A)(P)):!0}catch{}finally{return ee(c({},G),{isValid:Object.values(G).every(z=>!!z)})}},Oe=({value:N,min:E,max:P})=>{const{formatMessage:G}=(0,Re.A)(),[z,Ae]=(0,H.useState)({isValid:!1,number:!1,min:!1,max:!1});(0,H.useEffect)(()=>{Ae(c({},Ee({value:N,min:E,max:P})))},[N,E,P]);const Le=(0,H.useMemo)(()=>{if(!z.number)return G({id:"validate-amount.generic"});if(!z.min)return G({id:"validate-amount.min"},{number:E});if(!z.max)return G({id:"validate-amount.max"},{number:P})},[G,z,E]);return{isValid:z.isValid,error:Le}}}),93170:((yt,ge,l)=>{l.r(ge),l.d(ge,{App:()=>ht,default:()=>Vn});var a=l(74848),H=l(47767),$e=l(15747),Re=l(8457),_=l(29584),te=l(26264),Ce=l(23207),fe=l(63369),Me=l(9505),Ne=l(38221),be=l.n(Ne),c=l(96540),ee=l(6442),Ee=l(89408),Oe=l(22670),N=l(29305),E=l(64145),P=Object.defineProperty,G=Object.defineProperties,z=Object.getOwnPropertyDescriptors,Ae=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,St=Object.prototype.propertyIsEnumerable,He=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ge=(e,t)=>{for(var n in t||(t={}))Le.call(t,n)&&He(e,n,t[n]);if(Ae)for(var n of Ae(t))St.call(t,n)&&He(e,n,t[n]);return e},ze=(e,t)=>G(e,z(t)),We=(e,t,n)=>new Promise((s,i)=>{var o=d=>{try{u(n.next(d))}catch(p){i(p)}},m=d=>{try{u(n.throw(d))}catch(p){i(p)}},u=d=>d.done?s(d.value):Promise.resolve(d.value).then(o,m);u((n=n.apply(e,t)).next())});const Qe=e=>We(null,[e],function*({value:t,blockchain:n,blockchainType:s,isAddingTokenManually:i}){try{if(i)return{asset:null,isValid:yield E.YW.emit(Oe.A.VALIDATE_CONTRACT_ADDRESS_FORMAT,{address:t,network:n}),intlErrorParams:[{id:"input-contract-address.validation.manual.wrong-address"},{}]};const o=yield(0,N.E)({address:t,blockchain:n,blockchainType:s}),m=yield E.YW.emit(Ee.A.VALIDATE_ASSET,o);return{asset:o,isValid:m.global,intlErrorParams:m.global?null:[{id:"input-contract-address.validation.metadata"},{a:u=>(0,a.jsx)("a",{href:"https://support.trustwallet.com/support/home",target:"_blank",rel:"noopener nofollow noreferrer",children:u})}]}}catch{return{asset:null,isValid:!1,intlErrorParams:[{id:"input-contract-address.validation.not-found"},{networkName:n.name}]}}}),gt=({value:e,blockchain:t,blockchainType:n,isAddingTokenManually:s})=>{const{formatMessage:i}=(0,ee.A)(),[o,m]=(0,c.useState)({isValid:!1,isLoading:!1,asset:null}),u=(0,c.useRef)(!1),d=(0,c.useCallback)(be()(p=>We(null,[p],function*({blockchain:h,value:f}){u.current=!1;let b={isValid:!1,asset:null};f&&(b=yield Qe({value:f,blockchain:h,blockchainType:n,isAddingTokenManually:s})),!u.current&&m(ze(Ge({},b),{error:b.isValid||!b.intlErrorParams?void 0:i(...b.intlErrorParams),isLoading:!1}))}),200),[Qe,i]);return(0,c.useEffect)(()=>(m(p=>ze(Ge({},p),{isLoading:!0})),d({blockchain:t,value:e}),()=>{d.cancel(),u.current=!0}),[d,t,e]),o};var Ze=l(9814),Xe=l(62942),ke=l(63111),Je=l(65512),bt=l(52619),je=l(15351),Ue=l(65504),Ie=l(16665),Et=l(42201),ne=l(4800),qe=l(68632),Ot=l(88774),Z=l(52114),R=l(1279),At=l(77832),jt=l(66737),It=l(16638),se=l(40961),Tt=l(24867),Dt=l(1675),Pt=l(95060),Rt=l(37786),Te=l(76339);function Ct(e,t){let n=(0,c.useRef)({left:0,top:0});if((0,Te.s)(()=>{if(!t)return;let i=t.getBoundingClientRect();i&&(n.current=i)},[e,t]),t==null||!e||t===document.activeElement)return!1;let s=t.getBoundingClientRect();return s.top!==n.current.top||s.left!==n.current.left}var _e=l(96992),Mt=l(3321),I=l(95015),Nt=l(57575),Lt=l(34424),Ut=l(13674),Ft=l(28367),Bt=l(74156),Vt=l(69821),wt=l(86942),xe=l(98975);let et=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function tt(e){var t,n;let s=(t=e.innerText)!=null?t:"",i=e.cloneNode(!0);if(!(i instanceof HTMLElement))return s;let o=!1;for(let u of i.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))u.remove(),o=!0;let m=o?(n=i.innerText)!=null?n:"":s;return et.test(m)&&(m=m.replace(et,"")),m}function Yt(e){let t=e.getAttribute("aria-label");if(typeof t=="string")return t.trim();let n=e.getAttribute("aria-labelledby");if(n){let s=n.split(" ").map(i=>{let o=document.getElementById(i);if(o){let m=o.getAttribute("aria-label");return typeof m=="string"?m.trim():tt(o).trim()}return null}).filter(Boolean);if(s.length>0)return s.join(", ")}return tt(e).trim()}function Kt(e){let t=(0,c.useRef)(""),n=(0,c.useRef)("");return(0,I._)(()=>{let s=e.current;if(!s)return"";let i=s.innerText;if(t.current===i)return n.current;let o=Yt(s).trim().toLowerCase();return t.current=i,n.current=o,o})}function nt(e){return[e.screenX,e.screenY]}function $t(){let e=(0,c.useRef)([-1,-1]);return{wasMoved(t){let n=nt(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=nt(t)}}}var st=l(92888),Ht=l(65448),ie=l(10375),Gt=l(82498);function zn({children:e,freeze:t}){let n=at(t,e);return r.createElement(r.Fragment,null,n)}function at(e,t){let[n,s]=(0,c.useState)(t);return!e&&n!==t&&s(t),e?n:t}var zt=l(15953),de=l(13149),Wt=l(9685);function Qt(e){throw new Error("Unexpected object: "+e)}var C=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(C||{});function Fe(e,t){let n=t.resolveItems();if(n.length<=0)return null;let s=t.resolveActiveIndex(),i=s??-1;switch(e.focus){case 0:{for(let o=0;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 1:{i===-1&&(i=n.length);for(let o=i-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 2:{for(let o=i+1;o<n.length;++o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 3:{for(let o=n.length-1;o>=0;--o)if(!t.resolveDisabled(n[o],o,n))return o;return s}case 4:{for(let o=0;o<n.length;++o)if(t.resolveId(n[o],o,n)===e.id)return o;return s}case 5:return null;default:Qt(e)}}var Zt=l(82599),ce=l(41741),Xt=l(43660),ue=l(85897),kt=l(2211),Y=l(66206),Jt=l(59124),L=l(44586),Be=l(90540),qt=l(78302),_t=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(_t||{}),en=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(en||{}),tn=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(tn||{}),nn=(e=>(e[e.OpenListbox=0]="OpenListbox",e[e.CloseListbox=1]="CloseListbox",e[e.GoToOption=2]="GoToOption",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterOption=5]="RegisterOption",e[e.UnregisterOption=6]="UnregisterOption",e[e.SetButtonElement=7]="SetButtonElement",e[e.SetOptionsElement=8]="SetOptionsElement",e))(nn||{});function Ve(e,t=n=>n){let n=e.activeOptionIndex!==null?e.options[e.activeOptionIndex]:null,s=(0,ce.wl)(t(e.options.slice()),o=>o.dataRef.current.domRef.current),i=n?s.indexOf(n):null;return i===-1&&(i=null),{options:s,activeOptionIndex:i}}let sn={1(e){return e.dataRef.current.disabled||e.listboxState===1?e:{...e,activeOptionIndex:null,listboxState:1,__demoMode:!1}},0(e){if(e.dataRef.current.disabled||e.listboxState===0)return e;let t=e.activeOptionIndex,{isSelected:n}=e.dataRef.current,s=e.options.findIndex(i=>n(i.dataRef.current.value));return s!==-1&&(t=s),{...e,listboxState:0,activeOptionIndex:t,__demoMode:!1}},2(e,t){var n,s,i,o,m;if(e.dataRef.current.disabled||e.listboxState===1)return e;let u={...e,searchQuery:"",activationTrigger:(n=t.trigger)!=null?n:1,__demoMode:!1};if(t.focus===C.Nothing)return{...u,activeOptionIndex:null};if(t.focus===C.Specific)return{...u,activeOptionIndex:e.options.findIndex(h=>h.id===t.id)};if(t.focus===C.Previous){let h=e.activeOptionIndex;if(h!==null){let f=e.options[h].dataRef.current.domRef,b=Fe(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:O=>O.id,resolveDisabled:O=>O.dataRef.current.disabled});if(b!==null){let O=e.options[b].dataRef.current.domRef;if(((s=f.current)==null?void 0:s.previousElementSibling)===O.current||((i=O.current)==null?void 0:i.previousElementSibling)===null)return{...u,activeOptionIndex:b}}}}else if(t.focus===C.Next){let h=e.activeOptionIndex;if(h!==null){let f=e.options[h].dataRef.current.domRef,b=Fe(t,{resolveItems:()=>e.options,resolveActiveIndex:()=>e.activeOptionIndex,resolveId:O=>O.id,resolveDisabled:O=>O.dataRef.current.disabled});if(b!==null){let O=e.options[b].dataRef.current.domRef;if(((o=f.current)==null?void 0:o.nextElementSibling)===O.current||((m=O.current)==null?void 0:m.nextElementSibling)===null)return{...u,activeOptionIndex:b}}}}let d=Ve(e),p=Fe(t,{resolveItems:()=>d.options,resolveActiveIndex:()=>d.activeOptionIndex,resolveId:h=>h.id,resolveDisabled:h=>h.dataRef.current.disabled});return{...u,...d,activeOptionIndex:p}},3:(e,t)=>{if(e.dataRef.current.disabled||e.listboxState===1)return e;let n=e.searchQuery!==""?0:1,s=e.searchQuery+t.value.toLowerCase(),i=(e.activeOptionIndex!==null?e.options.slice(e.activeOptionIndex+n).concat(e.options.slice(0,e.activeOptionIndex+n)):e.options).find(m=>{var u;return!m.dataRef.current.disabled&&((u=m.dataRef.current.textValue)==null?void 0:u.startsWith(s))}),o=i?e.options.indexOf(i):-1;return o===-1||o===e.activeOptionIndex?{...e,searchQuery:s}:{...e,searchQuery:s,activeOptionIndex:o,activationTrigger:1}},4(e){return e.dataRef.current.disabled||e.listboxState===1||e.searchQuery===""?e:{...e,searchQuery:""}},5:(e,t)=>{let n={id:t.id,dataRef:t.dataRef},s=Ve(e,i=>[...i,n]);return e.activeOptionIndex===null&&e.dataRef.current.isSelected(t.dataRef.current.value)&&(s.activeOptionIndex=s.options.indexOf(n)),{...e,...s}},6:(e,t)=>{let n=Ve(e,s=>{let i=s.findIndex(o=>o.id===t.id);return i!==-1&&s.splice(i,1),s});return{...e,...n,activationTrigger:1}},7:(e,t)=>e.buttonElement===t.element?e:{...e,buttonElement:t.element},8:(e,t)=>e.optionsElement===t.element?e:{...e,optionsElement:t.element}},we=(0,c.createContext)(null);we.displayName="ListboxActionsContext";function De(e){let t=(0,c.useContext)(we);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,De),n}return t}let Pe=(0,c.createContext)(null);Pe.displayName="ListboxDataContext";function he(e){let t=(0,c.useContext)(Pe);if(t===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,he),n}return t}function an(e,t){return(0,ue.Y)(t.type,sn,e,t)}let ln=c.Fragment;function on(e,t){var n;let s=(0,Ht._)(),{value:i,defaultValue:o,form:m,name:u,onChange:d,by:p,invalid:h=!1,disabled:f=s||!1,horizontal:b=!1,multiple:O=!1,__demoMode:v=!1,...A}=e;const X=b?"horizontal":"vertical";let W=(0,xe.P)(t),M=(0,Rt.K)(o),[T=O?[]:void 0,U]=(0,Pt.P)(i,d,M),[K,D]=(0,c.useReducer)(an,{dataRef:(0,c.createRef)(),listboxState:v?0:1,options:[],searchQuery:"",activeOptionIndex:null,activationTrigger:1,optionsVisible:!1,buttonElement:null,optionsElement:null,__demoMode:v}),B=(0,c.useRef)({static:!1,hold:!1}),k=(0,c.useRef)(new Map),x=(0,Dt.t)(p),w=(0,c.useCallback)(j=>(0,ue.Y)(y.mode,{1:()=>T.some(F=>x(F,j)),0:()=>x(T,j)}),[T]),y=(0,c.useMemo)(()=>({...K,value:T,disabled:f,invalid:h,mode:O?1:0,orientation:X,compare:x,isSelected:w,optionsPropsRef:B,listRef:k}),[T,f,h,O,K,k]);(0,Te.s)(()=>{K.dataRef.current=y},[y]);let Q=y.listboxState===0;(0,Ft.j)(Q,[y.buttonElement,y.optionsElement],(j,F)=>{var J;D({type:1}),(0,ce.Bm)(F,ce.MZ.Loose)||(j.preventDefault(),(J=y.buttonElement)==null||J.focus())});let ve=(0,c.useMemo)(()=>({open:y.listboxState===0,disabled:f,invalid:h,value:T}),[y,f,T,h]),$=(0,I._)(j=>{let F=y.options.find(J=>J.id===j);F&&re(F.dataRef.current.value)}),q=(0,I._)(()=>{if(y.activeOptionIndex!==null){let{dataRef:j,id:F}=y.options[y.activeOptionIndex];re(j.current.value),D({type:2,focus:C.Specific,id:F})}}),me=(0,I._)(()=>D({type:0})),ae=(0,I._)(()=>D({type:1})),le=(0,_e.L)(),ye=(0,I._)((j,F,J)=>{le.dispose(),le.microTask(()=>j===C.Specific?D({type:2,focus:C.Specific,id:F,trigger:J}):D({type:2,focus:j,trigger:J}))}),oe=(0,I._)((j,F)=>(D({type:5,id:j,dataRef:F}),()=>D({type:6,id:j}))),re=(0,I._)(j=>(0,ue.Y)(y.mode,{0(){return U?.(j)},1(){let F=y.value.slice(),J=F.findIndex(Gn=>x(Gn,j));return J===-1?F.push(j):F.splice(J,1),U?.(F)}})),Se=(0,I._)(j=>D({type:3,value:j})),S=(0,I._)(()=>D({type:4})),g=(0,I._)(j=>{D({type:7,element:j})}),V=(0,I._)(j=>{D({type:8,element:j})}),pe=(0,c.useMemo)(()=>({onChange:re,registerOption:oe,goToOption:ye,closeListbox:ae,openListbox:me,selectActiveOption:q,selectOption:$,search:Se,clearSearch:S,setButtonElement:g,setOptionsElement:V}),[]),[wn,Yn]=(0,Be.b0)({inherit:!0}),Kn={ref:W},$n=(0,c.useCallback)(()=>{if(M!==void 0)return U?.(M)},[U,M]),Hn=(0,Y.Ci)();return c.createElement(Yn,{value:wn,props:{htmlFor:(n=y.buttonElement)==null?void 0:n.id},slot:{open:y.listboxState===0,disabled:f}},c.createElement(ie.St,null,c.createElement(we.Provider,{value:pe},c.createElement(Pe.Provider,{value:y},c.createElement(de.El,{value:(0,ue.Y)(y.listboxState,{0:de.Uw.Open,1:de.Uw.Closed})},u!=null&&T!=null&&c.createElement(Gt.CL,{disabled:f,data:{[u]:T},form:m,onReset:$n}),Hn({ourProps:Kn,theirProps:A,slot:ve,defaultTag:ln,name:"Listbox"}))))))}let rn="button";function dn(e,t){var n;let s=he("Listbox.Button"),i=De("Listbox.Button"),o=(0,c.useId)(),m=(0,zt.q)(),{id:u=m||`headlessui-listbox-button-${o}`,disabled:d=s.disabled||!1,autoFocus:p=!1,...h}=e,f=(0,xe.P)(t,(0,ie.Xc)(),i.setButtonElement),b=(0,ie.TI)(),O=(0,I._)(y=>{switch(y.key){case L.D.Enter:(0,Xt.q)(y.currentTarget);break;case L.D.Space:case L.D.ArrowDown:y.preventDefault(),(0,se.flushSync)(()=>i.openListbox()),s.value||i.goToOption(C.First);break;case L.D.ArrowUp:y.preventDefault(),(0,se.flushSync)(()=>i.openListbox()),s.value||i.goToOption(C.Last);break}}),v=(0,I._)(y=>{switch(y.key){case L.D.Space:y.preventDefault();break}}),A=(0,I._)(y=>{var Q;if((0,Wt.l)(y.currentTarget))return y.preventDefault();s.listboxState===0?((0,se.flushSync)(()=>i.closeListbox()),(Q=s.buttonElement)==null||Q.focus({preventScroll:!0})):(y.preventDefault(),i.openListbox())}),X=(0,I._)(y=>y.preventDefault()),W=(0,Be.o2)([u]),M=(0,Jt.MM)(),{isFocusVisible:T,focusProps:U}=(0,jt.o)({autoFocus:p}),{isHovered:K,hoverProps:D}=(0,It.M)({isDisabled:d}),{pressed:B,pressProps:k}=(0,Tt.Z)({disabled:d}),x=(0,c.useMemo)(()=>({open:s.listboxState===0,active:B||s.listboxState===0,disabled:d,invalid:s.invalid,value:s.value,hover:K,focus:T,autofocus:p}),[s.listboxState,s.value,d,K,T,B,s.invalid,p]),w=(0,Y.v6)(b(),{ref:f,id:u,type:(0,Vt.c)(e,s.buttonElement),"aria-haspopup":"listbox","aria-controls":(n=s.optionsElement)==null?void 0:n.id,"aria-expanded":s.listboxState===0,"aria-labelledby":W,"aria-describedby":M,disabled:d||void 0,autoFocus:p,onKeyDown:O,onKeyUp:v,onKeyPress:X,onClick:A},U,D,k);return(0,Y.Ci)()({ourProps:w,theirProps:h,slot:x,defaultTag:rn,name:"Listbox.Button"})}let lt=(0,c.createContext)(!1),cn="div",un=Y.Ac.RenderStrategy|Y.Ac.Static;function vn(e,t){var n,s;let i=(0,c.useId)(),{id:o=`headlessui-listbox-options-${i}`,anchor:m,portal:u=!1,modal:d=!0,transition:p=!1,...h}=e,f=(0,ie.zn)(m),[b,O]=(0,c.useState)(null);f&&(u=!0);let v=he("Listbox.Options"),A=De("Listbox.Options"),X=(0,Bt.g)(v.optionsElement),W=(0,de.O_)(),[M,T]=(0,st.p)(p,b,W!==null?(W&de.Uw.Open)===de.Uw.Open:v.listboxState===0);(0,Ut.O)(M,v.buttonElement,A.closeListbox);let U=v.__demoMode?!1:d&&v.listboxState===0;(0,wt.K)(U,X);let K=v.__demoMode?!1:d&&v.listboxState===0;(0,Nt.v)(K,{allowed:(0,c.useCallback)(()=>[v.buttonElement,v.optionsElement],[v.buttonElement,v.optionsElement])});let D=v.listboxState!==0,B=Ct(D,v.buttonElement)?!1:M,k=M&&v.listboxState===1,x=at(k,v.value),w=(0,I._)(S=>v.compare(x,S)),y=(0,c.useMemo)(()=>{var S;if(f==null||!((S=f?.to)!=null&&S.includes("selection")))return null;let g=v.options.findIndex(V=>w(V.dataRef.current.value));return g===-1&&(g=0),g},[f,v.options]),Q=(()=>{if(f==null)return;if(y===null)return{...f,inner:void 0};let S=Array.from(v.listRef.current.values());return{...f,inner:{listRef:{current:S},index:y}}})(),[ve,$]=(0,ie.UF)(Q),q=(0,ie.G3)(),me=(0,xe.P)(t,f?ve:null,A.setOptionsElement,O),ae=(0,_e.L)();(0,c.useEffect)(()=>{var S;let g=v.optionsElement;g&&v.listboxState===0&&g!==((S=(0,kt.T)(g))==null?void 0:S.activeElement)&&g?.focus({preventScroll:!0})},[v.listboxState,v.optionsElement]);let le=(0,I._)(S=>{var g,V;switch(ae.dispose(),S.key){case L.D.Space:if(v.searchQuery!=="")return S.preventDefault(),S.stopPropagation(),A.search(S.key);case L.D.Enter:if(S.preventDefault(),S.stopPropagation(),v.activeOptionIndex!==null){let{dataRef:pe}=v.options[v.activeOptionIndex];A.onChange(pe.current.value)}v.mode===0&&((0,se.flushSync)(()=>A.closeListbox()),(g=v.buttonElement)==null||g.focus({preventScroll:!0}));break;case(0,ue.Y)(v.orientation,{vertical:L.D.ArrowDown,horizontal:L.D.ArrowRight}):return S.preventDefault(),S.stopPropagation(),A.goToOption(C.Next);case(0,ue.Y)(v.orientation,{vertical:L.D.ArrowUp,horizontal:L.D.ArrowLeft}):return S.preventDefault(),S.stopPropagation(),A.goToOption(C.Previous);case L.D.Home:case L.D.PageUp:return S.preventDefault(),S.stopPropagation(),A.goToOption(C.First);case L.D.End:case L.D.PageDown:return S.preventDefault(),S.stopPropagation(),A.goToOption(C.Last);case L.D.Escape:S.preventDefault(),S.stopPropagation(),(0,se.flushSync)(()=>A.closeListbox()),(V=v.buttonElement)==null||V.focus({preventScroll:!0});return;case L.D.Tab:S.preventDefault(),S.stopPropagation(),(0,se.flushSync)(()=>A.closeListbox()),(0,ce.p9)(v.buttonElement,S.shiftKey?ce.BD.Previous:ce.BD.Next);break;default:S.key.length===1&&(A.search(S.key),ae.setTimeout(()=>A.clearSearch(),350));break}}),ye=(n=v.buttonElement)==null?void 0:n.id,oe=(0,c.useMemo)(()=>({open:v.listboxState===0}),[v.listboxState]),re=(0,Y.v6)(f?q():{},{id:o,ref:me,"aria-activedescendant":v.activeOptionIndex===null||(s=v.options[v.activeOptionIndex])==null?void 0:s.id,"aria-multiselectable":v.mode===1?!0:void 0,"aria-labelledby":ye,"aria-orientation":v.orientation,onKeyDown:le,role:"listbox",tabIndex:v.listboxState===0?0:void 0,style:{...h.style,...$,"--button-width":(0,Mt.L)(v.buttonElement,!0).width},...(0,st.B)(T)}),Se=(0,Y.Ci)();return c.createElement(qt.ZL,{enabled:u?e.static||M:!1},c.createElement(Pe.Provider,{value:v.mode===1?v:{...v,isSelected:w}},Se({ourProps:re,theirProps:h,slot:oe,defaultTag:cn,features:un,visible:B,name:"Listbox.Options"})))}let mn="div";function pn(e,t){let n=(0,c.useId)(),{id:s=`headlessui-listbox-option-${n}`,disabled:i=!1,value:o,...m}=e,u=(0,c.useContext)(lt)===!0,d=he("Listbox.Option"),p=De("Listbox.Option"),h=d.activeOptionIndex!==null?d.options[d.activeOptionIndex].id===s:!1,f=d.isSelected(o),b=(0,c.useRef)(null),O=Kt(b),v=(0,Lt.Y)({disabled:i,value:o,domRef:b,get textValue(){return O()}}),A=(0,xe.P)(t,b,x=>{x?d.listRef.current.set(s,x):d.listRef.current.delete(s)});(0,Te.s)(()=>{if(!d.__demoMode&&d.listboxState===0&&h&&d.activationTrigger!==0)return(0,Zt.e)().requestAnimationFrame(()=>{var x,w;(w=(x=b.current)==null?void 0:x.scrollIntoView)==null||w.call(x,{block:"nearest"})})},[b,h,d.__demoMode,d.listboxState,d.activationTrigger,d.activeOptionIndex]),(0,Te.s)(()=>{if(!u)return p.registerOption(s,v)},[v,s,u]);let X=(0,I._)(x=>{var w;if(i)return x.preventDefault();p.onChange(o),d.mode===0&&((0,se.flushSync)(()=>p.closeListbox()),(w=d.buttonElement)==null||w.focus({preventScroll:!0}))}),W=(0,I._)(()=>{if(i)return p.goToOption(C.Nothing);p.goToOption(C.Specific,s)}),M=$t(),T=(0,I._)(x=>{M.update(x),!i&&(h||p.goToOption(C.Specific,s,0))}),U=(0,I._)(x=>{M.wasMoved(x)&&(i||h||p.goToOption(C.Specific,s,0))}),K=(0,I._)(x=>{M.wasMoved(x)&&(i||h&&p.goToOption(C.Nothing))}),D=(0,c.useMemo)(()=>({active:h,focus:h,selected:f,disabled:i,selectedOption:f&&u}),[h,f,i,u]),B=u?{}:{id:s,ref:A,role:"option",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,"aria-selected":f,disabled:void 0,onClick:X,onFocus:W,onPointerEnter:T,onMouseEnter:T,onPointerMove:U,onMouseMove:U,onPointerLeave:K,onMouseLeave:K},k=(0,Y.Ci)();return!f&&u?null:k({ourProps:B,theirProps:m,slot:D,defaultTag:mn,name:"Listbox.Option"})}let fn=c.Fragment;function xn(e,t){let{options:n,placeholder:s,...i}=e,o={ref:(0,xe.P)(t)},m=he("ListboxSelectedOption"),u=(0,c.useMemo)(()=>({}),[]),d=m.value===void 0||m.value===null||m.mode===1&&Array.isArray(m.value)&&m.value.length===0,p=(0,Y.Ci)();return c.createElement(lt.Provider,{value:!0},p({ourProps:o,theirProps:{...i,children:c.createElement(c.Fragment,null,s&&d?s:n)},slot:u,defaultTag:fn,name:"ListboxSelectedOption"}))}let hn=(0,Y.FX)(on),ot=(0,Y.FX)(dn),yn=Be.JU,rt=(0,Y.FX)(vn),it=(0,Y.FX)(pn),Sn=(0,Y.FX)(xn),gn=Object.assign(hn,{Button:ot,Label:yn,Options:rt,Option:it,SelectedOption:Sn});const bn=({options:e,selected:t,setSelected:n,label:s,testid:i})=>(0,a.jsxs)("div",{className:"w-full",children:[s&&(0,a.jsx)(Z.E,{children:s}),(0,a.jsx)(gn,{value:t,by:"id",onChange:n,children:(0,a.jsxs)("div",{className:"relative w-full mt-1",children:[(0,a.jsxs)(ot,{"data-testid":i,className:"relative w-full cursor-default input-field title-text font-medium h-12",children:[(0,a.jsx)("span",{className:"block truncate",children:t.name}),(0,a.jsx)("span",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-2",children:(0,a.jsx)(je.D,{width:20,height:20,colorClass:"text-iconNormal"})})]}),(0,a.jsx)(At.e,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)(rt,{as:"ul",className:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded bg-bg3 py-1 shadow-lg focus:outline-none",children:e.map(o=>(0,a.jsx)(it,{as:"li","data-testid":`${i}-option`,className:"relative cursor-default select-none px-4 py-2",value:o,children:({selected:m})=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"flex flex-1",children:(0,a.jsx)(Z.E,{type:R.jK.TITLE,theme:m?R.Il.BRAND:R.Il.PRIMARY,truncated:!0,children:o.name})}),m&&(0,a.jsx)("div",{children:(0,a.jsx)(Ot.S,{colorClass:"text-primary"})})]})},o.id))})})]})})]});var En=l(75485),Ye=l(28398),dt=l(10537),ct=l(15078);class Ke extends Error{constructor(t){super(t),this.name="NetworkError",Object.setPrototypeOf(this,Ke.prototype)}}var On=l(80179),An=l(97286),jn=l(152),In=l(32669),Tn=l(19376),ut=l(73241);const Dn=({asset:e,blockchain:t})=>{var n;const{formatMessage:s}=(0,ee.A)();return(0,a.jsx)(jn.Z,{theme:In.R.NEUTRAL,noPadding:!0,children:(0,a.jsxs)("div",{className:"flex justify-between p-4 space-x-2 items-center",children:[(0,a.jsx)("div",{children:(0,a.jsx)(Ue.q,{name:e.name,src:e.iconUrl,network:e.address?t:void 0})}),(0,a.jsxs)("div",{className:"flex flex-col flex-grow space-y-1",children:[(0,a.jsxs)("div",{className:"flex flex-row space-x-1",children:[(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_16,testid:"custom-asset-asset-name",children:e.name})}),(0,a.jsx)("div",{children:e.type&&(0,a.jsx)(Tn.v,{size:ut.V.SMALL,theme:ut.x.SECONDARY,testid:"custom-asset-asset-type",children:e.type})})]}),(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_14,theme:R.Il.UTILITY_1_OPACITY_1,weight:R.nG.NORMAL,testid:"custom-asset-asset-network-name",children:(n=t.displayName)!=null?n:t.name})})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-1 text-right",children:[(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_16,testid:"custom-asset-asset-symbol",children:e.symbol})}),(0,a.jsx)("div",{children:(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_14,theme:R.Il.UTILITY_1_OPACITY_1,weight:R.nG.NORMAL,testid:"custom-asset-asset-decimals",children:s({id:"input-contract-address.decimals"},{decimals:e.decimals})})})]})]})})};var vt=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,Rn=Object.prototype.propertyIsEnumerable,Cn=(e,t)=>{var n={};for(var s in e)Pn.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&vt)for(var s of vt(e))t.indexOf(s)<0&&Rn.call(e,s)&&(n[s]=e[s]);return n},mt=(e,t,n)=>new Promise((s,i)=>{var o=d=>{try{u(n.next(d))}catch(p){i(p)}},m=d=>{try{u(n.throw(d))}catch(p){i(p)}},u=d=>d.done?s(d.value):Promise.resolve(d.value).then(o,m);u((n=n.apply(e,t)).next())});const pt=()=>{const{blockchainId:e,blockchainType:t,contractAddress:n}=(0,H.g)(),{trackAnalytics:s}=(0,Ce.s)();if(!e)throw new Error("Blockchain id is invalid.");if(!t)throw new Error("Blockchain type is invalid.");const i=(0,dt.n)(),o=(0,ct.I)(),m=(0,c.useMemo)(()=>(0,$e.rN)(e,t===Ye.l.CUSTOM,i,o),[e,t,i,o]);if(!m)throw new Error(`Could not find network with blockchain ID "${e}".`);const{formatMessage:u}=(0,ee.A)(),d=(0,H.Zp)(),[p,h]=(0,c.useState)(!1),[f,b]=(0,c.useState)(n??""),[O,v]=(0,c.useState)(""),[A,X]=(0,c.useState)(""),[W,M]=(0,c.useState)(""),[T,U]=(0,c.useState)(""),[K,D]=(0,c.useState)({decimals:!1}),[B,k]=(0,c.useState)(),x=location.href.includes("manual");(0,fe.K)({event:x?_.Un.CUSTOM_ASSET_ADD_ASSET_MANUALLY:_.Un.CUSTOM_ASSET_ADD_ASSET,props:null});const{data:w}=(0,An.I)({queryKey:["tokens-map"],queryFn:()=>E.YW.emit(Oe.A.FETCH_TOKEN_TYPES)}),Q=(0,c.useMemo)(()=>new Map(Object.entries(w||[]).filter(([g,V])=>!0)),[w]).get(e),ve=gt({value:f,blockchain:m,blockchainType:t,isAddingTokenManually:x}),{asset:$}=ve,q=Cn(ve,["asset"]),me=(0,Ze.u)({value:A}),ae=(0,Ze.u)({value:W}),le=(0,Me.R)({value:T,min:0,max:32}),ye=x?q.isValid&&me.isValid&&ae.isValid&&le.isValid&&(Q?!!B:!0):q.isValid,oe=(0,c.useMemo)(()=>{if(x)return{name:A,symbol:W,decimals:parseInt(T),blockchainId:m.id,address:f,balance:"0",isShownInHomeScreen:!0,isUserCustomAsset:!0,assetId:(0,En.Gc)({coinId:m.coinId,address:f})||"",type:B?.id}},[x,A,W,T,m,f,B?.id]),re=(0,c.useCallback)(g=>mt(null,null,function*(){if(g.preventDefault(),!(!$&&!oe)){h(!0),v("");try{const V=x?oe:$;yield E.YW.emit(Ee.A.ADD_ASSET,{asset:V,blockchainType:t}),s({event:_.BQ.ADD_CUSTOM_ASSET,props:{pageViewSource:x?_.Un.CUSTOM_ASSET_ADD_ASSET_MANUALLY:_.Un.CUSTOM_ASSET_ADD_ASSET,assetName:V.name,assetId:V.assetId,blockchainId:V.blockchainId}}),d(te.b.DEFAULT)}catch(V){v(V.name===Ke.name?"generic.network-error":"add-asset.register-error")}finally{h(!1)}}}),[$,t,x,oe,d,s]),Se=()=>mt(null,null,function*(){yield(0,On.V3)(`${te.b.CUSTOM_ASSET_ADD_ASSET}/${t}/${m.id}/manual/${f}`)}),S=g=>{v(""),b(g.target.value.trim()),D({decimals:!1})};return(0,c.useEffect)(()=>{$&&(X($.name),M($.symbol),U(String($.decimals)),D({decimals:!0}))},[$]),(0,a.jsxs)(ne.LN,{children:[!x&&(0,a.jsx)(ne.zY,{backAction:()=>d(-1),title:u({id:"add-custom-asset.title"})}),(0,a.jsxs)(ne.Gv,{children:[x&&(0,a.jsx)("div",{className:"flex my-11 justify-center",children:(0,a.jsx)(Re.A,{})}),(0,a.jsxs)("div",{className:`flex h-full flex-col flex-1 ${x?"bg-backgroundPrimary border border-line rounded p-6":""}`,children:[x&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)(Z.E,{type:R.jK.HEADLINE,children:u({id:"add-custom-asset.title"})})}),(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-1 pt-2",children:[(0,a.jsx)(Ue.q,{name:m.name,src:m.iconUrl,size:qe.Y.LARGE}),(0,a.jsx)(Z.E,{theme:R.Il.SECONDARY,weight:R.nG.NORMAL,children:u({id:"generic.on-network"},{networkName:m.displayName||m.name})})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-6 mt-6",children:[(0,a.jsx)("div",{children:(0,a.jsx)(Ie.S,{testid:"custom-asset-address-input",value:f,onChange:S,validation:q,placeholder:u({id:"input-contract-address.label"}),autoFocus:!0})}),x&&(0,a.jsxs)(a.Fragment,{children:[!!Q&&(0,a.jsx)(bn,{testid:"custom-asset-type-select",label:u({id:"custom-asset.token-type"}),selected:B??{id:Object.entries(Q)[0][0],name:Object.entries(Q)[0][1].name},setSelected:g=>k(g),options:Object.entries(Q).map(([g,V])=>{var pe;return{id:g,name:(pe=V.name)!=null?pe:g}})}),(0,a.jsx)("div",{children:(0,a.jsx)(Ie.S,{testid:"custom-asset-name-input",value:A,onChange:g=>X(g.target.value),label:u({id:"custom-asset.token-name"}),validation:me})}),(0,a.jsx)("div",{children:(0,a.jsx)(Ie.S,{testid:"custom-asset-symbol-input",value:W,onChange:g=>M(g.target.value),label:u({id:"custom-asset.token-symbol"}),validation:ae})}),(0,a.jsx)("div",{children:(0,a.jsx)(Ie.S,{disabled:K.decimals,readOnly:K.decimals,testid:"custom-asset-decimals-input",value:T,type:Et.Ih.NUMBER,onChange:g=>U(g.target.value),label:u({id:"custom-asset.token-decimals"}),validation:le})})]}),!x&&q.isValid&&$&&(0,a.jsxs)("div",{className:"flex flex-col items-center -mt-3",children:[(0,a.jsxs)("div",{className:"flex flex-col mb-4 *:-mb-[18px]",children:[(0,a.jsx)(je.D,{width:24,height:24,colorClass:"text-utility-1-opacity-3"}),(0,a.jsx)(je.D,{width:24,height:24,colorClass:"text-utility-1-opacity-2"}),(0,a.jsx)(je.D,{width:24,height:24,colorClass:"text-utility-1-opacity-1"})]}),(0,a.jsx)("div",{className:"pb-3",children:(0,a.jsx)(Z.E,{weight:R.nG.NORMAL,theme:R.Il.UTILITY_1_OPACITY_1,children:u({id:"input-contract-address.confirmation"})})}),(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)(Dn,{asset:$,blockchain:m})})]})]}),(0,a.jsxs)("div",{className:"flex justify-end flex-1 flex-col space-y-4 pt-6",children:[(0,a.jsx)(Xe.F,{theme:ke.Z.WARNING,children:u({id:"add-asset.warning"},{b:g=>(0,a.jsx)("span",{className:"font-medium",children:g})})}),O&&(0,a.jsx)(Xe.F,{theme:ke.Z.ERROR,children:u({id:O})}),!x&&f&&(0,a.jsx)(Je.$,{testid:"custom-asset-add-token-manually-button",theme:bt.ry.TRANSPARENT,onClick:Se,children:(0,a.jsx)(Z.E,{theme:R.Il.PRIMARY_DEFAULT,type:R.jK.SUBHEADER_16,children:u({id:"add-asset.btn-add-token-manually"})})}),(0,a.jsx)(Je.$,{testid:"custom-asset-add-token-button",onClick:re,disabled:!ye,loading:p||q.isLoading,children:u({id:"add-asset.btn-add-asset"})})]})]})]})]})};var Mn=l(33055),ft=l(29251),Nn=l(94893),Ln=l(41327);const xt=({name:e,iconUrl:t,onClick:n})=>(0,a.jsx)(Nn.c,{onClick:n,children:(0,a.jsxs)("div",{className:"flex items-center justify-between py-2 px-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)(Ue.q,{name:e,src:t,size:qe.Y.MEDIUM,abstractFallback:!0}),(0,a.jsx)(Z.E,{type:R.jK.SUBHEADER_16,children:e})]}),(0,a.jsx)("div",{children:(0,a.jsx)(Ln.v,{width:20,height:20,colorClass:"text-utility-1-opacity-1"})})]})});var Un=l(69275);const Fn=()=>{const e=(0,H.Zp)(),{formatMessage:t}=(0,ee.A)(),n=(0,Mn.A)(),s=(0,dt.n)(!0),i=(0,ct.I)(!0),o=(0,Un.o)(),m=(0,c.useCallback)(d=>!!o[d],[o]),u=(0,c.useMemo)(()=>s.filter(d=>{const p=n.type!==ft.S.HARDWARE&&n.type!==ft.S.PRIVATE_KEY,h=m(d.coinId);return(p||h)&&d.customTokensEnabled}),[s,n.type,m]);return(0,a.jsxs)("div",{className:"space-y-4",children:[u.map(d=>{var p;return(0,a.jsx)(xt,{name:(p=d.displayName)!=null?p:d.name,iconUrl:d.iconUrl,onClick:()=>e(`${te.b.CUSTOM_ASSET_ADD_ASSET}/${Ye.l.MAIN}/${d.id}`)},d.id)}),i.map(d=>{var p;return(0,a.jsx)(xt,{name:(p=d.displayName)!=null?p:d.name,iconUrl:d.iconUrl,onClick:()=>e(`${te.b.CUSTOM_ASSET_ADD_ASSET}/${Ye.l.CUSTOM}/${d.id}`)},d.id)})]})},Bn=()=>{(0,fe.K)({event:_.Un.CUSTOM_ASSET_SELECT_NETWORK,props:null});const{formatMessage:e}=(0,ee.A)(),t=(0,H.Zp)(),n=(0,c.useCallback)(()=>{t(te.b.MANAGE_CRYPTO)},[t]);return(0,a.jsxs)(ne.LN,{children:[(0,a.jsx)(ne.zY,{backAction:n,title:e({id:"network.header"})}),(0,a.jsx)(ne.Gv,{children:(0,a.jsx)(ne.LO,{children:(0,a.jsx)(Fn,{})})})]})},ht=()=>(0,a.jsxs)(H.BV,{children:[(0,a.jsx)(H.qh,{path:"/select-network",element:(0,a.jsx)(Bn,{})}),(0,a.jsx)(H.qh,{path:"/add-asset/:blockchainType/:blockchainId",element:(0,a.jsx)(pt,{})}),(0,a.jsx)(H.qh,{path:"/add-asset/:blockchainType/:blockchainId/manual/:contractAddress?",element:(0,a.jsx)(pt,{})})]}),Vn=ht})}]);
