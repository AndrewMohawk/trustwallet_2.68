"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[5625],{15625:((L,m,s)=>{s.r(m),s.d(m,{default:()=>Ie});var e=s(74848),v=s(26264),I=s(65512),x=s(52619),i=s(4800),A=s(152),j=s(19376),N=s(73241),n=s(52114),t=s(1279),z=s(69254),P=s(65504),B=s(68632),V=s(75460),b=s(30081),X=s(26858),Q=s(10537),p=s(72519),J=s(21094),q=s(21025),g=s(96540),_=s(6442),H=s(47767),K=s(64145),ee=s(22670),se=s(45421),te=s(56834),ae=s(99360),le=s(83071),F=s(28398),ne=s(7445);const oe={id:"zeroex",origin:"0x",favIconUrl:"https://assets-cdn.trustwallet.com/dapps/0x.org.png",title:"0x",url:"0x"};function G(l,r){const d=l.replace("0x",""),E=r.replace("0x",""),T=d.padStart(64,"0"),o=E.padStart(64,"0");return`${ne.FF}${T}${o}`}function re(l){return G(l,"0")}function De(l){const r="f".repeat(64);return G(l,r)}function de(l,r){const d=re(r);return{to:l,data:d,source:oe,isInternal:!0}}var ie=s(93155),ce=s(84240),W=s(68969),he=(l,r,d)=>new Promise((E,T)=>{var o=c=>{try{R(d.next(c))}catch(C){T(C)}},M=c=>{try{R(d.throw(c))}catch(C){T(C)}},R=c=>c.done?E(c.value):Promise.resolve(c.value).then(o,M);R((d=d.apply(l,r)).next())});const ve=l=>{switch(l){case p.b.HIGH_RISK:return N.x.ERROR;case p.b.MEDIUM_RISK:return N.x.WARNING;case p.b.LOW_RISK:default:return N.x.SUCCESS}},me=(l,r)=>{switch(l){case p.b.HIGH_RISK:return r({id:"approvals.risk.high",defaultMessage:"High Risk"});case p.b.MEDIUM_RISK:return r({id:"approvals.risk.medium",defaultMessage:"Medium Risk"});case p.b.LOW_RISK:return null;default:return null}},Ie=()=>{var l,r,d;const E=(0,H.Zp)(),T=(0,H.zy)(),{formatMessage:o}=(0,_.A)(),M=(0,Q.n)(),[R,c]=(0,g.useState)(!1),[C]=(0,le.j)(),Ae=(0,se.O)(te.KM.ethereum),pe=(0,ce.c)(),ue=T.state,{assetId:xe,spenderAddress:D,spenderName:Ee,chain:S,allowance:U,isUnlimited:y,riskLevel:k=p.b.LOW_RISK,riskDetails:f,walletAddress:$}=ue||{},h=(0,X.Mr)(xe||""),a=S?M[S]:null,w=(r=(l=a?.displayName)!=null?l:a?.name)!=null?r:S,Te=ve(k),Y=me(k,o),Z=(0,g.useMemo)(()=>!f||!Array.isArray(f)||f.length===0?null:f.map(u=>u.details).join(". ")+".",[f]),je=(0,g.useMemo)(()=>{if(y||!U||!h)return null;try{const u=BigInt(U).toString();return(0,q.hF)(u,h.decimals||0).toString()}catch{return U}},[U,y,h]),Re=()=>E(v.b.DEFAULT),Ce=()=>he(null,null,function*(){var u;if(!(!h||!a||!D||!((u=Ae.data)!=null&&u.address)))try{c(!0),C!==a.id&&(yield K.YW.emit(ee.A.SWITCH_BLOCKCHAIN,{blockchainId:a.id,blockchainType:a.isCustom?F.l.CUSTOM:F.l.MAIN}));const O=de(h.address,D);(yield K.YW.emit(ae.A.ETH_SIGN_TRANSACTION,O))&&E(v.b.HISTORY)}catch(O){ie.A.error("Failed to revoke approval",O),[W.Xc,W.$i].includes(O.message)&&pe("errors.transaction-generation","Transaction generation failed")}finally{c(!1)}});return h?(0,e.jsxs)(i.LN,{children:[(0,e.jsx)(i.zY,{backAction:Re,title:o({id:"approval-detail.title",defaultMessage:"Approval"})}),(0,e.jsx)(i.Gv,{children:(0,e.jsxs)(i.LO,{children:[(0,e.jsxs)("div",{className:"pb-4",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center pb-2",children:[(0,e.jsx)(n.E,{type:t.jK.SUBHEADER_14,theme:t.Il.UTILITY_1_OPACITY_1,children:o({id:"approval-detail.contract",defaultMessage:"Contract"})}),Y&&(0,e.jsx)(j.v,{size:N.V.MEDIUM,theme:Te,children:Y})]}),(0,e.jsx)(A.Z,{children:(0,e.jsxs)("div",{className:"py-2 px-3",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3 pb-6",children:[(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-white rounded-full",children:(0,e.jsx)(b.p,{width:24,height:24,colorClass:"text-iconNormal"})}),a&&(0,e.jsx)("div",{className:"absolute -bottom-px -right-0.5",children:(0,e.jsx)(P.q,{name:a.name,src:a.iconUrl,size:B.Y.XXSMALL})})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(n.E,{type:t.jK.SUBHEADER_14,children:Ee||"Unknown"}),(0,e.jsx)(n.E,{type:t.jK.BODY_14,theme:t.Il.UTILITY_1_OPACITY_1,children:w})]})]}),D&&(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)(n.E,{type:t.jK.BODY_12,weight:t.nG.MEDIUM,theme:t.Il.UTILITY_1_DEFAULT,children:o({id:"approval-detail.contract-address",defaultMessage:"Contract address"})}),(0,e.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,e.jsx)("div",{className:"break-all",children:(0,e.jsx)(n.E,{type:t.jK.SUBHEADER_14,theme:t.Il.UTILITY_1_OPACITY_1,children:D})}),((d=a?.explorer)==null?void 0:d.url)&&(0,e.jsx)("a",{className:"text-iconNormal shrink-0",href:`${a.explorer.url}${a.explorer.accountPath}${D}`,target:"_blank",rel:"noopener nofollow noreferrer",children:(0,e.jsx)(V.G,{width:20,height:20})})]})]}),Z&&Y&&(0,e.jsxs)("div",{className:"pt-4 space-y-1",children:[(0,e.jsx)(n.E,{type:t.jK.BODY_14,theme:t.Il.UTILITY_1_DEFAULT,children:o({id:"approval-detail.risk-detail",defaultMessage:"Risk detail"})}),(0,e.jsx)(n.E,{type:t.jK.BODY_14,theme:t.Il.UTILITY_1_OPACITY_1,children:Z})]})]})})]}),(0,e.jsxs)("div",{className:"pb-4",children:[(0,e.jsx)("div",{className:"pb-2",children:(0,e.jsx)(n.E,{type:t.jK.SUBHEADER_14,theme:t.Il.UTILITY_1_OPACITY_1,children:o({id:"approval-detail.asset",defaultMessage:"Asset"})})}),(0,e.jsx)(A.Z,{children:(0,e.jsxs)("div",{className:"py-2 px-3",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3 pb-6 ",children:[(0,e.jsx)(P.q,{name:h.name,src:h.iconUrl,size:B.Y.LARGE,network:a?{iconUrl:a.iconUrl,name:a.name,displayName:a.displayName}:void 0}),(0,e.jsxs)("div",{children:[(0,e.jsx)(n.E,{type:t.jK.SUBHEADER_14,children:h.symbol}),(0,e.jsx)(n.E,{type:t.jK.BODY_14,theme:t.Il.UTILITY_1_OPACITY_1,children:w})]})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)(n.E,{type:t.jK.BODY_12,weight:t.nG.MEDIUM,theme:t.Il.UTILITY_1_DEFAULT,children:o({id:"approval-detail.amount",defaultMessage:"Amount"})}),y?(0,e.jsx)(n.E,{type:t.jK.SUBHEADER_16,theme:t.Il.UTILITY_1_DEFAULT,children:o({id:"approvals.unlimited",defaultMessage:"Unlimited"})}):(0,e.jsx)(z.h,{textType:t.jK.BODY_16,weight:t.nG.MEDIUM,amountType:J.Cu.CRYPTO,currency:h.symbol,value:parseFloat(je||"0"),maxSignificantDecimals:4,tinyThreshold:4})]}),y&&(0,e.jsx)("div",{className:"pt-2",children:(0,e.jsx)(n.E,{type:t.jK.BODY_14,theme:t.Il.UTILITY_1_OPACITY_1,children:o({id:"approval-detail.unlimited-warning",defaultMessage:"Unlimited approval is not safe unless you fully trust the contract"})})}),$&&(0,e.jsxs)("div",{className:"pt-4 space-y-1",children:[(0,e.jsx)(n.E,{type:t.jK.BODY_12,weight:t.nG.MEDIUM,theme:t.Il.UTILITY_1_DEFAULT,children:o({id:"approval-detail.wallet-address",defaultMessage:"Wallet address"})}),(0,e.jsx)("div",{className:"break-all",children:(0,e.jsx)(n.E,{type:t.jK.SUBHEADER_14,theme:t.Il.UTILITY_1_OPACITY_1,children:$})})]})]})})]})]})}),(0,e.jsx)(i.FM,{children:(0,e.jsx)(I.$,{onClick:Ce,theme:x.ry.PRIMARY,loading:R,children:o({id:"approval-detail.revoke-approval",defaultMessage:"Revoke Approval"})})})]}):null}}),30081:((L,m,s)=>{s.d(m,{p:()=>x});var e=s(74848);const v=24,I=24,x=({width:i,height:A,colorClass:j})=>(0,e.jsx)("svg",{className:j,fill:"none",width:i??v,height:A??I,viewBox:`0 0 ${v} ${I}`,xmlns:"http://www.w3.org/2000/svg",children:(0,e.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.0561 2.62763C4.45795 2.22576 5.00301 2 5.57132 2H14.857C15.0465 2 15.2282 2.07525 15.3621 2.20921L20.3622 7.20921C20.496 7.34316 20.5713 7.52484 20.5713 7.71429V19.8571C20.5713 20.4254 20.3456 20.9706 19.9438 21.3724C19.5419 21.7743 18.9968 22 18.4285 22H5.57132C5.003 22 4.45795 21.7743 4.0561 21.3724C3.65424 20.9706 3.42847 20.4254 3.42847 19.8571V4.14286C3.42847 3.57454 3.65424 3.02949 4.0561 2.62763ZM8.42847 7.53571C7.93535 7.53571 7.53561 7.93546 7.53561 8.42857C7.53561 8.92169 7.93535 9.32143 8.42847 9.32143H11.2856C11.7787 9.32143 12.1785 8.92169 12.1785 8.42857C12.1785 7.93546 11.7787 7.53571 11.2856 7.53571H8.42847ZM8.42847 11.8214C7.93535 11.8214 7.53561 12.2212 7.53561 12.7143C7.53561 13.2074 7.93535 13.6071 8.42847 13.6071H15.5713C16.0644 13.6071 16.4642 13.2074 16.4642 12.7143C16.4642 12.2212 16.0644 11.8214 15.5713 11.8214H8.42847ZM7.53561 17C7.53561 16.5069 7.93535 16.1071 8.42847 16.1071H15.5713C16.0644 16.1071 16.4642 16.5069 16.4642 17C16.4642 17.4931 16.0644 17.8929 15.5713 17.8929H8.42847C7.93535 17.8929 7.53561 17.4931 7.53561 17Z",fill:"currentColor"})})}),68969:((L,m,s)=>{s.d(m,{$i:()=>x,Xc:()=>I,Zq:()=>v,oq:()=>e});const e="FAILED_QUOTE_GENERATION",v="FAILED_AMBER_RPC_ERROR",I="FAILED_APPROVAL_TRANSACTION_PAYLOAD_GENERATION",x="FAILED_SWAP_TRANSACTION_PAYLOAD_GENERATION"}),84240:((L,m,s)=>{s.d(m,{c:()=>I});var e=s(68157),v=s(61855);const I=()=>(i,A,j={})=>{e.M_.dispatch(v.A.actions.addToast({id:crypto.randomUUID(),i18n:{message:{id:i,defaultMessage:A},params:j}}))}})}]);
