"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[6859],{6859:((W,P,s)=>{s.r(P),s.d(P,{default:()=>Ee});var e=s(74848),T=s(20413),M=s(17761),D=s(74576),I=s(90086),x=s(57886),v=s(31170),r=s(52114),o=s(1279),g=s(6442);const U=({status:t})=>{const{formatMessage:n}=(0,g.A)();switch(t){case"failed":return(0,e.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,e.jsx)("div",{children:(0,e.jsx)(r.E,{testid:"tx-status",theme:o.Il.ERROR,children:n({id:"generic.failed"})})}),(0,e.jsx)("div",{className:"text-error",children:(0,e.jsx)(v.E,{width:15,height:15})})]});case"pending":return(0,e.jsx)("div",{className:"flex items-center space-x-1",children:(0,e.jsx)("div",{children:(0,e.jsx)(r.E,{testid:"tx-status",theme:o.Il.WARNING,children:n({id:"generic.pending"})})})});case"confirmed":return(0,e.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,e.jsx)("div",{children:(0,e.jsx)(r.E,{testid:"tx-status",theme:o.Il.SUCCESS,children:n({id:"generic.confirmed"})})}),(0,e.jsx)("div",{className:"text-textBuy",children:(0,e.jsx)(x.y,{width:15,height:15})})]})}};var L=s(45452),p=s(4800),m=s(55074),l=s(48346),a=s(69254),d=s(49798),f=s(34476),N=s(5027),w=s(44657),_=s(80772),$=s(21094),q=s(40053),F=s(96540);const ee=({transaction:t,asset:n,totalTransactionFee:E,gasPrice:h})=>{var y,j,A;const{formatMessage:i}=(0,g.A)(),{isAdvancedTransactionDataEnabled:c}=(0,N.j)(),u=(0,f.m)(t.blockchain.id),{from:R,to:C,type:O,input:B,amount:K,isUnlimited:b}=(0,T.A)(t),je=(0,F.useMemo)(()=>t.feeIs7702&&t.status==="pending",[t]),V=(0,F.useMemo)(()=>{var S;return t.feeIs7702&&(S=t.initialHash)!=null?S:t.hash},[t]);return(0,e.jsxs)(p.LO,{children:[(0,e.jsx)(m.F,{label:i({id:"generic.status"}),children:(0,e.jsx)(U,{status:t.status})}),(0,e.jsx)(m.F,{label:i({id:"generic.time"}),children:(0,e.jsx)(d.X,{value:t.createdAt})}),t.nft&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(m.F,{label:i({id:"generic.collection"}),children:(0,e.jsx)(r.E,{children:t.nft.collectionName})}),(0,e.jsx)(m.F,{label:i({id:"generic.token"})+" ID",children:(0,e.jsx)(r.E,{children:t.nft.onChainId})})]}),(0,e.jsx)(I.q,{network:u,sender:R}),(0,e.jsx)(D.C,{recipient:C,type:O,network:(j=(y=t.destination)==null?void 0:y.blockchain)!=null?j:u}),(0,e.jsx)(m.F,{label:i({id:"generic.hash"}),children:(0,e.jsx)(l.S,{isLoading:je,widthClass:"w-22.5",heightClass:"h-4",children:(0,e.jsxs)("div",{className:"flex space-x-1 items-center",children:[(0,e.jsx)(r.E,{children:(0,q.p)({value:V})}),(0,e.jsx)(L.T,{width:15,height:15,value:V})]})})}),t.memo&&(0,e.jsx)(m.F,{label:i({id:"generic.memo"}),children:(0,e.jsx)(r.E,{children:isNaN(parseInt(t.memo))?t.memo:parseInt(t.memo)})}),(parseFloat(K)>0||b)&&(0,e.jsx)(m.F,{label:i({id:"generic.amount"}),children:(0,e.jsx)(a.h,{testid:"tx-amount",value:K,amountType:$.Cu.CRYPTO,currency:t.nft?"":n.symbol,tinyThreshold:10,maxSignificantDecimals:10,isUnlimited:b})}),(0,e.jsx)(m.F,{label:i({id:"generic.network-fee"}),children:t.fee.map((S,z)=>{var Z,Q,k;return(0,e.jsx)(a.h,{testid:"tx-fee-"+z,value:t.feeIs7702&&(Q=(Z=t.initialFee)==null?void 0:Z[0])!=null?Q:S,amountType:$.Cu.CRYPTO,tinyThreshold:10,maxSignificantDecimals:10,currency:t.feeIs7702?(k=t.feeAsset)==null?void 0:k.symbol:(0,_.Hy)(u,n)},z+S)})}),(0,e.jsx)(m.F,{label:i({id:"generic.network"}),children:(0,e.jsx)(r.E,{testid:"tx-network",children:(A=u.displayName)!=null?A:u.name})}),c&&(0,e.jsxs)(e.Fragment,{children:[t.nonce&&(0,e.jsx)(m.F,{label:i({id:"generic.nonce"}),children:(0,e.jsx)(r.E,{children:parseInt(t.nonce)})}),t.gasLimit&&(0,e.jsx)(m.F,{label:i({id:"generic.gas-limit"}),children:(0,e.jsx)(r.E,{children:parseInt(t.gasLimit)})}),t.gasPrice&&(0,e.jsx)(m.F,{label:i({id:"generic.gas-price"}),children:(0,e.jsxs)(r.E,{children:[h," ",u.symbol]})}),O===w.wL.Contract&&(0,e.jsx)(m.F,{label:i({id:"generic.input-data"}),children:(0,e.jsx)("div",{className:"w-2/3 bg-bg3 rounded-lg p-4 text-right overflow-auto",children:(0,e.jsx)(r.E,{children:B})})})]}),!u.isCustom&&(0,e.jsx)(M.h,{asset:n,blockchain:u,type:O,amount:t.nft?0:parseFloat(K),fee:E,feeAsset:t.feeAsset})]})};var se=s(23207),te=s(65512),H=s(29584),X=s(34798),ne=s(80179),le=(t,n,E)=>new Promise((h,y)=>{var j=c=>{try{i(E.next(c))}catch(u){y(u)}},A=c=>{try{i(E.throw(c))}catch(u){y(u)}},i=c=>c.done?h(c.value):Promise.resolve(c.value).then(j,A);i((E=E.apply(t,n)).next())});const oe=({transaction:t})=>{var n,E,h;const{formatMessage:y}=(0,g.A)(),j=(0,X.K)(t.blockchain.id,t.blockchain.isCustom),{trackAnalytics:A}=(0,se.s)();if(!j.explorer)return null;const i=(n=j.explorer)!=null&&n.url.endsWith("/")?j.explorer.url:`${(E=j.explorer)==null?void 0:E.url}/`,c=(h=j.explorer)==null?void 0:h.txPath,u=c?c.startsWith("/")?c.substring(1):c:"tx/",R=(0,F.useMemo)(()=>t.feeIs7702&&t.status==="pending",[t]),C=`${i}${u}${t.hash}`;return(0,e.jsx)("div",{children:(0,e.jsx)(te.$,{onClick:()=>le(null,null,function*(){A({event:H.Un.BLOCKCHAIN_EXPLORER,props:{pageViewResourceType:H.Rb.EXTERNAL,explorerUrl:j.explorer.url}}),yield(0,ne.kK)(C)}),loading:R,disabled:R,children:y({id:"transaction.btn-view-on-explorer"})})})};var ae=s(65504),re=s(68632),ie=s(86170),de=s(92588),ce=s(79941),he=s(15192);const me=({asset:t,transaction:n,totalTransactionFee:E})=>{var h,y,j,A;const i=(0,X.K)(n.blockchain.id,n.blockchain.isCustom),c=(0,de.q)(t),{currency:u,baseCurrencyType:R}=(0,ie.P)(),C=n.nft,O=(0,F.useMemo)(()=>Number((0,ce.ct)(n,t)),[n,t]),B=c?.price?(0,he.A)(C?E:O).mul((h=c.price)!=null?h:0).toNumber():null;return(0,e.jsxs)("div",{className:"flex flex-col items-center space-y-1",children:[(0,e.jsx)(ae.q,{name:C?(j=(y=n.nft)==null?void 0:y.name)!=null?j:"":t.name,network:t.address?i:void 0,src:C?(A=n.nft)==null?void 0:A.previewImageURL.url:t.iconUrl,size:re.Y.XLARGE}),O===0?null:(0,e.jsx)(a.h,{textType:o.jK.HEADER,amountType:$.Cu.CRYPTO,value:O}),B===0?null:(0,e.jsx)(a.h,{textType:o.jK.SUBTITLE,theme:o.Il.SECONDARY,amountType:R,value:B,currency:u})]})};var Y=s(47767),ue=s(45871);const ve=t=>{const n=(0,ue.x)();return(0,F.useMemo)(()=>{var E;return(E=n.find(h=>h.hash===t))!=null?E:n.find(h=>h.initialHash===t)},[t,n])};var xe=s(63369),G=s(28398),fe=s(83729),J=s(26858);const Ee=()=>{const{id:t}=(0,Y.g)();if(!t)throw new Error(`Transaction id invalid "${t}" is invalid.`);const n=ve(t);if(!n)throw new Error(`Could not find transaction with id ${t}`);const{type:E}=(0,T.A)(n),h=(0,f.m)(n.blockchain.id),y=(0,X.K)(h.id,h.isCustom),{isAdvancedTransactionDataEnabled:j}=(0,N.j)();if(!y)throw new Error(`Could not find network with chain ID "${h.id}".`);const A=y.isCustom?(0,J.dJ)(y,n.assetId):(0,J.Mr)(n.assetId),i=(0,F.useMemo)(()=>{var C;return fe.Js((C=n.gasPrice)!=null?C:0,"ether")},[n]),c=(0,F.useMemo)(()=>{var C,O;return n.feeIs7702?Number((O=(C=n.initialFee)==null?void 0:C[0])!=null?O:n.fee[0]):n.fee.reduce((B,K)=>{var b;return parseFloat((b=String(B))!=null?b:"0")+parseFloat(K??"0")},0)+(j?parseFloat(i):0)},[n.fee,i]);if(!A)throw new Error(`Could not find asset with assetId: "${n.assetId}".`);(0,xe.K)({event:H.Un.TRANSACTION,props:{blockchainName:h.name,blockchainType:h.isCustom?G.l.CUSTOM:G.l.MAIN,blockchainChainId:h.chainId}});const{formatMessage:u}=(0,g.A)(),R=(0,Y.Zp)();return(0,e.jsxs)(p.LN,{children:[(0,e.jsx)(p.zY,{backAction:()=>R(-1),title:u({id:`transaction.${E}.title`},{assetSymbol:A.symbol})}),(0,e.jsxs)(p.Gv,{children:[(0,e.jsx)(me,{transaction:n,asset:A,totalTransactionFee:c}),(0,e.jsx)(ee,{transaction:n,asset:A,totalTransactionFee:c,gasPrice:i}),(0,e.jsx)(oe,{transaction:n})]})]})}}),20413:((W,P,s)=>{s.d(P,{A:()=>r});var e=s(26858),T=s(40790),M=s(96540),D=s.n(M),I=s(44657),x=s(79941),v=s(34476);const r=o=>{const g=(0,v.m)(o.blockchain.id),U=(0,T.F7)(g.coinId),L=g.isCustom?(0,e.dJ)(g,o.assetId):(0,e.Mr)(o.assetId);return(0,M.useMemo)(()=>{var p,m;const l={id:o.hash,from:o.events[0].metadata.from,to:o.events[0].metadata.to,type:o.events[0].type,status:o.status,symbol:(p=L?.symbol)!=null?p:g.symbol,fee:o.fee,date:o.createdAt,amount:(0,x.ct)(o,L)};if((0,x.fO)(o.events)){if(!U)return l.type=I.wL.Send,l.amount=Math.abs(Number(l.amount)).toString(),l;const a=U.address,{from:d,to:f}=o.events[0].metadata,N=d===a?f:d;parseFloat(l.amount)>0?(l.type=I.wL.Receive,l.from=N,l.to=a):(l.type=I.wL.Send,l.from=a,l.to=N,l.amount=Math.abs(Number(l.amount)).toString())}return(0,x.x0)(o.events)&&(l.input=o.events[0].metadata.input),(0,x.m5)(o.events)&&(l.isUnlimited=o.events[0].metadata.isUnlimited),o.nft&&(l.nft={onChainId:o.nft.onChainId,previewImage:o.nft.previewImageURL,originalImage:o.nft.originalMediaURL,name:o.nft.name,collectionName:o.nft.collectionName,collectionId:o.nft.collectionId,blockchain:{iconUrl:g.iconUrl,name:(m=g.displayName)!=null?m:g.name}}),l},[JSON.stringify(o)])}}),34476:((W,P,s)=>{s.d(P,{m:()=>I});var e=s(96540),T=s.n(e),M=s(10537),D=s(15078);function I(x){const v=(0,M.n)(),r=(0,D.I)();return(0,e.useMemo)(()=>{var o;return(o=v[x])!=null?o:r[x]},[x,v,r])}}),45871:((W,P,s)=>{s.d(P,{x:()=>D});var e=s(68157),T=s(96540),M=s.n(T);const D=()=>{var I;const x=(I=(0,e.GV)(v=>{var r;return(r=v.tx.itemsPerWalletAccount[v.wallet.walletId])==null?void 0:r[v.wallet.selectedAccountId]}))!=null?I:[];return(0,T.useMemo)(()=>(x.sort((v,r)=>r.createdAt-v.createdAt),x),[x])}}),49798:((W,P,s)=>{s.d(P,{X:()=>m});var e=s(74848),T=s(52114),M=s(72267),D=Object.defineProperty,I=Object.defineProperties,x=Object.getOwnPropertyDescriptors,v=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,g=(l,a,d)=>a in l?D(l,a,{enumerable:!0,configurable:!0,writable:!0,value:d}):l[a]=d,U=(l,a)=>{for(var d in a||(a={}))r.call(a,d)&&g(l,d,a[d]);if(v)for(var d of v(a))o.call(a,d)&&g(l,d,a[d]);return l},L=(l,a)=>I(l,x(a)),p=(l,a)=>{var d={};for(var f in l)r.call(l,f)&&a.indexOf(f)<0&&(d[f]=l[f]);if(l!=null&&v)for(var f of v(l))a.indexOf(f)<0&&o.call(l,f)&&(d[f]=l[f]);return d};const m=l=>{var a=l,{value:d,inline:f=!1}=a,N=p(a,["value","inline"]);const w=(0,e.jsx)(M.XU,{value:d,month:"short",day:"2-digit",hourCycle:"h23",hour:"numeric",minute:"2-digit",year:"numeric"});return f?w:(0,e.jsx)(T.E,L(U({},N),{children:w}))}})}]);
