"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[1627],{6475:((Ee,B,e)=>{e.d(B,{q:()=>Q});var n=e(1651),x=e(58959),R=class extends n.${constructor(l,c){super(l,c)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(l,c){super.setOptions({...l,behavior:(0,x.PL)()},c)}getOptimisticResult(l){return l.behavior=(0,x.PL)(),super.getOptimisticResult(l)}fetchNextPage(l){return this.fetch({...l,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(l){return this.fetch({...l,meta:{fetchMore:{direction:"backward"}}})}createResult(l,c){const{state:O}=l,g=super.createResult(l,c),{isFetching:o,isRefetching:y,isError:F,isRefetchError:$}=g,j=O.fetchMeta?.fetchMore?.direction,b=F&&j==="forward",p=o&&j==="forward",A=F&&j==="backward",N=o&&j==="backward";return{...g,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,x.rB)(c,O.data),hasPreviousPage:(0,x.RQ)(c,O.data),isFetchNextPageError:b,isFetchingNextPage:p,isFetchPreviousPageError:A,isFetchingPreviousPage:N,isRefetchError:$&&!b&&!A,isRefetching:y&&!p&&!N}}},r=e(44171);function Q(l,c){return(0,r.t)(l,R,c)}}),21627:((Ee,B,e)=>{e.r(B),e.d(B,{default:()=>We});var n=e(74848),x=e(95455),R=e(29584),r=e(26264),Q=e(63369),l=e(65512),c=e(52619),O=e(69666),g=e(2543),o=e(96540),y=e(6442),F=e(67008);const $=({onClick:t,testid:s})=>{const{formatMessage:a}=(0,y.A)(),m=(0,o.useMemo)(()=>(0,g.uniqueId)("import-info-action-"),[]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{"data-tooltip-id":m,"data-tooltip-content":a({id:"manage-crypto.info-action.text"}),children:(0,n.jsx)(l.$,{testid:s,size:c.Vp.SMALL,shape:c.dB.ICON_SQUARE,theme:c.ry.TRANSPARENT,noPadding:!0,onClick:t,children:(0,n.jsx)(O.c,{colorClass:"text-utility-1-opacity-1"})})}),(0,n.jsx)(F.m_,{id:m,className:"tw-tooltip"})]})};var j=e(8360),b=e(55418),p=e(4800),A=e(68632),N=e(79830),v=e(52114),H=e(1279),te=e(38795),Ae=e(47991),Ce=e(10537),je=e(15078),Ne=Object.defineProperty,Me=Object.defineProperties,Oe=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,de=(t,s,a)=>s in t?Ne(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,P=(t,s)=>{for(var a in s||(s={}))De.call(s,a)&&de(t,a,s[a]);if(ie)for(var a of ie(s))Le.call(s,a)&&de(t,a,s[a]);return t},U=(t,s)=>Me(t,Oe(s));const I=(t,s)=>t.symbol.localeCompare(s.symbol),K=()=>{const t=(0,Ae.P)(),s=(0,Ce.n)(),a=(0,je.I)(),m=P(P({},s),a);return(0,o.useMemo)(()=>t.reduce((f,S)=>(m[S.blockchainId]&&f.push(U(P({},S),{blockchain:m[S.blockchainId]})),f),[]).sort(I),[t,s,a])};var V=e(47767),w=e(67310),se=e(23207),M=e(50882),J=e(94893),ne=e(65504),ae=e(33647),k=e(19376),z=e(73241),Te=e(64145),q=e(98939),Be=e(89408),_=e(75485),Re=e(67658),ue=e(33055),he=e(69275),Fe=e(9389),Y=e(29251),X=e(3958),G=(t,s,a)=>new Promise((m,f)=>{var S=h=>{try{Z(a.next(h))}catch(L){f(L)}},u=h=>{try{Z(a.throw(h))}catch(L){f(L)}},Z=h=>h.done?m(h.value):Promise.resolve(h.value).then(S,u);Z((a=a.apply(t,s)).next())});const be=({asset:t,onAssetToggle:s})=>{var a;const{trackAnalytics:m}=(0,se.s)(),{formatMessage:f}=(0,y.A)(),S=(0,V.Zp)(),[u,Z]=(0,o.useState)(t.isShownInHomeScreen),[h,L]=(0,o.useState)(!1),Pe=(0,ue.A)(),T=(0,Fe.YL)(),xe=(0,he.o)(),le=W=>G(null,null,function*(){s(W),Z(!W.isShownInHomeScreen),L(!0),yield(0,X.A)(Te.YW.emit(Be.A.TOGGLE_ASSET_VISIBILITY,W),250),L(!1)}),C=(0,Re.A)(t),E=(0,o.useMemo)(()=>{const W=C.isCustom?q.M7.toString():(0,_.$5)(t.assetId).coinId;return!xe[W]},[xe,C]),ee=(0,o.useMemo)(()=>E&&Pe.type===Y.S.MNEMONIC&&T.derivationIndex>0,[Pe,T,E]);if(!C)return null;const Ie=()=>G(null,null,function*(){E||(u||(yield le(t)),S(`${r.b.ASSET}/${t.assetId}`))});return(0,n.jsx)(J.c,{disabled:E||h,onClick:Ie,children:(0,n.jsxs)("div",{className:"flex justify-between space-x-2 items-center",children:[(0,n.jsx)("div",{className:E?"opacity-70":"opacity-100",children:(0,n.jsx)(ne.q,{src:t.iconUrl,name:t.name,network:t.address?C:void 0})}),(0,n.jsxs)("div",{className:`flex-grow ${E?"opacity-70":"opacity-100"}`,children:[(0,n.jsxs)("div",{className:"flex flex-row space-x-1 items-center ",children:[(0,n.jsx)("div",{children:(0,n.jsx)(v.E,{testid:"asset-symbol",type:H.jK.SUBHEADER_16,children:t.symbol})}),(0,n.jsx)("div",{children:(0,n.jsx)(k.v,{theme:z.x.SECONDARY,size:z.V.SMALL,testid:"asset-type",children:(a=C.displayName)!=null?a:C.name})})]}),(0,n.jsx)("div",{className:"flex flex-row space-x-1",children:(0,n.jsx)(v.E,{testid:"asset-blockchain",type:H.jK.BODY_14,children:t.name})})]}),(0,n.jsx)("div",{className:h?"opacity-50":"opacity-100",children:E?(0,n.jsx)(M.E,{text:f({id:ee?"manage-assets.not-supported":"manage-assets.support-coming-soon",defaultMessage:ee?"Not supported":"manage-assets.support-coming-soon"})}):(0,n.jsx)(ae.d,{testid:"toggle-asset-switch",label:t.name,checked:u,onChange:()=>{m({event:R.BQ.TOGGLE_HOMESCREEN_ASSET_VISIBILITY,props:{pageViewSource:R.Un.MANAGE_CRYPTO,assetName:t.name,assetId:t.assetId,enabled:!u}}),le(t)}})})]})})},ve=({assets:t,loadMoreItems:s,hasNextPage:a,onAssetToggle:m})=>{const f=window.innerHeight-p.a4-p.Et-p.e4-p.N-32-34-16-16-36-16;return(0,n.jsx)(w.A,{dataLength:t.length,next:s,height:f,className:"tw-scrollbar",hasMore:!!a,loader:null,scrollThreshold:"5px",children:(0,n.jsx)("div",{className:"flex flex-col space-y-5",children:t.map(S=>(0,n.jsx)(be,{asset:S,onAssetToggle:m},S.assetId))})})};var me=e(44832),fe=e(3330),D=(t=>(t.ENABLED="enabled",t.DISABLED="disabled",t))(D||{}),He=e(29189),Ue=Object.defineProperty,Ke=Object.defineProperties,Ve=Object.getOwnPropertyDescriptors,oe=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable,pe=(t,s,a)=>s in t?Ue(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,re=(t,s)=>{for(var a in s||(s={}))Ye.call(s,a)&&pe(t,a,s[a]);if(oe)for(var a of oe(s))ge.call(s,a)&&pe(t,a,s[a]);return t},ye=(t,s)=>Ke(t,Ve(s));const Ge=({search:t,assets:s})=>t?s.filter(({symbol:a,name:m,address:f})=>f?.toLowerCase().includes(t.toLowerCase())||a.toLowerCase().includes(t.toLowerCase())||m.toLowerCase().includes(t.toLowerCase())):s,We=()=>{(0,Q.K)({event:R.Un.MANAGE_CRYPTO,props:null});const{formatMessage:t}=(0,y.A)(),s=(0,V.Zp)(),a=K(),m=(0,ue.A)(),f=(0,me.g)(),S=(0,He.f)(),[u,Z]=(0,o.useState)(S),[h,L]=(0,o.useState)({}),Pe=(0,o.useMemo)(()=>{const d=f.find(ce=>ce.id===u);return d?[(0,_.er)(d.coinId)]:null},[f,u]),[T,xe]=(0,o.useState)(""),[le,C]=(0,o.useState)(!1),{flattenData:E,isFetching:ee,setQuery:Ie,fetchNextPage:W,hasNextPage:ze}=(0,te.r)(Pe,!0),ke=(0,he.o)(),Se=(0,o.useRef)(!1),Xe=(0,o.useMemo)(()=>Ge({search:T,assets:a}),[a,T]),qe=(0,o.useCallback)((0,g.debounce)(d=>{C(!0),Ie(d)},200),[]),Qe=()=>{s(r.b.CUSTOM_ASSET_SELECT_NETWORK)},Ze=(0,o.useMemo)(()=>E.map(d=>d.assetId),[E]),Je=(0,o.useMemo)(()=>new Map(a.map(d=>[d.assetId,d.isShownInHomeScreen])),[a]),$e=(0,o.useMemo)(()=>{const d=[...Xe.filter(i=>!Ze.includes(i.assetId)),...E.map(i=>ye(re({},i),{isShownInHomeScreen:i.isShownInHomeScreen||Je.get(i.assetId)}))].filter(i=>{if(m.type===Y.S.PRIVATE_KEY){const tt=i.isCustomAsset?60:(0,_.X2)(i.assetId);return!!ke[tt]&&(!u||u===i.blockchainId)}return!u||u===i.blockchainId});return[...d.filter(i=>(i.isShownInHomeScreen||h[i.assetId]===D.ENABLED)&&h[i.assetId]!==D.DISABLED),...d.filter(i=>!i.isShownInHomeScreen&&h[i.assetId]!==D.ENABLED||h[i.assetId]===D.DISABLED)]},[Xe,h,Je,E,Ze,u]);(0,o.useEffect)(()=>{T&&(C(!0),Ie(T))},[u]),(0,o.useEffect)(()=>{L({})},[T,u]);const _e=d=>L(ce=>{var i;return ye(re({},ce),{[d.assetId]:(i=ce[d.assetId])!=null?i:d.isShownInHomeScreen?D.ENABLED:D.DISABLED})});(0,o.useEffect)(()=>{if(ee&&!Se.current){Se.current=!0;return}!ee&&Se.current&&(C(!1),Se.current=!1)},[ee]);const et=(0,o.useMemo)(()=>le?(0,n.jsx)(b.o,{children:(0,n.jsx)("div",{children:(0,n.jsx)(N.y,{size:A.Y.XLARGE})})}):$e.length===0?(0,n.jsx)(x.B,{message:t({id:"token-asset-list.empty-search-caption"})}):(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)(ve,{assets:$e,hasNextPage:ze,loadMoreItems:W,onAssetToggle:_e}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(l.$,{testid:"import-asset-btn",size:c.Vp.SMALL,shape:c.dB.DEFAULT,theme:c.ry.TRANSPARENT,onClick:Qe,children:(0,n.jsx)(v.E,{theme:H.Il.BRAND,type:H.jK.SUBHEADER_14,children:t({id:"manage-crypto.import-asset"})})})})]}),[le,$e,ze,W,Qe,t]);return(0,n.jsxs)(p.LN,{children:[(0,n.jsx)(p.zY,{backAction:()=>s(r.b.DEFAULT),title:t({id:"manage-crypto.title"}),infoAction:(0,n.jsx)($,{testid:"import-asset-info-action",onClick:Qe})}),(0,n.jsxs)(p.Gv,{children:[(0,n.jsx)(j.D,{testid:"search-asset-input",value:T,onChange:d=>{C(!0),xe(d.target.value),qe(d.target.value)},placeholder:t({id:"component.input-asset-search.placeholder"})}),(0,n.jsx)("div",{className:"mt-4",children:(0,n.jsx)(fe.u,{localFilteringBlockchainId:u,showText:!0,onFilterChange:Z})}),et]})]})}}),33647:((Ee,B,e)=>{e.d(B,{d:()=>de});var n=e(74848),x=e(66737),R=e(16638),r=e(96540),Q=e(24867),l=e(95060),c=e(37786),O=e(96992),g=e(95015),o=e(69821),y=e(98975),F=e(65448),$=e(82498),j=e(15953),b=e(9685),p=e(43660),A=e(66206),N=e(59124),v=e(44586),H=e(90540);let te=(0,r.createContext)(null);te.displayName="GroupContext";let Ae=r.Fragment;function Ce(P){var U;let[I,K]=(0,r.useState)(null),[V,w]=(0,H.b0)(),[se,M]=(0,N.rU)(),J=(0,r.useMemo)(()=>({switch:I,setSwitch:K}),[I,K]),ne={},ae=P,k=(0,A.Ci)();return r.createElement(M,{name:"Switch.Description",value:se},r.createElement(w,{name:"Switch.Label",value:V,props:{htmlFor:(U=J.switch)==null?void 0:U.id,onClick(z){I&&(z.currentTarget instanceof HTMLLabelElement&&z.preventDefault(),I.click(),I.focus({preventScroll:!0}))}}},r.createElement(te.Provider,{value:J},k({ourProps:ne,theirProps:ae,slot:{},defaultTag:Ae,name:"Switch.Group"}))))}let je="button";function Ne(P,U){var I;let K=(0,r.useId)(),V=(0,j.q)(),w=(0,F._)(),{id:se=V||`headlessui-switch-${K}`,disabled:M=w||!1,checked:J,defaultChecked:ne,onChange:ae,name:k,value:z,form:Te,autoFocus:q=!1,...Be}=P,_=(0,r.useContext)(te),[Re,ue]=(0,r.useState)(null),he=(0,r.useRef)(null),Fe=(0,y.P)(he,U,_===null?null:_.setSwitch,ue),Y=(0,c.K)(ne),[X,G]=(0,l.P)(J,ae,Y??!1),be=(0,O.L)(),[ve,me]=(0,r.useState)(!1),fe=(0,g._)(()=>{me(!0),G?.(!X),be.nextFrame(()=>{me(!1)})}),D=(0,g._)(s=>{if((0,b.l)(s.currentTarget))return s.preventDefault();s.preventDefault(),fe()}),He=(0,g._)(s=>{s.key===v.D.Space?(s.preventDefault(),fe()):s.key===v.D.Enter&&(0,p.q)(s.currentTarget)}),Ue=(0,g._)(s=>s.preventDefault()),Ke=(0,H.o2)(),Ve=(0,N.MM)(),{isFocusVisible:oe,focusProps:Ye}=(0,x.o)({autoFocus:q}),{isHovered:ge,hoverProps:pe}=(0,R.M)({isDisabled:M}),{pressed:re,pressProps:ye}=(0,Q.Z)({disabled:M}),Ge=(0,r.useMemo)(()=>({checked:X,disabled:M,hover:ge,focus:oe,active:re,autofocus:q,changing:ve}),[X,ge,oe,re,M,ve,q]),we=(0,A.v6)({id:se,ref:Fe,role:"switch",type:(0,o.c)(P,Re),tabIndex:P.tabIndex===-1?0:(I=P.tabIndex)!=null?I:0,"aria-checked":X,"aria-labelledby":Ke,"aria-describedby":Ve,disabled:M||void 0,autoFocus:q,onClick:D,onKeyUp:He,onKeyPress:Ue},Ye,pe,ye),We=(0,r.useCallback)(()=>{if(Y!==void 0)return G?.(Y)},[G,Y]),t=(0,A.Ci)();return r.createElement(r.Fragment,null,k!=null&&r.createElement($.CL,{disabled:M,data:{[k]:z||"on"},overrides:{type:"checkbox",checked:X},form:Te,onReset:We}),t({ourProps:we,theirProps:Be,slot:Ge,defaultTag:je,name:"Switch"}))}let Me=(0,A.FX)(Ne),Oe=Ce,ie=H.JU,De=N.VY,Le=Object.assign(Me,{Group:Oe,Label:ie,Description:De});const de=({label:P,checked:U,testid:I,disabled:K,onChange:V})=>(0,n.jsxs)(Le,{"data-testid":I,checked:U,onChange:V,className:"switch",onClick:w=>w.stopPropagation(),disabled:K,children:[P&&(0,n.jsx)("span",{className:"sr-only",children:P}),(0,n.jsx)("span",{"aria-hidden":"true",className:"switch__toggle"})]})}),38795:((Ee,B,e)=>{e.d(B,{r:()=>l});var n=e(6475),x=e(96540),R=e.n(x),r=e(64145),Q=e(89408);function l(c,O){const[g,o]=(0,x.useState)(void 0),{data:y,error:F,fetchNextPage:$,hasNextPage:j,isFetching:b,isFetchingNextPage:p,status:A}=(0,n.q)({queryKey:["tokens",g,c?.join()],queryFn:({pageParam:v})=>r.YW.emit(Q.A.SEARCH_ASSETS,{query:g,networks:c,page:v,includeNonCustomTokenNetworks:O}),enabled:g!==void 0,initialPageParam:0,refetchOnWindowFocus:!1,getNextPageParam:v=>v?.nextPage}),N=(0,x.useMemo)(()=>(y?.pages||[]).flatMap(v=>v?.data||[]),[y?.pages]);return{setQuery:o,data:y,error:F,fetchNextPage:$,hasNextPage:j,isFetching:b,isFetchingNextPage:p,status:A,flattenData:N}}})}]);
