"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[9973],{49973:((es,T,s)=>{s.r(T),s.d(T,{default:()=>_});var n=s(74848),c=s(96540),h=s(85434),M=s(8224),R=s(23207),B=s(63369),N=s(82444),I=s(29584),U=s(6442),L=s(65512),p=s(52619),Y=s(33994),D=s(47767),j=s(26264),F=s(64145),V=s(72960),K=s(31357),A=s(52114),v=s(1279),G=s(93155),E=s(68157),H=s(32454),O=s(1645),Q=s(26113),W=s(70438),Z=s(74215),$=(a,t,e)=>new Promise((m,r)=>{var g=i=>{try{o(e.next(i))}catch(l){r(l)}},u=i=>{try{o(e.throw(i))}catch(l){r(l)}},o=i=>i.done?m(i.value):Promise.resolve(i.value).then(g,u);o((e=e.apply(a,t)).next())});const z=()=>{const a=(0,E.GV)(f=>f.settings.passkeyId),t=(0,E.jL)(),{trackAnalytics:e}=(0,R.s)(),m=(0,Z.v)(),{formatMessage:r}=(0,U.A)();(0,B.K)({event:I.Un.ONBOARDING_SET_BIOMETRICS,props:{setupType:m}});const g=(0,D.Zp)(),[u,o]=(0,c.useState)(null),{data:i}=(0,c.useContext)(M.x),[l,x]=(0,c.useState)(!1),[y,S]=(0,c.useState)(0),ss=()=>$(null,null,function*(){a&&g(j.b.DEFAULT),x(!0),o({id:"generic.biometrics-register",defaultMessage:"Register Biometrics"});const f=new W.A;try{const d=yield f.create();if(!d){x(!1);return}S(1),o({id:"generic.biometrics-verifying",defaultMessage:"Verifying Biometrics"}),(yield f.verify({credential:d.credential,password:d.password}))&&(S(2),yield F.YW.emit(V.A.GENERATE_PASSKEY_VAULT,{password:d.password,payload:i.password}),e({event:I.BQ.BIOMETRICS_SET,props:{pageViewSource:I.Un.ONBOARDING_WELCOME}}),S(3),o({id:"generic.biometrics-redirecting",defaultMessage:"Redirecting"}),yield(0,Q.yy)(2e3),t(K.s.actions.setPasskeyId(d.credentialId)),g(j.b.DEFAULT))}catch(d){o(null),G.A.error(d),x(!1)}});return(0,n.jsxs)(N.Q,{heading:r({id:"setup-biometrics.heading",defaultMessage:"Biometric authentication"}),subHeading:r({id:"setup-biometrics.subheading",defaultMessage:"A secure and simple way to unlock your wallet"}),animation:(0,n.jsx)(Y.P,{width:120,height:120}),activeTab:2,children:[l&&(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2 justify-center p-4 text-left",children:[(0,n.jsx)("div",{className:"items-start",children:(0,n.jsx)(O.S,{onChange:()=>{},checked:y>=1,children:(0,n.jsx)(A.E,{theme:y>=1?v.Il.PRIMARY_DEFAULT:v.Il.UTILITY_1_OPACITY_2,children:r({id:"generic.biometrics-register",defaultMessage:"Register Biometrics"})})})}),(0,n.jsx)("div",{className:"items-start",children:(0,n.jsx)(O.S,{onChange:()=>{},checked:y>=2,children:(0,n.jsx)(A.E,{theme:y>=2?v.Il.PRIMARY_DEFAULT:v.Il.UTILITY_1_OPACITY_2,children:r({id:"generic.biometrics-verify",defaultMessage:"Verify Biometrics"})})})})]})}),(0,n.jsx)("div",{className:"flex w-1/2 ml-auto mt-12",children:(0,n.jsx)(L.$,{loadingData:u?(0,n.jsx)("div",{className:"text-on-primary",children:r(u)}):null,type:p.II.BUTTON,theme:p.ry.PRIMARY,loading:l,onClick:ss,children:(0,n.jsxs)("div",{className:"flex gap-2 text-on-primary items-center",children:[r({id:"generic.set-up-biometrics",defaultMessage:"Set up biometrics"}),(0,n.jsx)(H.E,{})]})})})]})};var J=s(41383),X=s(12996),b=Object.defineProperty,P=Object.getOwnPropertySymbols,w=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,C=(a,t,e)=>t in a?b(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e,q=(a,t)=>{for(var e in t||(t={}))w.call(t,e)&&C(a,e,t[e]);if(P)for(var e of P(t))k.call(t,e)&&C(a,e,t[e]);return a};const _=()=>{const a=(0,X.F)(),[t,e]=(0,c.useState)(a?h.jK.SET_BIOMETRICS:h.jK.AUTHENTICATION),r=q({[h.jK.SET_BIOMETRICS]:z},J.globalSteps)[t];return(0,n.jsx)(r,{setCurrentStep:e})}})}]);
