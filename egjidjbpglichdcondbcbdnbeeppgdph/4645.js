"use strict";(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[4645],{17045:((at,$,t)=>{t.d($,{I:()=>Gt});var e=t(74848),y=t(47767),s=t(92926),m=t(52651),F=t(29584),R=t(26264),K=t(63369),G=t(3367),J=t(65512),V=t(65504),O=t(16665),lt=t(55418),P=t(4800),_=t(68632),g=t(79830),D=t(69254),w=t(52114),Y=t(1279),tt=t(64145),k=t(14948),b=t(26858),ot=t(47996),vt=t(79334),U=t(66392),et=t(65828),M=t(79960),B=t(3280),l=t(21094),gt=t(15192),jt=t(2543),X=t(96540),St=t(6442),ft=t(41411),st=t(27409),S=t(71431),I=t(75485),n=t(68157),a=t(89419),h=t(20549),N=Object.defineProperty,C=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable,E=(d,p,c)=>p in d?N(d,p,{enumerable:!0,configurable:!0,writable:!0,value:c}):d[p]=c,z=(d,p)=>{for(var c in p||(p={}))o.call(p,c)&&E(d,c,p[c]);if(C)for(var c of C(p))L.call(p,c)&&E(d,c,p[c]);return d},q=(d,p,c)=>new Promise((nt,H)=>{var x=v=>{try{W(c.next(v))}catch(Z){H(Z)}},r=v=>{try{W(c.throw(v))}catch(Z){H(Z)}},W=v=>v.done?nt(v.value):Promise.resolve(v.value).then(x,r);W((c=c.apply(d,p)).next())});const It="60",$t=({assetId:d})=>{var p,c,nt,H,x,r,W;const{formatMessage:v}=(0,St.A)(),Z=(0,y.Zp)(),ut=(0,B.p)(),u=(0,X.useContext)(G.o),Q=(0,b.Mr)(d);if(!Q)throw new Error(`Could not find asset for assetId "${d}"`);(0,K.K)({event:F.Un.SEND_PREPARE_CRYPTO,props:null});const xt=(0,ot.o)(Q.blockchainId),Et=(0,vt.P)(Q.blockchainId),i=(0,n.GV)(f=>f.sdkFeatures.prepareSend),Tt=(0,n.GV)(f=>f.sdkFeatures.prepareSendResolvedAddress),Wt=(0,n.GV)(f=>f.sdkFeatures.prepareSendResolvingAddress),[_t,bt]=(0,X.useState)((p=u.address)!=null?p:""),[Xt,pt]=(0,X.useState)((c=u.amount)!=null?c:""),[Kt,yt]=(0,X.useState)((nt=u.memoOrTag)!=null?nt:""),[zt,Qt]=(0,X.useState)(!1),[te,Ft]=(0,X.useState)(!1),[A,dt]=(0,X.useState)(!1),rt=Et||xt,Pt=!!((H=u.inscriptions)!=null&&H.length),Nt=(0,M.t)(),Ot=(0,et.Z)(Q.assetId),{blockchainSupports7702:Bt,isLoadingSupports7702:j}=(0,h.O)(rt.id),ae=(0,X.useMemo)(()=>{var f,mt,Ct;return{memo:i?.meta,asset:Q,network:rt,amount:(mt=Pt?(f=i?.inscriptionsData)==null?void 0:f.amount:i?.amount)!=null?mt:"",to:(Ct=i?.address)!=null?Ct:"",inscriptions:u.inscriptions,type:U.w.Send,isMax:(0,gt.z)(Xt||"0").eq(Ot??0),supports7702:Bt}},[i?.amount,Q,rt,u.inscriptions,i?.address,i?.meta,Xt,Ot,Bt]);(0,X.useEffect)(()=>{function f(){return q(this,null,function*(){var mt,Ct,Jt;const ve=[{property:s.z.amount,value:(mt=u.amount)!=null?mt:""},{property:s.z.meta,value:(Ct=u.memoOrTag)!=null?Ct:""},{property:s.z.recipient,value:(Jt=u.address)!=null?Jt:""}].filter(kt=>!!kt.value),wt={action:s.e.INITIATE,params:z({crypto:{asset:Q},initialState:ve},u.inscriptions&&{inscriptions:{inscriptions:u.inscriptions,amount:u.amount}})};yield tt.YW.emit(k.A.PREPARE_SEND,wt)})}Nt[d]&&!te&&(f(),Ft(!0))},[Nt]),(0,X.useEffect)(()=>{var f;zt&&(pt((f=i?.amount)!=null?f:Xt),Qt(!1))},[i?.amount]);const Ut=(0,jt.debounce)((f,mt)=>{tt.YW.emit(k.A.PREPARE_SEND,{action:s.e.UPDATE,params:{property:f,value:mt}})},200),Lt=f=>{bt(f),n.M_.dispatch(a.T.actions.clearPrepareSendResolvedAddress()),n.M_.dispatch(a.T.actions.clearPrepareSendAddressError()),Ut(s.z.recipient,f)},Mt=f=>{yt(f),Ut(s.z.meta,f)},re=f=>{isNaN(Number(f))||f.startsWith("0x")||(pt(f),Ut(s.z.amount,f))},ee=()=>{Qt(!0),tt.YW.emit(k.A.PREPARE_SEND,{action:s.e.UPDATE,params:{property:s.z.maxAmount}})},ce=()=>{dt(!0)},se=f=>q(null,null,function*(){dt(!1),f?.address&&(Lt(f.address),yield new Promise(mt=>setTimeout(mt,200)),Mt(f.memo||Kt||""))}),ne=(0,X.useMemo)(()=>{var f,mt;return Object.values((f=i?.metaType)!=null?f:{}).includes("Memo")||Object.values((mt=i?.metaType)!=null?mt:{}).includes("Object")},[i]),Dt=(0,X.useMemo)(()=>{var f;return Object.values((f=i?.metaType)!=null?f:{}).includes("Tag")},[i]),le=(Wt||i?.isLoadingLookup)&&!Tt&&i?.addressError===null;return i?.isLoading||!Nt[d]||j?(0,e.jsx)(lt.o,{children:(0,e.jsx)(g.y,{size:_.Y.XLARGE})}):(0,e.jsxs)(P.LN,{children:[(0,e.jsx)(P.zY,{backAction:()=>Z(-1),title:v({id:"send.title"},{assetSymbol:Q.symbol})}),(0,e.jsxs)(P.Gv,{children:[(0,e.jsxs)(P.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(V.q,{src:Q.iconUrl,name:Q.name,network:Q.address?rt:void 0,size:_.Y.MEDIUM})}),(0,e.jsx)(w.E,{type:Y.jK.BODY_14,theme:Y.Il.UTILITY_1_OPACITY_1,children:v({id:"generic.on-network"},{networkName:(x=rt.displayName)!=null?x:rt.name})})]}),(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(O.S,{testid:"input-recipient",label:v({id:"input-address.address.label"}),value:_t||"",onChange:f=>Lt(f.target.value),placeholder:v({id:"input-address.address.placeholder"}),actions:[{key:"address-input-action-address-book",placeholder:(0,e.jsx)(st.X,{width:20,height:20}),onClick:ce}],validation:(0,ft.D)(i?.addressError),autoFocus:!0,isLoading:le,specialSubtitle:Tt?(0,e.jsxs)("div",{className:"px-3 py-2 bg-backgroundSecondary rounded-xl",children:[(0,e.jsxs)(w.E,{type:Y.jK.CAPTION_12,theme:Y.Il.UTILITY_1_OPACITY_2,children:[v({id:"send.destination-address"}),":"]}),(0,e.jsx)("div",{className:"break-all mt-0.5",children:(0,e.jsx)(w.E,{type:Y.jK.CAPTION_12,theme:Y.Il.UTILITY_1_OPACITY_2,children:Tt.resolvedAddress})})]}):void 0})}),!Pt&&(0,e.jsxs)(e.Fragment,{children:[(ne||Dt)&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(O.S,{testid:"input-memo-tag",label:v(ne?{id:"input-memo.memo.label"}:{id:"input-tag.tag.label"}),value:Kt,onChange:f=>Mt(f.target.value),placeholder:v(ne?{id:"input-memo.memo.placeholder"}:{id:"input-tag.tag.placeholder"}),validation:Dt?(0,ft.D)(i?.metaError):void 0})}),(0,e.jsxs)("div",{className:"pb-4",children:[(0,e.jsx)(O.S,{testid:"input-amount",label:v({id:"input-amount.amount.label"}),value:Xt,onlyPositive:!0,onChange:f=>re(f.target.value),placeholder:v({id:"input-amount.amount.placeholder"}),validation:(0,ft.D)(i?.amountError),actions:[{key:"1",placeholder:(0,e.jsx)(w.E,{theme:Y.Il.PRIMARY_DEFAULT,type:Y.jK.SUBHEADER_14,children:"MAX"}),onClick:()=>ee()}]}),(0,e.jsxs)("div",{className:"flex space-x-1",children:[(0,e.jsxs)(w.E,{weight:Y.nG.NORMAL,type:Y.jK.CAPTION_12,theme:Y.Il.UTILITY_1_OPACITY_1,children:[v({id:"send.balance"}),":"]}),(0,e.jsx)(D.h,{testid:"account-balance",weight:Y.nG.NORMAL,textType:Y.jK.CAPTION_12,theme:Y.Il.UTILITY_1_OPACITY_1,amountType:l.Cu.CRYPTO,value:Ot,currency:Q.symbol,maxSignificantDecimals:10})]}),!!Number((r=Nt[Q.assetId])==null?void 0:r.dust)&&(0,e.jsxs)("div",{className:"flex space-x-1",children:[(0,e.jsxs)(w.E,{weight:Y.nG.NORMAL,type:Y.jK.CAPTION_12,theme:Y.Il.UTILITY_1_OPACITY_1,children:[v({id:"send.dust-balance"}),":"]}),(0,e.jsx)(D.h,{weight:Y.nG.NORMAL,textType:Y.jK.CAPTION_12,theme:Y.Il.UTILITY_1_OPACITY_1,amountType:l.Cu.CRYPTO,value:(W=Nt[Q.assetId])==null?void 0:W.dust,currency:Q.symbol,maxSignificantDecimals:10})]})]})]})]}),ut&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(m.e,{blockchainName:rt.name})}),(0,e.jsx)(J.$,{testid:"button-prepare-send-tx",disabled:!i?.isNextEnabled||le,onClick:()=>Z(R.b.SEND_CONFIRM,{state:ae}),children:v({id:"generic.preview"})})]}),A&&(0,e.jsx)(S.F,{isOpened:A,coinId:rt.isCustom?It:(0,I.X2)(Q.assetId),onClose:se})]})};var Vt=t(65818),Ht=t(46707),At=(d,p,c)=>new Promise((nt,H)=>{var x=v=>{try{W(c.next(v))}catch(Z){H(Z)}},r=v=>{try{W(c.throw(v))}catch(Z){H(Z)}},W=v=>v.done?nt(v.value):Promise.resolve(v.value).then(x,r);W((c=c.apply(d,p)).next())});const Zt=({collectionId:d,nftId:p})=>{var c,nt,H;const{formatMessage:x}=(0,St.A)(),r=(0,y.Zp)(),W=(0,B.p)(),v=(0,X.useContext)(G.o),Z=(0,Vt.Q)(d);if(!Z)throw new Error(`Could not find collection for collectionId "${d}"`);const ut=(0,Ht.j)(d,p),u=(0,n.GV)(A=>A.sdkFeatures.prepareSend);if(!ut)throw new Error("NFT Id is missing.");(0,K.K)({event:F.Un.SEND_PREPARE_NFT,props:null});const[Q,xt]=(0,X.useState)((c=v.address)!=null?c:""),[Et,i]=(0,X.useState)((nt=v.memoOrTag)!=null?nt:""),[Tt,Wt]=(0,X.useState)((H=v.amount)!=null?H:""),[_t,bt]=(0,X.useState)(!1),Xt=(0,X.useMemo)(()=>{var A,dt,rt;return{memo:(A=u?.meta)!=null?A:void 0,network:Z.blockchain,to:(dt=u?.address)!=null?dt:"",amount:(rt=u?.amount)!=null?rt:"",collection:Z,nft:ut}},[Et,Z.blockchain,Q]);(0,X.useEffect)(()=>{function A(){return At(this,null,function*(){var dt,rt,Pt;const Nt=[{property:s.z.amount,value:(dt=v.amount)!=null?dt:""},{property:s.z.meta,value:(rt=v.memoOrTag)!=null?rt:""},{property:s.z.recipient,value:(Pt=v.address)!=null?Pt:""}].filter(Bt=>!!Bt.value),Ot={action:s.e.INITIATE,params:{nft:{nft:ut,blockchain:Z.blockchain},initialState:Nt}};yield tt.YW.emit(k.A.PREPARE_SEND,Ot)})}A()},[]),(0,X.useEffect)(()=>{var A;_t&&(Wt((A=u?.amount)!=null?A:Tt),bt(!1))},[u?.amount]);const pt=(0,jt.debounce)((A,dt)=>{tt.YW.emit(k.A.PREPARE_SEND,{action:s.e.UPDATE,params:{property:A,value:dt}})},200),Kt=A=>{xt(A),pt(s.z.recipient,A)},yt=A=>{Wt(A),pt(s.z.amount,A)},zt=A=>{i(A),pt(s.z.meta,A)},Qt=()=>{bt(!0),tt.YW.emit(k.A.PREPARE_SEND,{action:s.e.UPDATE,params:{property:s.z.maxAmount}})},te=(0,X.useMemo)(()=>{var A,dt;return Object.values((A=u?.metaType)!=null?A:{}).includes("Memo")||Object.values((dt=u?.metaType)!=null?dt:{}).includes("Object")},[u]),Ft=A=>({isValid:!A,error:A});return(0,e.jsxs)(P.LN,{children:[(0,e.jsx)(P.zY,{backAction:()=>r(-1),title:x({id:"send.title"},{assetSymbol:`${Z.name} #${ut.onChainId} `})}),(0,e.jsxs)(P.Gv,{children:[(0,e.jsxs)(P.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(V.q,{src:ut.previewImageURL.url,name:Z.blockchain.name,network:Z.blockchain,size:_.Y.XLARGE})}),(0,e.jsx)(w.E,{type:Y.jK.SUBTITLE,theme:Y.Il.SECONDARY,children:x({id:"generic.on-network"},{networkName:Z.blockchain.name})})]}),(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(O.S,{label:x({id:"input-address.address.label"}),value:Q,onChange:A=>Kt(A.target.value),placeholder:x({id:"input-address.address.placeholder"}),validation:Ft(u?.addressError),autoFocus:!0})}),te&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(O.S,{label:x({id:"input-memo.memo.label"}),value:Et,onChange:A=>zt(A.target.value),placeholder:x({id:"input-memo.memo.placeholder"})})}),u?.showAmount&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(O.S,{label:x({id:"input-amount.amount.label"}),value:Tt,onChange:A=>yt(A.target.value),placeholder:x({id:"input-amount.amount.placeholder"}),validation:Ft(u?.amountError),actions:[{key:"1",placeholder:(0,e.jsx)(w.E,{theme:Y.Il.BRAND,children:"MAX"}),onClick:()=>Qt()}]})})]}),W&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(m.e,{blockchainName:Z.blockchain.name})}),(0,e.jsx)(J.$,{disabled:!u?.isNextEnabled,onClick:()=>r(R.b.SEND_CONFIRM,{state:Xt}),children:x({id:"generic.preview"})})]})]})};var Rt=t(59754);const Gt=()=>{const{collectionId:d,nftId:p,assetId:c}=(0,y.g)(),nt=()=>{tt.YW.emit(k.A.PREPARE_SEND,{action:s.e.CLOSE})};return(0,Rt.A)(nt),c?(0,e.jsx)($t,{assetId:c}):d&&p?(0,e.jsx)(Zt,{collectionId:d,nftId:p}):null}}),24645:((at,$,t)=>{t.a(at,async(e,y)=>{try{t.r($),t.d($,{App:()=>U,default:()=>et});var s=t(74848),m=t(47767),F=t(96540),R=t.n(F),K=t(3367),G=t(40793),J=t(17045),V=t(33400),O=t(53764),lt=t(27431),P=e([G]);G=(P.then?(await P)():P)[0];var _=Object.defineProperty,g=Object.defineProperties,D=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,Y=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable,k=(M,B,l)=>B in M?_(M,B,{enumerable:!0,configurable:!0,writable:!0,value:l}):M[B]=l,b=(M,B)=>{for(var l in B||(B={}))Y.call(B,l)&&k(M,l,B[l]);if(w)for(var l of w(B))tt.call(B,l)&&k(M,l,B[l]);return M},ot=(M,B)=>g(M,D(B));const vt=()=>{const M=gt=>{l(jt=>b(b({},jt),gt))},[B,l]=(0,F.useState)({setContext:M});return(0,s.jsx)(K.o.Provider,{value:ot(b({},B),{setContext:M}),children:(0,s.jsx)(m.sv,{})})},U=()=>(0,s.jsxs)(m.BV,{children:[(0,s.jsx)(m.qh,{index:!0,element:(0,s.jsx)(V.V,{})}),(0,s.jsxs)(m.qh,{element:(0,s.jsx)(vt,{}),children:[(0,s.jsx)(m.qh,{path:"/:assetId",element:(0,s.jsx)(J.I,{})}),(0,s.jsx)(m.qh,{path:"/:collectionId/:nftId",element:(0,s.jsx)(J.I,{})}),(0,s.jsx)(m.qh,{path:"/:assetId/inscriptions",element:(0,s.jsx)(O.W,{})}),(0,s.jsx)(m.qh,{path:"/:assetId/inscribe",element:(0,s.jsx)(lt.u,{})}),(0,s.jsx)(m.qh,{path:"/confirm",element:(0,s.jsx)(G.p,{})})]})]}),et=U;y()}catch(vt){y(vt)}})}),26963:((at,$,t)=>{t.d($,{Z:()=>K});var e=t(74848),y=t(65504),s=t(68632),m=t(52114),F=t(1279),R=t(6442);const K=({nft:G,network:J})=>{const{formatMessage:V}=(0,R.A)(),O=G.name.length?G.name:`${G.collectionName} #${G.onChainId}`;return(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("div",{children:(0,e.jsx)(y.q,{src:G.previewImageURL.url,name:O,network:J,size:s.Y.LARGE})}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)(m.E,{type:F.jK.HEADER_18,children:O}),(0,e.jsxs)(m.E,{type:F.jK.SUBHEADER_14,theme:F.Il.UTILITY_1_OPACITY_1,children:[V({id:"generic.send"})," NFT"]})]})]})}}),27431:((at,$,t)=>{t.d($,{u:()=>st});var e=t(74848),y=t(52651),s=t(26264),m=t(15192),F=t(96540),R=t(6442),K=Object.defineProperty,G=Object.defineProperties,J=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,O=Object.prototype.hasOwnProperty,lt=Object.prototype.propertyIsEnumerable,P=(S,I,n)=>I in S?K(S,I,{enumerable:!0,configurable:!0,writable:!0,value:n}):S[I]=n,_=(S,I)=>{for(var n in I||(I={}))O.call(I,n)&&P(S,n,I[n]);if(V)for(var n of V(I))lt.call(I,n)&&P(S,n,I[n]);return S},g=(S,I)=>G(S,J(I));const D=({value:S,decimals:I,minimum:n,maximum:a,minimumThreshold:h,minimumThresholdWarning:N})=>{const C={number:!1,decimals:!1,minimum:!1,maximum:!1,minimumThreshold:!1,minimumThresholdWarning:null};if(!S||S==="0")return g(_({},C),{isValid:!1});try{const o=(0,m.A)(S);C.number=!0,C.minimum=n?o.gte((0,m.A)(n)):!0,C.maximum=a?o.lte((0,m.A)(a)):!0;const L=S.indexOf("."),E=L!==-1?S.substring(L+1):void 0;if(C.decimals=E&&typeof I=="number"?E.length<=I:!0,N&&N.value!=="0"&&a){const z=(0,m.A)(a),q=(0,m.A)(N.value);C.minimumThresholdWarning=z.gt(0)&&z.gte(o)&&z.minus(o).lt(q)?N.message:null}else C.minimumThresholdWarning=null;if(h&&h!=="0"&&a){const z=(0,m.A)(a),q=(0,m.A)(h);C.minimumThreshold=o.lte(z)&&z.minus(o).gte(q)}else C.minimumThreshold=!0}catch{}finally{return g(_({},C),{isValid:Object.entries(C).every(([o,L])=>o==="minimumThresholdWarning"||!!L)})}},w=({value:S,asset:I,decimals:n,minimum:a,maximum:h,minimumThreshold:N,minimumThresholdWarning:C})=>{const{formatMessage:o}=(0,R.A)(),[L,E]=(0,F.useState)({isValid:!1,number:!1,decimals:!1,minimum:!1,maximum:!1,minimumThreshold:!1,minimumThresholdWarning:null});(0,F.useEffect)(()=>{E(_({},D({value:S,asset:I,decimals:n,minimum:a,maximum:h,minimumThreshold:N,minimumThresholdWarning:C})))},[S,I,n,a,h]);const z=(0,F.useMemo)(()=>{if(!L.number)return o({id:"validate-amount.generic"});if(!L.decimals)return o({id:"validate-amount.decimals"},{number:n});if(!L.minimum)return o({id:"validate-amount.minimum"},{number:a});if(!L.maximum)return o({id:"validate-amount.maximum"},{asset:I.symbol});if(!L.minimumThreshold)return o({id:"validate-amount.minimum-threshold"},{number:N,asset:I.symbol});if(L.minimumThresholdWarning)return o({id:L.minimumThresholdWarning})},[o,L,I,n,a]);return{isValid:L.isValid,error:z}};var Y=t(65512),tt=t(65504),k=t(16665),b=t(4800),ot=t(68632),vt=t(69254),U=t(52114),et=t(1279),M=t(26858),B=t(47996),l=t(66392),gt=t(40790),jt=t(7707),X=t(3280),St=t(21094),ft=t(47767);const st=()=>{const{assetId:S}=(0,ft.g)(),I=(0,ft.Zp)(),{formatMessage:n}=(0,R.A)();if(!S)throw new Error(`Asset Id "${S}" is invalid.`);const a=(0,M.Mr)(S);if(!a)throw new Error(`Could not find asset for assetId "${S}"`);const h=(0,B.o)(a.blockchainId),N=(0,jt.A)(a.assetId),C=(0,gt.F7)(h.coinId),o=(0,X.p)(),[L,E]=(0,F.useState)(""),z=w({value:L,asset:a,decimals:a.decimals,maximum:N,minimumThreshold:"0"}),q=(0,F.useMemo)(()=>({asset:a,network:h,amount:L,to:C.address,type:l.w.Inscribe}),[a,h,L]);return(0,e.jsxs)(b.LN,{children:[(0,e.jsx)(b.zY,{title:`${n({id:"generic.inscribe"})} ${a.symbol}`,backAction:()=>I(-1)}),(0,e.jsxs)(b.Gv,{children:[(0,e.jsxs)(b.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(tt.q,{src:a.iconUrl,name:a.name,network:a.address?h:void 0,size:ot.Y.LARGE})}),(0,e.jsx)(U.E,{type:et.jK.SUBTITLE,theme:et.Il.SECONDARY,children:n({id:"generic.on-network"},{networkName:h.name})})]}),(0,e.jsxs)("div",{className:"pb-4",children:[(0,e.jsx)(k.S,{testid:"input-amount",label:n({id:"input-amount.amount.label"}),value:L,onChange:It=>E(It.target.value),placeholder:n({id:"input-amount.amount.placeholder"}),validation:z,actions:[{key:"max",placeholder:(0,e.jsx)(U.E,{theme:et.Il.BRAND,children:"MAX"}),disabled:N==="0",onClick:()=>E(N)}]}),(0,e.jsxs)("div",{className:"flex space-x-1",children:[(0,e.jsxs)(U.E,{weight:et.nG.NORMAL,type:et.jK.SUBTITLE,theme:et.Il.SECONDARY,children:[n({id:"generic.available-balance"}),":"]}),(0,e.jsx)(vt.h,{testid:"inscribe-balance",weight:et.nG.NORMAL,textType:et.jK.SUBTITLE,theme:et.Il.SECONDARY,amountType:St.Cu.CRYPTO,value:N,currency:a.symbol,maxSignificantDecimals:10})]})]})]}),o&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(y.e,{blockchainName:h.name})}),(0,e.jsx)(Y.$,{testid:"button-prepare-inscribe-tx",disabled:!z.isValid,onClick:()=>I(s.b.SEND_CONFIRM,{state:q}),children:n({id:"generic.continue"})})]})]})}}),31902:((at,$,t)=>{t.d($,{P:()=>y});var e=t(79960);function y(s){var m;return((m=(0,e.t)()[s])==null?void 0:m.transferable)||"0"}}),33400:((at,$,t)=>{t.d($,{V:()=>g});var e=t(74848),y=t(96919),s=t(29584),m=t(26264),F=t(63369),R=t(3330),K=t(8360),G=t(4800),J=t(29189),V=t(96471),O=t(96540),lt=t.n(O),P=t(6442),_=t(47767);const g=()=>{(0,F.K)({event:s.Un.SEND_SELECT_CRYPTO,props:null});const{formatMessage:D}=(0,P.A)(),w=(0,_.Zp)(),[Y,tt]=(0,O.useState)(""),k=(0,J.f)(),[b,ot]=(0,O.useState)(k??void 0),vt=U=>{w(`${m.b.SEND}/${U.assetId}${U.type===V.S.BRC20?"/inscriptions":""}`)};return(0,e.jsxs)(G.LN,{children:[(0,e.jsx)(G.zY,{backAction:()=>w(-1),title:D({id:"select-asset.send.title",defaultMessage:"Select asset to send"})}),(0,e.jsxs)(G.Gv,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-4 mb-4",children:[(0,e.jsx)(K.D,{testid:"input-search-asset",value:Y,onChange:U=>tt(U.target.value),placeholder:D({id:"component.input-asset-search.placeholder"})}),(0,e.jsx)(R.u,{showText:!0,localFilteringBlockchainId:b,onFilterChange:U=>ot(U??void 0)})]}),(0,e.jsx)(G.LO,{children:(0,e.jsx)(y.U,{searchQuery:Y,excludedBlockchainId:"binance",targetBlockchainId:b,onAssetRowClick:vt,emptyMessage:D({id:"token-asset-list.empty-search-caption"}),showNetworkName:!0,alwaysShowAllAssets:!0})})]})]})}}),36631:((at,$,t)=>{t.a(at,async(e,y)=>{try{t.d($,{w:()=>nt});var s=t(74848),m=t(47767),F=t(56383),R=t(8192),K=t(9526),G=t(26264),J=t(5360),V=t(3367),O=t(37167),lt=t(46191),P=t(26963),_=t(4800),g=t(64145),D=t(22670),w=t(72722),Y=t(5027),tt=t(40790),k=t(79960),b=t(3280),ot=t(33055),vt=t(26113),U=t(28105),et=t(93155),M=t(15192),B=t(37457),l=t(96540),gt=t.n(l),jt=t(6442),X=t(606),St=t(75485),ft=t(65047),st=t(63369),S=t(29584),I=t(66392),n=t(23207),a=t(8986),h=t(9389),N=t(20549),C=t(72213),o=t(26858),L=t(7707),E=t(21025),z=t(23184),q=t(52178),It=e([U]);U=(It.then?(await It)():It)[0];var $t=Object.defineProperty,Vt=Object.defineProperties,Ht=Object.getOwnPropertyDescriptors,At=Object.getOwnPropertySymbols,Zt=Object.prototype.hasOwnProperty,Rt=Object.prototype.propertyIsEnumerable,Gt=(H,x,r)=>x in H?$t(H,x,{enumerable:!0,configurable:!0,writable:!0,value:r}):H[x]=r,d=(H,x)=>{for(var r in x||(x={}))Zt.call(x,r)&&Gt(H,r,x[r]);if(At)for(var r of At(x))Rt.call(x,r)&&Gt(H,r,x[r]);return H},p=(H,x)=>Vt(H,Ht(x)),c=(H,x,r)=>new Promise((W,v)=>{var Z=Q=>{try{u(r.next(Q))}catch(xt){v(xt)}},ut=Q=>{try{u(r.throw(Q))}catch(xt){v(xt)}},u=Q=>Q.done?W(Q.value):Promise.resolve(Q.value).then(Z,ut);u((r=r.apply(H,x)).next())});const nt=({state:{collection:H,nft:x,network:r,to:W,memo:v,amount:Z}})=>{(0,st.K)({event:S.Un.SEND_CONFIRM_NFT,props:null});const ut=(0,k.t)(),{trackAnalytics:u}=(0,n.s)(),{isLoadingSupports7702:Q,blockchainSupports7702:xt}=(0,N.O)(r.id),Et=(0,St.Gc)({coinId:r.coinId}),i=(0,a.O)(r),Tt=(0,tt.F7)(r.coinId),[Wt,_t]=(0,l.useState)(!1),[bt,Xt]=(0,l.useState)(!0),[pt,Kt]=(0,l.useState)(!1);if(!Tt)throw new Error(`Account for ${r.coinId} not found`);if(!i)throw new Error(`Could not find native asset for chain ID "${r.chainId}".`);const{formatMessage:yt}=(0,jt.A)(),zt=(0,m.Zp)(),Qt=(0,l.useContext)(V.o),te=(0,b.p)(),{isCustomNonceEnabled:Ft}=(0,Y.j)(),[A,dt]=(0,l.useState)(!1),[rt,Pt]=(0,l.useState)(!1),Nt=(0,X.C)(),[Ot,Bt]=(0,l.useState)(!1),[j,ae]=(0,l.useState)(null),[Ut,Lt]=(0,l.useState)(null),[Mt,re]=(0,l.useState)(null),[ee,ce]=(0,l.useState)(null),[se,ne]=(0,l.useState)(null),[Dt,le]=(0,l.useState)(null),[f,mt]=(0,l.useState)(),[Ct,Jt]=(0,l.useState)(!1),[ve,wt]=(0,l.useState)(!1),[kt,xe]=(0,l.useState)({originalNonce:0,editedNonce:""}),[Ye,Ge]=(0,l.useState)(ft.q.DEFAULT),{setShowLedgerConfirmationHint:be,handleLedgerError:ue,LedgerConnectionErrorModal:ze}=(0,J.U)(),je=(0,ot.A)(),ye=(0,h.YL)(),[oe,Le]=(0,l.useState)(i.assetId),Yt=(0,o.Mr)(oe),Ne=(0,L.A)(Yt.assetId),[qt,ge]=(0,l.useState)(!1),ie=(0,l.useMemo)(()=>Yt?.assetId!==i.assetId&&xt,[Yt,i,xt]),{quotes7702:$e,initialLoading7702FeeQuotes:Ve,refetch7702FeeQuotes:He}=(0,z.t)(j,ie),de=(0,l.useMemo)(()=>p(d(d(d(d(d({memo:v,from:Tt.address,to:W,value:Z??"1",internal:{type:"send",isMax:!1,asset:{decimals:0,address:x.contractAddress,assetId:Et,nft:x}},network:r},Mt&&{gasLimit:Mt}),ee&&{gasPrice:ee}),se&&{maxPriorityFeePerGas:se}),Dt&&{maxFeePerGas:Dt}),Nt?.estimatedBaseFee&&{baseFee:(0,M.A)(Nt.estimatedBaseFee).pow(i.decimals).toFixed(0)}),{feeAsset:ie?Yt:i,feeIs7702:ie}),[Tt.address,Mt,ee,Dt,se,v,r,W,ie,Yt,i]),Ze=(0,l.useCallback)(()=>Jt(!Ct),[Ct]),Se=()=>{Pt(T=>!T)},Re=(0,l.useCallback)(({customGasLimit:T,customGasPrice:it,customMaxPriorityFeePerGas:ht,customMaxFeePerGas:ct,minGasFeesAcceptable:fe},Ce)=>{T&&re(T),it&&ce(it),ht&&ne(ht),ct&&le(ct),fe&&mt(fe),Ce&&Ge(Ce),Jt(!1)},[]),Ie=(0,l.useCallback)(()=>{const{editedNonce:T}=kt,it=T&&Number(T)>=0,ht=!T?.includes(".")&&!T?.includes(",");return!!it&&ht},[kt]),Ae=(0,l.useCallback)(()=>c(null,null,function*(){dt(!0),Lt(null);try{const T=yield g.YW.emit(D.A.STAGE_TRANSACTION,de);ae(T),Ft&&xe(it=>({originalNonce:parseInt(T.nonce),editedNonce:it.editedNonce||String(parseInt(T.nonce))}))}catch(T){if(T.message==="RecipientTokenNotRegisteredError"){Lt(yt({id:"send.confirm.recipient-not-registered-token"}));return}else if(T.message==="TransferCallerNotOwnerNorApproved"){Lt(yt({id:"send.confirm.recipient-not-owner-nor-approved"}));return}et.A.error(T),Lt(yt({id:"send.confirm.validation.generic"}))}finally{dt(!1)}}),[de,yt,Ft]),me=(0,l.useMemo)(()=>{if(!j)return{isValid:!0};const T=(0,E.QA)(Ne,Yt.decimals).gte((0,E.QA)(j.formattedFee,Yt.decimals)),it=j.feeIs7702?T:(0,M.A)(0).add(j.formattedFee).lte(ut[i.assetId].balance),ht=j.feeIs7702?Yt:i,ct=(0,q.Z)(ht,r);return{isValid:it,error:it?void 0:yt({id:"generic.insufficient-balance-for-gas"},{assetSymbol:ct})}},[ut,yt,i.assetId,i.symbol,r.symbol,j,Ne,Yt]),Te=(0,l.useMemo)(()=>!A&&!qt&&!!j&&!Ut&&me.isValid&&(Ft&&bt?Ie():!0),[A,j,Ut,me.isValid,Ft,bt,Ie,qt]),pe=()=>{u({event:S.BQ.SEND_NFT_TRANSACTION,props:{pageViewSource:S.Un.SEND_CONFIRM_NFT,txType:I.w.Send,walletType:je.type,nftId:x.id,nftCollectionId:x.collectionId,blockchainId:r.id,nftType:x.type,txStatus:"confirmed"}})},he=T=>{u({event:S.BQ.SEND_NFT_TRANSACTION,props:{pageViewSource:S.Un.SEND_CONFIRM_NFT,txType:I.w.Send,walletType:je.type,nftId:x.id,nftCollectionId:x.collectionId,blockchainId:r.id,nftType:x.type,txStatus:"failed",txError:T}})},Xe=(0,l.useCallback)(()=>c(null,null,function*(){var T,it;const ht={to:j.to,gasLimit:parseInt(j.fee.gasLimit||j.fee.limit),nonce:parseInt(j.nonce),chainId:parseInt(j?.network.chainId),data:j.data,type:parseInt(j.type),value:j.value};ht.type===2?(ht.maxFeePerGas=B.gH.from((T=j.maxFeePerGas)!=null?T:j.fee.maxPrice),ht.maxPriorityFeePerGas=B.gH.from((it=j.maxPriorityFeePerGas)!=null?it:j.fee.minerPrice)):ht.gasPrice=parseInt(j.fee.price);try{wt(!0);const ct=yield(0,U.GF)(ht,ye.derivationIndex,j?.from);(yield g.YW.emit(D.A.BROADCAST_TRANSACTION,{signed:ct,metadata:j,blockchainId:r.id,raw:!0}))?(pe(),zt(G.b.HISTORY)):(he(""),Bt(!0))}catch(ct){ct.name==="TransportStatusError"&&ue(ct,Lt),he(ct)}finally{wt(!1)}}),[ue,zt,r.id,j,ye]),Qe=()=>{Te&&c(null,null,function*(){if(te){be(!0);try{yield Xe()}catch(T){ue(T,Lt)}return}try{if(wt(!0),!(yield g.YW.emit(D.A.COMMIT_TRANSACTION,j)))throw new Error("Transaction failed");pe(),zt(G.b.HISTORY)}catch(T){et.A.error(T),he(T),wt(!1),Bt(!0)}})},Fe=(0,l.useCallback)(()=>{Qt.address=W,Qt.amount=Z,zt(-1)},[Qt,zt,W]),Oe=j&&parseFloat(j.formattedFee)<f;return(0,l.useEffect)(()=>(c(null,null,function*(){yield g.YW.emit(w.A.START_POLL_GAS_FEES,de)}).catch(vt.Z),()=>{g.YW.emit(w.A.STOP_POLL_GAS_FEES)}),[]),(0,l.useEffect)(()=>{Ae()},[Nt,Ae]),(0,l.useEffect)(()=>{function T(){return c(this,null,function*(){const ct=yield g.YW.emit(D.A.SUPPORTS_MEMO,r.id);_t(ct)})}function it(){return c(this,null,function*(){const ct=yield g.YW.emit(D.A.SUPPORTS_NONCE,r.id);Xt(ct)})}function ht(){return c(this,null,function*(){const ct=yield g.YW.emit(D.A.SUPPORTS_CUSTOM_FEE,r);Kt(ct)})}Promise.all([T(),it(),ht()])},[r.id]),(0,l.useEffect)(()=>{var T,it;qt&&(j?.feeIs7702&&((T=j.feeAsset)==null?void 0:T.assetId)===oe||j?.feeIs7702===!1&&((it=j.feeAsset)==null?void 0:it.assetId)===oe)&&ge(!1)},[j,qt]),(0,s.jsxs)(_.LN,{children:[(0,s.jsx)(_.zY,{backAction:Fe,title:yt({id:"generic.confirm"})}),(0,s.jsxs)(_.Gv,{children:[(0,s.jsx)(P.Z,{nft:x,network:H.blockchain}),(0,s.jsx)(O.Z,{network:r,customNonce:kt,isLoading:A||Q||qt,to:W,memo:v,amount:Z,supportsMemo:Wt,undervaluedGas:Oe,prepareSendResponse:j,toggleEditFeeModal:Ze,canEditFee:pt,supportsNonce:bt,toggleEditNonceModal:Se,flexGasIsSupported:xt})]}),(0,s.jsx)(lt.w,{hideErrors:qt,blockchainName:r.name,genericError:Ut,validationBalanceError:me.error,transactionIsValid:Te,isSendingTransaction:ve,onSendTransaction:Qe,txType:I.w.Send,buttonText:yt({id:"generic.confirm"})}),j&&pt&&!xt&&(0,s.jsx)(F.G,{defaultEIP1559Speed:Ye,isOpen:Ct,onClose:()=>Jt(!1),onSave:Re,params:de,tx:j}),j&&pt&&xt&&(0,s.jsx)(C.K,{opened:Ct,onClose:()=>Jt(!1),selectedFeeAssetId:oe,quotes:$e,handleOnSave:T=>{Le(T),Jt(!1),ge(!0)},onOpen:He,isLoading:Ve}),(0,s.jsx)(K.X,{opened:Ot,onClose:()=>Bt(!1),onContinue:Fe}),Ft&&bt&&j&&(0,s.jsx)(R.j,{opened:rt,onClose:Se,customNonce:kt,setCustomNonce:xe,setTxData:ae}),(0,s.jsx)(ze,{})]})};y()}catch(nt){y(nt)}})}),37167:((at,$,t)=>{t.d($,{Z:()=>ft});var e=t(74848),y=t(55074),s=t(27883),m=t(48346),F=t(69254),R=t(86170),K=t(26858),G=t(92588),J=t(15192),V=t(96540),O=t(6442);const lt=({blockchain:st,fee:S,variant:I=s.P.DEFAULT,feeAsset:n,isLoading:a})=>{const{formatMessage:h}=(0,O.A)(),N=(0,K.NE)(st.coinId),C=(0,G.q)(n??N),{currency:o,baseCurrencyType:L}=(0,R.P)(),E=(0,V.useMemo)(()=>{var z;return(0,J.A)(S).mul((z=C?.price)!=null?z:0).toNumber()},[S,C]);return E?(0,e.jsx)(y.F,{label:h({id:"generic.total-fiat"},{currency:o}),labelInfoBox:h({id:"generic-total-fiat-info"},{currency:o}),variant:I,children:(0,e.jsx)(m.S,{widthClass:"w-22.5",heightClass:"h-4",isLoading:!E||a,children:(0,e.jsx)(F.h,{value:E,amountType:L,testid:"total-fiat-amount",currency:o})})}):null};var P=t(74576),_=t(90086),g=t(65512),D=t(52619),w=t(75321),Y=t(4800),tt=t(85239),k=t(52114),b=t(1279),ot=t(5027),vt=t(66392),U=t(40790),et=t(3280),M=t(21094),B=t(7011),l=t(41327),gt=t(94893),jt=t(68632),X=t(65504),St=t(80772);const ft=({network:st,customNonce:S,isLoading:I,to:n,memo:a,amount:h,supportsMemo:N,undervaluedGas:C,prepareSendResponse:o,toggleEditFeeModal:L,canEditFee:E,supportsNonce:z,toggleEditNonceModal:q,isRisky:It,flexGasIsSupported:$t})=>{var Vt,Ht,At,Zt,Rt,Gt;const{formatMessage:d}=(0,O.A)(),p=(0,et.p)(),{isCustomNonceEnabled:c}=(0,ot.j)(),nt=(0,U.F7)(st.coinId),H=parseInt(S.editedNonce)<S.originalNonce,{currency:x,baseCurrencyType:r}=(0,R.P)(),W=(0,K.NE)(st.coinId),v=(0,G.q)(o?.feeIs7702?o.feeAsset:W);if(!nt)throw new Error(`Account for ${st.coinId} not found`);const Z=(0,V.useMemo)(()=>{var ut,u;return(0,J.A)((ut=o?.formattedFee)!=null?ut:0).mul((u=v?.price)!=null?u:0).toNumber()},[o,v]);return(0,e.jsxs)(Y.LO,{children:[(0,e.jsx)("div",{className:"mt-4"}),(0,e.jsxs)(tt.B,{children:[(0,e.jsx)(_.q,{network:st,sender:nt.address,variant:s.P.TABLE_LIST}),(0,e.jsx)(P.C,{recipient:n,type:vt.w.Send,network:st,variant:s.P.TABLE_LIST}),N&&a&&(0,e.jsx)(y.F,{label:d({id:"input-memo.placeholder"}),variant:s.P.TABLE_LIST,children:(0,e.jsx)(k.E,{testid:"send-nft-memo-tag",children:a})}),(0,e.jsx)(y.F,{label:d({id:"generic.network"}),variant:s.P.TABLE_LIST,children:(0,e.jsx)(k.E,{testid:"network-name",children:(Vt=st.displayName)!=null?Vt:st.name})}),h&&Number(h)>1&&(0,e.jsx)(y.F,{label:d({id:"generic.amount"}),variant:s.P.TABLE_LIST,children:(0,e.jsx)(F.h,{testid:"send-token-amount",value:h,currency:"",amountType:M.Cu.CRYPTO})})]}),(0,e.jsx)("div",{className:"py-4",children:(0,e.jsxs)(tt.B,{children:[$t&&(0,e.jsx)(B.x,{}),(0,e.jsx)(y.F,{label:d({id:"generic.estimated-network-fee"}),labelTheme:C?b.Il.WARNING_1_DEFAULT:b.Il.UTILITY_1_OPACITY_1,warning:C?d({id:"send.low-gas-warning"}):null,labelInfoBox:p?d({id:"send.confirm.hardware-wallet-gas-info"}):null,variant:s.P.TABLE_LIST,children:(0,e.jsx)(gt.c,{testid:"edit-network-fee-button",currentlyUnclickable:!E,onClick:L,disabled:I,children:(0,e.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,e.jsxs)("div",{className:"flex flex-col items-end",children:[(0,e.jsx)("div",{children:(0,e.jsx)(m.S,{isLoading:I,widthClass:"w-22.5",heightClass:"h-4",children:(0,e.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,e.jsx)("div",{children:(0,e.jsx)(X.q,{src:o?.feeIs7702?(Ht=o.feeAsset)==null?void 0:Ht.iconUrl:(0,St.Bv)(st,W),name:o?.feeIs7702?(Zt=(At=o.feeAsset)==null?void 0:At.name)!=null?Zt:"":W.name,size:jt.Y.XXSMALL})}),(0,e.jsx)("div",{children:(0,e.jsx)(F.h,{theme:C?b.Il.WARNING_1_DEFAULT:b.Il.UTILITY_1_DEFAULT,weight:b.nG.MEDIUM,textType:b.jK.SUBHEADER_14,testid:"network-fee-fiat",value:Z,amountType:r,currency:x})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(m.S,{isLoading:I,marginClass:"mt-[2px]",widthClass:"w-22.5",heightClass:"h-4",children:(0,e.jsx)(F.h,{testid:"network-fee",theme:C?b.Il.WARNING_1_DEFAULT:b.Il.UTILITY_1_OPACITY_1,weight:b.nG.NORMAL,textType:b.jK.BODY_12,value:o?.formattedFee,currency:o?.feeIs7702?(Rt=o.feeAsset)==null?void 0:Rt.symbol:W.symbol,amountType:M.Cu.CRYPTO,maxSignificantDecimals:10,tinyThreshold:10})})})]}),E&&(0,e.jsx)("div",{children:(0,e.jsx)(l.v,{colorClass:C?"text-primary-default":"text-utility-1-opacity-1"})})]})})})]})}),(0,e.jsxs)(tt.B,{children:[c&&z&&(0,e.jsxs)(y.F,{labelTheme:H?b.Il.WARNING_1_DEFAULT:b.Il.UTILITY_1_OPACITY_1,label:d({id:"generic.transaction-nonce"}),warning:H?d({id:"send.nonce-warning"}):null,variant:s.P.TABLE_LIST,children:[(0,e.jsx)("div",{children:(0,e.jsx)(k.E,{theme:H?b.Il.WARNING_1_DEFAULT:b.Il.UTILITY_1_OPACITY_1,children:S.editedNonce})}),(0,e.jsx)("div",{className:"pl-1",children:(0,e.jsx)(g.$,{noPadding:!0,theme:D.ry.TRANSPARENT,onClick:q,children:(0,e.jsx)(w.R,{width:15,height:15,colorClass:H?"text-textBrand":"text-iconNormal"})})})]}),(0,e.jsx)(lt,{isLoading:I,blockchain:st,fee:parseFloat((Gt=o?.formattedFee)!=null?Gt:"0"),feeAsset:o?.feeAsset,variant:s.P.TABLE_LIST})]})]})}}),40793:((at,$,t)=>{t.a(at,async(e,y)=>{try{let lt=function(g){return g&&"asset"in g&&"amount"in g},P=function(g){return g&&"collection"in g&&"nft"in g};t.d($,{p:()=>_});var s=t(74848),m=t(26264),F=t(77711),R=t(36631),K=t(93155),G=t(96540),J=t.n(G),V=t(47767),O=e([F,R]);[F,R]=O.then?(await O)():O;const _=()=>{const{state:g}=(0,V.zy)(),D=(0,V.Zp)();return g||K.A.error(`${m.b.SEND_CONFIRM} -  "${g}" is not valid.`),(0,G.useEffect)(()=>{g||D(m.b.DEFAULT)},[]),lt(g)?(0,s.jsx)(F.w,{state:g}):P(g)?(0,s.jsx)(R.w,{state:g}):null};y()}catch(lt){y(lt)}})}),41411:((at,$,t)=>{t.d($,{D:()=>e});const e=y=>({isValid:!y,error:y??void 0})}),46707:((at,$,t)=>{t.d($,{j:()=>m});var e=t(68157),y=t(96540),s=t.n(y);const m=(F,R)=>{const K=(0,e.GV)(G=>G.nft.nfts[F].items);return(0,y.useMemo)(()=>K.find(G=>G.id===R),[K,R])}}),53764:((at,$,t)=>{t.d($,{W:()=>I});var e=t(74848),y=t(26264),s=t(78262),m=t(94893),F=t(152),R=t(65504),K=t(50784),G=t(68632),J=t(52114),V=t(1279);const O=({inscription:n,asset:a,onClick:h})=>(0,e.jsx)(F.Z,{noPadding:!0,children:(0,e.jsxs)(m.c,{onClick:()=>h(n.id),children:[(0,e.jsxs)("div",{className:"p-2",children:[(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsx)(s.k,{on:n.isSelected})}),(0,e.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-4",children:[(0,e.jsx)(R.q,{src:a.iconUrl,name:a.name,size:G.Y.XXSMALL}),(0,e.jsxs)(J.E,{children:[n.amount," ",a.symbol]})]})]}),(0,e.jsx)(K.c,{noMargin:!0}),(0,e.jsx)("div",{className:"p-2 text-center",children:(0,e.jsxs)(J.E,{type:V.jK.CAPTION,theme:V.Il.SECONDARY,children:["#",n.inscriptionNumber]})})]})});var lt=t(65512),P=t(52619),_=t(3367),g=t(4800),D=t(64145),w=t(22670),Y=t(26858),tt=t(47996),k=t(7707),b=t(31902),ot=t(96540),vt=t(6442),U=t(47767),et=t(79830),M=Object.defineProperty,B=Object.defineProperties,l=Object.getOwnPropertyDescriptors,gt=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable,St=(n,a,h)=>a in n?M(n,a,{enumerable:!0,configurable:!0,writable:!0,value:h}):n[a]=h,ft=(n,a)=>{for(var h in a||(a={}))jt.call(a,h)&&St(n,h,a[h]);if(gt)for(var h of gt(a))X.call(a,h)&&St(n,h,a[h]);return n},st=(n,a)=>B(n,l(a)),S=(n,a,h)=>new Promise((N,C)=>{var o=z=>{try{E(h.next(z))}catch(q){C(q)}},L=z=>{try{E(h.throw(z))}catch(q){C(q)}},E=z=>z.done?N(z.value):Promise.resolve(z.value).then(o,L);E((h=h.apply(n,a)).next())});const I=()=>{const{formatMessage:n}=(0,vt.A)(),a=(0,U.Zp)(),{assetId:h}=(0,U.g)(),N=(0,Y.Mr)(h);if(!N)throw new Error(`Could not find asset for assetId "${h}"`);const C=(0,ot.useContext)(_.o),o=(0,tt.o)(N.blockchainId),L=(0,k.A)(N.assetId),z=(0,b.P)(N.assetId)!=="0",[q,It]=(0,ot.useState)([]),[$t,Vt]=(0,ot.useState)(z),Ht=!$t&&!z,At=(0,ot.useMemo)(()=>q.reduce((d,p)=>p.isSelected?d+Number(p.amount):d,0),[q]),Zt=d=>{const p=q.map(c=>c.id===d?st(ft({},c),{isSelected:!c.isSelected}):c);It(p)},Rt=()=>{a(`${y.b.SEND}/${N.assetId}/inscribe`)},Gt=()=>{const d=q.filter(p=>p.isSelected).map(p=>p.id);C.setContext({address:"",amount:At.toString(),inscriptions:d}),a(`${y.b.SEND}/${N.assetId}`)};return(0,ot.useEffect)(()=>{S(null,null,function*(){if(z)try{const p=(yield D.YW.emit(w.A.FETCH_INSCRIPTIONS_BALANCE_FOR_ADDRESS,{blockchainId:o.id,address:N.address,decimals:N.decimals})).map(c=>st(ft({},c),{isSelected:C.inscriptions?C.inscriptions.includes(c.id):!1}));It(p)}finally{Vt(!1)}})},[]),(0,e.jsxs)(g.LN,{children:[(0,e.jsx)(g.zY,{backAction:()=>a(-1),title:n({id:"send.title"},{assetSymbol:N.symbol})}),(0,e.jsxs)(g.Gv,{children:[(0,e.jsxs)(g.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(R.q,{src:N.iconUrl,name:N.name,network:N.address?o:void 0,size:G.Y.LARGE})}),(0,e.jsx)(J.E,{type:V.jK.SUBTITLE,theme:V.Il.SECONDARY,children:n({id:"generic.on-network"},{networkName:o.name})}),(0,e.jsx)("div",{className:"mt-1.5",children:(0,e.jsxs)(J.E,{type:V.jK.SCREAMER,children:[At," ",N.symbol]})})]}),(0,e.jsxs)("div",{className:"flex flex-col space-y-4 mb-4",children:[(0,e.jsx)(F.Z,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)(R.q,{src:N.iconUrl,name:N.name}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)(J.E,{type:V.jK.CAPTION,theme:V.Il.SECONDARY,children:n({id:"send.non-transferable-balance"})}),(0,e.jsxs)(J.E,{type:V.jK.TITLE,children:[L," ",N.symbol]})]})]}),(0,e.jsx)("div",{children:(0,e.jsx)(lt.$,{shape:P.dB.BADGE,onClick:Rt,children:n({id:"generic.inscribe"})})})]})}),$t&&(0,e.jsx)("div",{className:"text-center",children:(0,e.jsx)(et.y,{})}),Ht&&(0,e.jsx)("div",{className:"mx-auto",children:(0,e.jsx)(J.E,{type:V.jK.CAPTION,theme:V.Il.SECONDARY,children:n({id:"generic.inscription.no-transferable-disclaimer"},{assetSymbol:N.symbol})})}),(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4 justify-between",children:q.map(d=>(0,e.jsx)(O,{inscription:d,asset:N,onClick:Zt},d.id))})]})]}),(0,e.jsx)(lt.$,{testid:"button-prepare-send-inscription",disabled:!At,onClick:Gt,children:n({id:"generic.continue"})})]})]})}}),65818:((at,$,t)=>{t.d($,{Q:()=>m});var e=t(96540),y=t.n(e),s=t(78023);const m=F=>{const R=(0,s.X)();return(0,e.useMemo)(()=>R.find(K=>K.id===F),[F,R])}}),78262:((at,$,t)=>{t.d($,{k:()=>s});var e=t(74848),y=t(57886);const s=({on:m})=>m?(0,e.jsx)(y.y,{width:16,height:16,colorClass:"text-primary"}):(0,e.jsx)("div",{className:"border-backgroundTertiary border-2 rounded-lg w-4 h-4"})}),92926:((at,$,t)=>{t.d($,{e:()=>e,z:()=>y});var e=(s=>(s.INITIATE="initiate",s.UPDATE="update",s.CLOSE="close",s))(e||{}),y=(s=>(s.recipient="recipient",s.meta="meta",s.amount="amount",s.maxAmount="maxAmount",s))(y||{})})}]);
