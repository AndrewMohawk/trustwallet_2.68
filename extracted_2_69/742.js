try{let W=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},M=new W.Error().stack;M&&(W._sentryDebugIds=W._sentryDebugIds||{},W._sentryDebugIds[M]="f87f8b7e-fbcb-4e73-956a-3e34515522d5",W._sentryDebugIdIdentifier="sentry-dbid-f87f8b7e-fbcb-4e73-956a-3e34515522d5")}catch{}{let W=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};W.SENTRY_RELEASE={id:"2.67.0"}}(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[742],{742:((W,M,n)=>{n.r(M),n.d(M,{App:()=>Ht,default:()=>yn});var e=n(74848),A=n(47767),o=n(96540),B=n(3367),D=n(26264),ae=n(8559),ve=n(56383),ze=n(8192),et=n(9526),tt=n(5360),fe=n(55074),Z=n(27883),Ue=n(48346),le=n(69254),pe=n(86170),xe=n(26858),Ie=n(92588),w=n(15192),V=n(6442);const st=({blockchain:s,fee:a,variant:t=Z.P.DEFAULT,feeAsset:i,isLoading:f})=>{const{formatMessage:m}=(0,V.A)(),I=(0,xe.NE)(s.coinId),d=(0,Ie.q)(i??I),{currency:l,baseCurrencyType:u}=(0,pe.P)(),y=(0,o.useMemo)(()=>{var c;return(0,w.A)(a).mul((c=d?.price)!=null?c:0).toNumber()},[a,d]);return y?(0,e.jsx)(fe.F,{label:m({id:"generic.total-fiat"},{currency:l}),labelInfoBox:m({id:"generic-total-fiat-info"},{currency:l}),variant:t,children:(0,e.jsx)(Ue.S,{widthClass:"w-22.5",heightClass:"h-4",isLoading:!y||f,children:(0,e.jsx)(le.h,{value:y,amountType:u,testid:"total-fiat-amount",currency:l})})}):null};var nt=n(74576),at=n(90086),Ee=n(65512),ke=n(52619),Ae=n(75321),g=n(4800),J=n(85239),N=n(52114),r=n(1279),Ce=n(5027),_=n(66392),q=n(40790),G=n(3280),ee=n(21094),$e=n(7011),oe=n(41327),ie=n(94893),te=n(68632),re=n(65504),He=n(80772);const Ye=({network:s,customNonce:a,isLoading:t,to:i,memo:f,amount:m,supportsMemo:I,undervaluedGas:d,prepareSendResponse:l,toggleEditFeeModal:u,canEditFee:y,supportsNonce:c,toggleEditNonceModal:T,isRisky:Te,flexGasIsSupported:X})=>{var v,k,$,L,S,O;const{formatMessage:F}=(0,V.A)(),je=(0,G.p)(),{isCustomNonceEnabled:se}=(0,Ce.j)(),ce=(0,q.F7)(s.coinId),Q=parseInt(a.editedNonce)<a.originalNonce,{currency:be,baseCurrencyType:ge}=(0,pe.P)(),p=(0,xe.NE)(s.coinId),R=(0,Ie.q)(l?.feeIs7702?l.feeAsset:p);if(!ce)throw new Error(`Account for ${s.coinId} not found`);const b=(0,o.useMemo)(()=>{var h,H;return(0,w.A)((h=l?.formattedFee)!=null?h:0).mul((H=R?.price)!=null?H:0).toNumber()},[l,R]);return(0,e.jsxs)(g.LO,{children:[(0,e.jsx)("div",{className:"mt-4"}),(0,e.jsxs)(J.B,{children:[(0,e.jsx)(at.q,{network:s,sender:ce.address,variant:Z.P.TABLE_LIST}),(0,e.jsx)(nt.C,{recipient:i,type:_.w.Send,network:s,variant:Z.P.TABLE_LIST}),I&&f&&(0,e.jsx)(fe.F,{label:F({id:"input-memo.placeholder"}),variant:Z.P.TABLE_LIST,children:(0,e.jsx)(N.E,{testid:"send-nft-memo-tag",children:f})}),(0,e.jsx)(fe.F,{label:F({id:"generic.network"}),variant:Z.P.TABLE_LIST,children:(0,e.jsx)(N.E,{testid:"network-name",children:(v=s.displayName)!=null?v:s.name})}),m&&Number(m)>1&&(0,e.jsx)(fe.F,{label:F({id:"generic.amount"}),variant:Z.P.TABLE_LIST,children:(0,e.jsx)(le.h,{testid:"send-token-amount",value:m,currency:"",amountType:ee.Cu.CRYPTO})})]}),(0,e.jsx)("div",{className:"py-4",children:(0,e.jsxs)(J.B,{children:[X&&(0,e.jsx)($e.x,{}),(0,e.jsx)(fe.F,{label:F({id:"generic.estimated-network-fee"}),labelTheme:d?r.Il.WARNING_1_DEFAULT:r.Il.UTILITY_1_OPACITY_1,warning:d?F({id:"send.low-gas-warning"}):null,labelInfoBox:je?F({id:"send.confirm.hardware-wallet-gas-info"}):null,variant:Z.P.TABLE_LIST,children:(0,e.jsx)(ie.c,{testid:"edit-network-fee-button",currentlyUnclickable:!y,onClick:u,disabled:t,children:(0,e.jsxs)("div",{className:"flex space-x-2 items-center",children:[(0,e.jsxs)("div",{className:"flex flex-col items-end",children:[(0,e.jsx)("div",{children:(0,e.jsx)(Ue.S,{isLoading:t,widthClass:"w-22.5",heightClass:"h-4",children:(0,e.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,e.jsx)("div",{children:(0,e.jsx)(re.q,{src:l?.feeIs7702?(k=l.feeAsset)==null?void 0:k.iconUrl:(0,He.Bv)(s,p),name:l?.feeIs7702?(L=($=l.feeAsset)==null?void 0:$.name)!=null?L:"":p.name,size:te.Y.XXSMALL})}),(0,e.jsx)("div",{children:(0,e.jsx)(le.h,{theme:d?r.Il.WARNING_1_DEFAULT:r.Il.UTILITY_1_DEFAULT,weight:r.nG.MEDIUM,textType:r.jK.SUBHEADER_14,testid:"network-fee-fiat",value:b,amountType:ge,currency:be})})]})})}),(0,e.jsx)("div",{children:(0,e.jsx)(Ue.S,{isLoading:t,marginClass:"mt-[2px]",widthClass:"w-22.5",heightClass:"h-4",children:(0,e.jsx)(le.h,{testid:"network-fee",theme:d?r.Il.WARNING_1_DEFAULT:r.Il.UTILITY_1_OPACITY_1,weight:r.nG.NORMAL,textType:r.jK.BODY_12,value:l?.formattedFee,currency:l?.feeIs7702?(S=l.feeAsset)==null?void 0:S.symbol:p.symbol,amountType:ee.Cu.CRYPTO,maxSignificantDecimals:10,tinyThreshold:10})})})]}),y&&(0,e.jsx)("div",{children:(0,e.jsx)(oe.v,{colorClass:d?"text-primary-default":"text-utility-1-opacity-1"})})]})})})]})}),(0,e.jsxs)(J.B,{children:[se&&c&&(0,e.jsxs)(fe.F,{labelTheme:Q?r.Il.WARNING_1_DEFAULT:r.Il.UTILITY_1_OPACITY_1,label:F({id:"generic.transaction-nonce"}),warning:Q?F({id:"send.nonce-warning"}):null,variant:Z.P.TABLE_LIST,children:[(0,e.jsx)("div",{children:(0,e.jsx)(N.E,{theme:Q?r.Il.WARNING_1_DEFAULT:r.Il.UTILITY_1_OPACITY_1,children:a.editedNonce})}),(0,e.jsx)("div",{className:"pl-1",children:(0,e.jsx)(Ee.$,{noPadding:!0,theme:ke.ry.TRANSPARENT,onClick:T,children:(0,e.jsx)(Ae.R,{width:15,height:15,colorClass:Q?"text-textBrand":"text-iconNormal"})})})]}),(0,e.jsx)(st,{isLoading:t,blockchain:s,fee:parseFloat((O=l?.formattedFee)!=null?O:"0"),feeAsset:l?.feeAsset,variant:Z.P.TABLE_LIST})]})]})};var Le=n(46191);const j=({nft:s,network:a})=>{const{formatMessage:t}=(0,V.A)(),i=s.name.length?s.name:`${s.collectionName} #${s.onChainId}`;return(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("div",{children:(0,e.jsx)(re.q,{src:s.previewImageURL.url,name:i,network:a,size:te.Y.LARGE})}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)(N.E,{type:r.jK.HEADER_18,children:i}),(0,e.jsxs)(N.E,{type:r.jK.SUBHEADER_14,theme:r.Il.UTILITY_1_OPACITY_1,children:[t({id:"generic.send"})," NFT"]})]})]})};var C=n(64145),he=n(22670),Xe=n(72722),jt=n(79960),ls=n(33055),os=n(26113),is=n(28105),lt=n(93155),gt=n(37457),rs=n(606),Nt=n(75485),cs=n(65047),Qe=n(63369),ye=n(29584),ds=n(23207),us=n(8986),ms=n(9389),Ct=n(20549),vs=n(72213),ot=n(7707),St=n(21025),hs=n(23184),fs=n(52178),ps=Object.defineProperty,xs=Object.defineProperties,Is=Object.getOwnPropertyDescriptors,Ot=Object.getOwnPropertySymbols,Es=Object.prototype.hasOwnProperty,As=Object.prototype.propertyIsEnumerable,Pt=(s,a,t)=>a in s?ps(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,We=(s,a)=>{for(var t in a||(a={}))Es.call(a,t)&&Pt(s,t,a[t]);if(Ot)for(var t of Ot(a))As.call(a,t)&&Pt(s,t,a[t]);return s},ys=(s,a)=>xs(s,Is(a)),Se=(s,a,t)=>new Promise((i,f)=>{var m=l=>{try{d(t.next(l))}catch(u){f(u)}},I=l=>{try{d(t.throw(l))}catch(u){f(u)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(m,I);d((t=t.apply(s,a)).next())});const Ts=({state:{collection:s,nft:a,network:t,to:i,memo:f,amount:m}})=>{(0,Qe.K)({event:ye.Un.SEND_CONFIRM_NFT,props:null});const I=(0,jt.t)(),{trackAnalytics:d}=(0,ds.s)(),{isLoadingSupports7702:l,blockchainSupports7702:u}=(0,Ct.O)(t.id),y=(0,Nt.Gc)({coinId:t.coinId}),c=(0,us.O)(t),T=(0,q.F7)(t.coinId),[Te,X]=(0,o.useState)(!1),[v,k]=(0,o.useState)(!0),[$,L]=(0,o.useState)(!1);if(!T)throw new Error(`Account for ${t.coinId} not found`);if(!c)throw new Error(`Could not find native asset for chain ID "${t.chainId}".`);const{formatMessage:S}=(0,V.A)(),O=(0,A.Zp)(),F=(0,o.useContext)(B.o),je=(0,G.p)(),{isCustomNonceEnabled:se}=(0,Ce.j)(),[ce,Q]=(0,o.useState)(!1),[be,ge]=(0,o.useState)(!1),p=(0,rs.C)(),[R,b]=(0,o.useState)(!1),[h,H]=(0,o.useState)(null),[de,ne]=(0,o.useState)(null),[Ke,mt]=(0,o.useState)(null),[Me,Ze]=(0,o.useState)(null),[Re,vt]=(0,o.useState)(null),[we,ht]=(0,o.useState)(null),[ft,Ge]=(0,o.useState)(),[De,Ne]=(0,o.useState)(!1),[x,U]=(0,o.useState)(!1),[ue,Ve]=(0,o.useState)({originalNonce:0,editedNonce:""}),[pt,xt]=(0,o.useState)(cs.q.DEFAULT),{setShowLedgerConfirmationHint:It,handleLedgerError:Et,LedgerConnectionErrorModal:Tn}=(0,tt.U)(),Xt=(0,ls.A)(),Qt=(0,ms.YL)(),[Je,jn]=(0,o.useState)(c.assetId),me=(0,xe.Mr)(Je),Zt=(0,ot.A)(me.assetId),[Be,Jt]=(0,o.useState)(!1),_e=(0,o.useMemo)(()=>me?.assetId!==c.assetId&&u,[me,c,u]),{quotes7702:gn,initialLoading7702FeeQuotes:Nn,refetch7702FeeQuotes:Cn}=(0,hs.t)(h,_e),qe=(0,o.useMemo)(()=>ys(We(We(We(We(We({memo:f,from:T.address,to:i,value:m??"1",internal:{type:"send",isMax:!1,asset:{decimals:0,address:a.contractAddress,assetId:y,nft:a}},network:t},Ke&&{gasLimit:Ke}),Me&&{gasPrice:Me}),Re&&{maxPriorityFeePerGas:Re}),we&&{maxFeePerGas:we}),p?.estimatedBaseFee&&{baseFee:(0,w.A)(p.estimatedBaseFee).pow(c.decimals).toFixed(0)}),{feeAsset:_e?me:c,feeIs7702:_e}),[T.address,Ke,Me,we,Re,f,t,i,_e,me,c]),Sn=(0,o.useCallback)(()=>Ne(!De),[De]),_t=()=>{ge(E=>!E)},On=(0,o.useCallback)(({customGasLimit:E,customGasPrice:Y,customMaxPriorityFeePerGas:z,customMaxFeePerGas:K,minGasFeesAcceptable:Tt},as)=>{E&&mt(E),Y&&Ze(Y),z&&vt(z),K&&ht(K),Tt&&Ge(Tt),as&&xt(as),Ne(!1)},[]),qt=(0,o.useCallback)(()=>{const{editedNonce:E}=ue,Y=E&&Number(E)>=0,z=!E?.includes(".")&&!E?.includes(",");return!!Y&&z},[ue]),es=(0,o.useCallback)(()=>Se(null,null,function*(){Q(!0),ne(null);try{const E=yield C.YW.emit(he.A.STAGE_TRANSACTION,qe);H(E),se&&Ve(Y=>({originalNonce:parseInt(E.nonce),editedNonce:Y.editedNonce||String(parseInt(E.nonce))}))}catch(E){if(E.message==="RecipientTokenNotRegisteredError"){ne(S({id:"send.confirm.recipient-not-registered-token"}));return}else if(E.message==="TransferCallerNotOwnerNorApproved"){ne(S({id:"send.confirm.recipient-not-owner-nor-approved"}));return}lt.A.error(E),ne(S({id:"send.confirm.validation.generic"}))}finally{Q(!1)}}),[qe,S,se]),At=(0,o.useMemo)(()=>{if(!h)return{isValid:!0};const E=(0,St.QA)(Zt,me.decimals).gte((0,St.QA)(h.formattedFee,me.decimals)),Y=h.feeIs7702?E:(0,w.A)(0).add(h.formattedFee).lte(I[c.assetId].balance),z=h.feeIs7702?me:c,K=(0,fs.Z)(z,t);return{isValid:Y,error:Y?void 0:S({id:"generic.insufficient-balance-for-gas"},{assetSymbol:K})}},[I,S,c.assetId,c.symbol,t.symbol,h,Zt,me]),ts=(0,o.useMemo)(()=>!ce&&!Be&&!!h&&!de&&At.isValid&&(se&&v?qt():!0),[ce,h,de,At.isValid,se,v,qt,Be]),ss=()=>{d({event:ye.BQ.SEND_NFT_TRANSACTION,props:{pageViewSource:ye.Un.SEND_CONFIRM_NFT,txType:_.w.Send,walletType:Xt.type,nftId:a.id,nftCollectionId:a.collectionId,blockchainId:t.id,nftType:a.type,txStatus:"confirmed"}})},yt=E=>{d({event:ye.BQ.SEND_NFT_TRANSACTION,props:{pageViewSource:ye.Un.SEND_CONFIRM_NFT,txType:_.w.Send,walletType:Xt.type,nftId:a.id,nftCollectionId:a.collectionId,blockchainId:t.id,nftType:a.type,txStatus:"failed",txError:E}})},Pn=(0,o.useCallback)(()=>Se(null,null,function*(){var E,Y;const z={to:h.to,gasLimit:parseInt(h.fee.gasLimit||h.fee.limit),nonce:parseInt(h.nonce),chainId:parseInt(h?.network.chainId),data:h.data,type:parseInt(h.type),value:h.value};z.type===2?(z.maxFeePerGas=gt.gH.from((E=h.maxFeePerGas)!=null?E:h.fee.maxPrice),z.maxPriorityFeePerGas=gt.gH.from((Y=h.maxPriorityFeePerGas)!=null?Y:h.fee.minerPrice)):z.gasPrice=parseInt(h.fee.price);try{U(!0);const K=yield(0,is.GF)(z,Qt.derivationIndex,h?.from);(yield C.YW.emit(he.A.BROADCAST_TRANSACTION,{signed:K,metadata:h,blockchainId:t.id,raw:!0}))?(ss(),O(D.b.HISTORY)):(yt(""),b(!0))}catch(K){K.name==="TransportStatusError"&&Et(K,ne),yt(K)}finally{U(!1)}}),[Et,O,t.id,h,Qt]),bn=()=>{ts&&Se(null,null,function*(){if(je){It(!0);try{yield Pn()}catch(E){Et(E,ne)}return}try{if(U(!0),!(yield C.YW.emit(he.A.COMMIT_TRANSACTION,h)))throw new Error("Transaction failed");ss(),O(D.b.HISTORY)}catch(E){lt.A.error(E),yt(E),U(!1),b(!0)}})},ns=(0,o.useCallback)(()=>{F.address=i,F.amount=m,O(-1)},[F,O,i]),Mn=h&&parseFloat(h.formattedFee)<ft;return(0,o.useEffect)(()=>(Se(null,null,function*(){yield C.YW.emit(Xe.A.START_POLL_GAS_FEES,qe)}).catch(os.Z),()=>{C.YW.emit(Xe.A.STOP_POLL_GAS_FEES)}),[]),(0,o.useEffect)(()=>{es()},[p,es]),(0,o.useEffect)(()=>{function E(){return Se(this,null,function*(){const K=yield C.YW.emit(he.A.SUPPORTS_MEMO,t.id);X(K)})}function Y(){return Se(this,null,function*(){const K=yield C.YW.emit(he.A.SUPPORTS_NONCE,t.id);k(K)})}function z(){return Se(this,null,function*(){const K=yield C.YW.emit(he.A.SUPPORTS_CUSTOM_FEE,t);L(K)})}Promise.all([E(),Y(),z()])},[t.id]),(0,o.useEffect)(()=>{var E,Y;Be&&(h?.feeIs7702&&((E=h.feeAsset)==null?void 0:E.assetId)===Je||h?.feeIs7702===!1&&((Y=h.feeAsset)==null?void 0:Y.assetId)===Je)&&Jt(!1)},[h,Be]),(0,e.jsxs)(g.LN,{children:[(0,e.jsx)(g.zY,{backAction:ns,title:S({id:"generic.confirm"})}),(0,e.jsxs)(g.Gv,{children:[(0,e.jsx)(j,{nft:a,network:s.blockchain}),(0,e.jsx)(Ye,{network:t,customNonce:ue,isLoading:ce||l||Be,to:i,memo:f,amount:m,supportsMemo:Te,undervaluedGas:Mn,prepareSendResponse:h,toggleEditFeeModal:Sn,canEditFee:$,supportsNonce:v,toggleEditNonceModal:_t,flexGasIsSupported:u})]}),(0,e.jsx)(Le.w,{hideErrors:Be,blockchainName:t.name,genericError:de,validationBalanceError:At.error,transactionIsValid:ts,isSendingTransaction:x,onSendTransaction:bn,txType:_.w.Send,buttonText:S({id:"generic.confirm"})}),h&&$&&!u&&(0,e.jsx)(ve.G,{defaultEIP1559Speed:pt,isOpen:De,onClose:()=>Ne(!1),onSave:On,params:qe,tx:h}),h&&$&&u&&(0,e.jsx)(vs.K,{opened:De,onClose:()=>Ne(!1),selectedFeeAssetId:Je,quotes:gn,handleOnSave:E=>{jn(E),Ne(!1),Jt(!0)},onOpen:Cn,isLoading:Nn}),(0,e.jsx)(et.X,{opened:R,onClose:()=>b(!1),onContinue:ns}),se&&v&&h&&(0,e.jsx)(ze.j,{opened:be,onClose:_t,customNonce:ue,setCustomNonce:Ve,setTxData:H}),(0,e.jsx)(Tn,{})]})};function js(s){return s&&"asset"in s&&"amount"in s}function gs(s){return s&&"collection"in s&&"nft"in s}const Ns=()=>{const{state:s}=(0,A.zy)(),a=(0,A.Zp)();return s||lt.A.error(`${D.b.SEND_CONFIRM} -  "${s}" is not valid.`),(0,o.useEffect)(()=>{s||a(D.b.DEFAULT)},[]),js(s)?(0,e.jsx)(ae.w,{state:s}):gs(s)?(0,e.jsx)(Ts,{state:s}):null};var P=n(92926),it=n(52651),Oe=n(16665),Cs=n(55418),bt=n(79830),Pe=n(14948),rt=n(47996),Ss=n(79334),Os=n(65828),Mt=n(2543),ct=n(41411),Ps=n(27409),bs=n(65666),Fe=n(68157),Dt=n(89419),Ms=Object.defineProperty,Lt=Object.getOwnPropertySymbols,Ds=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable,Ft=(s,a,t)=>a in s?Ms(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Fs=(s,a)=>{for(var t in a||(a={}))Ds.call(a,t)&&Ft(s,t,a[t]);if(Lt)for(var t of Lt(a))Ls.call(a,t)&&Ft(s,t,a[t]);return s},Rt=(s,a,t)=>new Promise((i,f)=>{var m=l=>{try{d(t.next(l))}catch(u){f(u)}},I=l=>{try{d(t.throw(l))}catch(u){f(u)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(m,I);d((t=t.apply(s,a)).next())});const Rs="60",Bs=({assetId:s})=>{var a,t,i,f,m,I,d;const{formatMessage:l}=(0,V.A)(),u=(0,A.Zp)(),y=(0,G.p)(),c=(0,o.useContext)(B.o),T=(0,xe.Mr)(s);if(!T)throw new Error(`Could not find asset for assetId "${s}"`);(0,Qe.K)({event:ye.Un.SEND_PREPARE_CRYPTO,props:null});const Te=(0,rt.o)(T.blockchainId),X=(0,Ss.P)(T.blockchainId),v=(0,Fe.GV)(x=>x.sdkFeatures.prepareSend),k=(0,Fe.GV)(x=>x.sdkFeatures.prepareSendResolvedAddress),$=(0,Fe.GV)(x=>x.sdkFeatures.prepareSendResolvingAddress),[L,S]=(0,o.useState)((a=c.address)!=null?a:""),[O,F]=(0,o.useState)((t=c.amount)!=null?t:""),[je,se]=(0,o.useState)((i=c.memoOrTag)!=null?i:""),[ce,Q]=(0,o.useState)(!1),[be,ge]=(0,o.useState)(!1),[p,R]=(0,o.useState)(!1),b=X||Te,h=!!((f=c.inscriptions)!=null&&f.length),H=(0,jt.t)(),de=(0,Os.Z)(T.assetId),{blockchainSupports7702:ne,isLoadingSupports7702:Ke}=(0,Ct.O)(b.id),mt=(0,o.useMemo)(()=>{var x,U,ue;return{memo:v?.meta,asset:T,network:b,amount:(U=h?(x=v?.inscriptionsData)==null?void 0:x.amount:v?.amount)!=null?U:"",to:(ue=v?.address)!=null?ue:"",inscriptions:c.inscriptions,type:_.w.Send,isMax:(0,w.z)(O||"0").eq(de??0),supports7702:ne}},[v?.amount,T,b,c.inscriptions,v?.address,v?.meta,O,de,ne]);(0,o.useEffect)(()=>{function x(){return Rt(this,null,function*(){var U,ue,Ve;const pt=[{property:P.z.amount,value:(U=c.amount)!=null?U:""},{property:P.z.meta,value:(ue=c.memoOrTag)!=null?ue:""},{property:P.z.recipient,value:(Ve=c.address)!=null?Ve:""}].filter(It=>!!It.value),xt={action:P.e.INITIATE,params:Fs({crypto:{asset:T},initialState:pt},c.inscriptions&&{inscriptions:{inscriptions:c.inscriptions,amount:c.amount}})};yield C.YW.emit(Pe.A.PREPARE_SEND,xt)})}H[s]&&!be&&(x(),ge(!0))},[H]),(0,o.useEffect)(()=>{var x;ce&&(F((x=v?.amount)!=null?x:O),Q(!1))},[v?.amount]);const Me=(0,Mt.debounce)((x,U)=>{C.YW.emit(Pe.A.PREPARE_SEND,{action:P.e.UPDATE,params:{property:x,value:U}})},200),Ze=x=>{S(x),Fe.M_.dispatch(Dt.T.actions.clearPrepareSendResolvedAddress()),Fe.M_.dispatch(Dt.T.actions.clearPrepareSendAddressError()),Me(P.z.recipient,x)},Re=x=>{se(x),Me(P.z.meta,x)},vt=x=>{isNaN(Number(x))||x.startsWith("0x")||(F(x),Me(P.z.amount,x))},we=()=>{Q(!0),C.YW.emit(Pe.A.PREPARE_SEND,{action:P.e.UPDATE,params:{property:P.z.maxAmount}})},ht=()=>{R(!0)},ft=x=>Rt(null,null,function*(){R(!1),x?.address&&(Ze(x.address),yield new Promise(U=>setTimeout(U,200)),Re(x.memo||je||""))}),Ge=(0,o.useMemo)(()=>{var x,U;return Object.values((x=v?.metaType)!=null?x:{}).includes("Memo")||Object.values((U=v?.metaType)!=null?U:{}).includes("Object")},[v]),De=(0,o.useMemo)(()=>{var x;return Object.values((x=v?.metaType)!=null?x:{}).includes("Tag")},[v]),Ne=($||v?.isLoadingLookup)&&!k&&v?.addressError===null;return v?.isLoading||!H[s]||Ke?(0,e.jsx)(Cs.o,{children:(0,e.jsx)(bt.y,{size:te.Y.XLARGE})}):(0,e.jsxs)(g.LN,{children:[(0,e.jsx)(g.zY,{backAction:()=>u(-1),title:l({id:"send.title"},{assetSymbol:T.symbol})}),(0,e.jsxs)(g.Gv,{children:[(0,e.jsxs)(g.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(re.q,{src:T.iconUrl,name:T.name,network:T.address?b:void 0,size:te.Y.MEDIUM})}),(0,e.jsx)(N.E,{type:r.jK.BODY_14,theme:r.Il.UTILITY_1_OPACITY_1,children:l({id:"generic.on-network"},{networkName:(m=b.displayName)!=null?m:b.name})})]}),(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(Oe.S,{testid:"input-recipient",label:l({id:"input-address.address.label"}),value:L||"",onChange:x=>Ze(x.target.value),placeholder:l({id:"input-address.address.placeholder"}),actions:[{key:"address-input-action-address-book",placeholder:(0,e.jsx)(Ps.X,{width:20,height:20}),onClick:ht}],validation:(0,ct.D)(v?.addressError),autoFocus:!0,isLoading:Ne,specialSubtitle:k?(0,e.jsxs)("div",{className:"px-3 py-2 bg-backgroundSecondary rounded-xl",children:[(0,e.jsxs)(N.E,{type:r.jK.CAPTION_12,theme:r.Il.UTILITY_1_OPACITY_2,children:[l({id:"send.destination-address"}),":"]}),(0,e.jsx)("div",{className:"break-all mt-0.5",children:(0,e.jsx)(N.E,{type:r.jK.CAPTION_12,theme:r.Il.UTILITY_1_OPACITY_2,children:k.resolvedAddress})})]}):void 0})}),!h&&(0,e.jsxs)(e.Fragment,{children:[(Ge||De)&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(Oe.S,{testid:"input-memo-tag",label:l(Ge?{id:"input-memo.memo.label"}:{id:"input-tag.tag.label"}),value:je,onChange:x=>Re(x.target.value),placeholder:l(Ge?{id:"input-memo.memo.placeholder"}:{id:"input-tag.tag.placeholder"}),validation:De?(0,ct.D)(v?.metaError):void 0})}),(0,e.jsxs)("div",{className:"pb-4",children:[(0,e.jsx)(Oe.S,{testid:"input-amount",label:l({id:"input-amount.amount.label"}),value:O,onlyPositive:!0,onChange:x=>vt(x.target.value),placeholder:l({id:"input-amount.amount.placeholder"}),validation:(0,ct.D)(v?.amountError),actions:[{key:"1",placeholder:(0,e.jsx)(N.E,{theme:r.Il.PRIMARY_DEFAULT,type:r.jK.SUBHEADER_14,children:"MAX"}),onClick:()=>we()}]}),(0,e.jsxs)("div",{className:"flex space-x-1",children:[(0,e.jsxs)(N.E,{weight:r.nG.NORMAL,type:r.jK.CAPTION_12,theme:r.Il.UTILITY_1_OPACITY_1,children:[l({id:"send.balance"}),":"]}),(0,e.jsx)(le.h,{testid:"account-balance",weight:r.nG.NORMAL,textType:r.jK.CAPTION_12,theme:r.Il.UTILITY_1_OPACITY_1,amountType:ee.Cu.CRYPTO,value:de,currency:T.symbol,maxSignificantDecimals:10})]}),!!Number((I=H[T.assetId])==null?void 0:I.dust)&&(0,e.jsxs)("div",{className:"flex space-x-1",children:[(0,e.jsxs)(N.E,{weight:r.nG.NORMAL,type:r.jK.CAPTION_12,theme:r.Il.UTILITY_1_OPACITY_1,children:[l({id:"send.dust-balance"}),":"]}),(0,e.jsx)(le.h,{weight:r.nG.NORMAL,textType:r.jK.CAPTION_12,theme:r.Il.UTILITY_1_OPACITY_1,amountType:ee.Cu.CRYPTO,value:(d=H[T.assetId])==null?void 0:d.dust,currency:T.symbol,maxSignificantDecimals:10})]})]})]})]}),y&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(it.e,{blockchainName:b.name})}),(0,e.jsx)(Ee.$,{testid:"button-prepare-send-tx",disabled:!v?.isNextEnabled||Ne,onClick:()=>u(D.b.SEND_CONFIRM,{state:mt}),children:l({id:"generic.preview"})})]}),p&&(0,e.jsx)(bs.F,{isOpened:p,coinId:b.isCustom?Rs:(0,Nt.X2)(T.assetId),onClose:ft})]})};var Us=n(65818),Ys=n(46707),Ws=(s,a,t)=>new Promise((i,f)=>{var m=l=>{try{d(t.next(l))}catch(u){f(u)}},I=l=>{try{d(t.throw(l))}catch(u){f(u)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(m,I);d((t=t.apply(s,a)).next())});const Ks=({collectionId:s,nftId:a})=>{var t,i,f;const{formatMessage:m}=(0,V.A)(),I=(0,A.Zp)(),d=(0,G.p)(),l=(0,o.useContext)(B.o),u=(0,Us.Q)(s);if(!u)throw new Error(`Could not find collection for collectionId "${s}"`);const y=(0,Ys.j)(s,a),c=(0,Fe.GV)(p=>p.sdkFeatures.prepareSend);if(!y)throw new Error("NFT Id is missing.");(0,Qe.K)({event:ye.Un.SEND_PREPARE_NFT,props:null});const[T,Te]=(0,o.useState)((t=l.address)!=null?t:""),[X,v]=(0,o.useState)((i=l.memoOrTag)!=null?i:""),[k,$]=(0,o.useState)((f=l.amount)!=null?f:""),[L,S]=(0,o.useState)(!1),O=(0,o.useMemo)(()=>{var p,R,b;return{memo:(p=c?.meta)!=null?p:void 0,network:u.blockchain,to:(R=c?.address)!=null?R:"",amount:(b=c?.amount)!=null?b:"",collection:u,nft:y}},[X,u.blockchain,T]);(0,o.useEffect)(()=>{function p(){return Ws(this,null,function*(){var R,b,h;const H=[{property:P.z.amount,value:(R=l.amount)!=null?R:""},{property:P.z.meta,value:(b=l.memoOrTag)!=null?b:""},{property:P.z.recipient,value:(h=l.address)!=null?h:""}].filter(ne=>!!ne.value),de={action:P.e.INITIATE,params:{nft:{nft:y,blockchain:u.blockchain},initialState:H}};yield C.YW.emit(Pe.A.PREPARE_SEND,de)})}p()},[]),(0,o.useEffect)(()=>{var p;L&&($((p=c?.amount)!=null?p:k),S(!1))},[c?.amount]);const F=(0,Mt.debounce)((p,R)=>{C.YW.emit(Pe.A.PREPARE_SEND,{action:P.e.UPDATE,params:{property:p,value:R}})},200),je=p=>{Te(p),F(P.z.recipient,p)},se=p=>{$(p),F(P.z.amount,p)},ce=p=>{v(p),F(P.z.meta,p)},Q=()=>{S(!0),C.YW.emit(Pe.A.PREPARE_SEND,{action:P.e.UPDATE,params:{property:P.z.maxAmount}})},be=(0,o.useMemo)(()=>{var p,R;return Object.values((p=c?.metaType)!=null?p:{}).includes("Memo")||Object.values((R=c?.metaType)!=null?R:{}).includes("Object")},[c]),ge=p=>({isValid:!p,error:p});return(0,e.jsxs)(g.LN,{children:[(0,e.jsx)(g.zY,{backAction:()=>I(-1),title:m({id:"send.title"},{assetSymbol:`${u.name} #${y.onChainId} `})}),(0,e.jsxs)(g.Gv,{children:[(0,e.jsxs)(g.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(re.q,{src:y.previewImageURL.url,name:u.blockchain.name,network:u.blockchain,size:te.Y.XLARGE})}),(0,e.jsx)(N.E,{type:r.jK.SUBTITLE,theme:r.Il.SECONDARY,children:m({id:"generic.on-network"},{networkName:u.blockchain.name})})]}),(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(Oe.S,{label:m({id:"input-address.address.label"}),value:T,onChange:p=>je(p.target.value),placeholder:m({id:"input-address.address.placeholder"}),validation:ge(c?.addressError),autoFocus:!0})}),be&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(Oe.S,{label:m({id:"input-memo.memo.label"}),value:X,onChange:p=>ce(p.target.value),placeholder:m({id:"input-memo.memo.placeholder"})})}),c?.showAmount&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(Oe.S,{label:m({id:"input-amount.amount.label"}),value:k,onChange:p=>se(p.target.value),placeholder:m({id:"input-amount.amount.placeholder"}),validation:ge(c?.amountError),actions:[{key:"1",placeholder:(0,e.jsx)(N.E,{theme:r.Il.BRAND,children:"MAX"}),onClick:()=>Q()}]})})]}),d&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(it.e,{blockchainName:u.blockchain.name})}),(0,e.jsx)(Ee.$,{disabled:!c?.isNextEnabled,onClick:()=>I(D.b.SEND_CONFIRM,{state:O}),children:m({id:"generic.preview"})})]})]})};var ws=n(59754);const Bt=()=>{const{collectionId:s,nftId:a,assetId:t}=(0,A.g)(),i=()=>{C.YW.emit(Pe.A.PREPARE_SEND,{action:P.e.CLOSE})};return(0,ws.A)(i),t?(0,e.jsx)(Bs,{assetId:t}):s&&a?(0,e.jsx)(Ks,{collectionId:s,nftId:a}):null};var Gs=n(27214),Vs=n(52294),zs=n(8360),ks=n(29189),$s=n(96471);const Hs=()=>{(0,Qe.K)({event:ye.Un.SEND_SELECT_CRYPTO,props:null});const{formatMessage:s}=(0,V.A)(),a=(0,A.Zp)(),[t,i]=(0,o.useState)(""),f=(0,ks.f)(),[m,I]=(0,o.useState)(f??void 0),d=l=>{a(`${D.b.SEND}/${l.assetId}${l.type===$s.S.BRC20?"/inscriptions":""}`)};return(0,e.jsxs)(g.LN,{children:[(0,e.jsx)(g.zY,{backAction:()=>a(-1),title:s({id:"select-asset.send.title",defaultMessage:"Select asset to send"})}),(0,e.jsxs)(g.Gv,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-4 mb-4",children:[(0,e.jsx)(zs.D,{testid:"input-search-asset",value:t,onChange:l=>i(l.target.value),placeholder:s({id:"component.input-asset-search.placeholder"})}),(0,e.jsx)(Vs.M,{localFilteringBlockchainId:m,onFilterChange:l=>I(l??void 0)})]}),(0,e.jsx)(g.LO,{children:(0,e.jsx)(Gs.U,{searchQuery:t,excludedBlockchainId:"binance",targetBlockchainId:m,onAssetRowClick:d,emptyMessage:s({id:"token-asset-list.empty-search-caption"}),showNetworkName:!0,alwaysShowAllAssets:!0})})]})]})};var Xs=n(78262),Ut=n(152),Qs=n(50784);const Zs=({inscription:s,asset:a,onClick:t})=>(0,e.jsx)(Ut.Z,{noPadding:!0,children:(0,e.jsxs)(ie.c,{onClick:()=>t(s.id),children:[(0,e.jsxs)("div",{className:"p-2",children:[(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsx)(Xs.k,{on:s.isSelected})}),(0,e.jsxs)("div",{className:"flex items-center justify-center space-x-1 mb-4",children:[(0,e.jsx)(re.q,{src:a.iconUrl,name:a.name,size:te.Y.XXSMALL}),(0,e.jsxs)(N.E,{children:[s.amount," ",a.symbol]})]})]}),(0,e.jsx)(Qs.c,{noMargin:!0}),(0,e.jsx)("div",{className:"p-2 text-center",children:(0,e.jsxs)(N.E,{type:r.jK.CAPTION,theme:r.Il.SECONDARY,children:["#",s.inscriptionNumber]})})]})});var Js=n(31902),_s=Object.defineProperty,qs=Object.defineProperties,en=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,tn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable,Wt=(s,a,t)=>a in s?_s(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,Kt=(s,a)=>{for(var t in a||(a={}))tn.call(a,t)&&Wt(s,t,a[t]);if(Yt)for(var t of Yt(a))sn.call(a,t)&&Wt(s,t,a[t]);return s},wt=(s,a)=>qs(s,en(a)),nn=(s,a,t)=>new Promise((i,f)=>{var m=l=>{try{d(t.next(l))}catch(u){f(u)}},I=l=>{try{d(t.throw(l))}catch(u){f(u)}},d=l=>l.done?i(l.value):Promise.resolve(l.value).then(m,I);d((t=t.apply(s,a)).next())});const an=()=>{const{formatMessage:s}=(0,V.A)(),a=(0,A.Zp)(),{assetId:t}=(0,A.g)(),i=(0,xe.Mr)(t);if(!i)throw new Error(`Could not find asset for assetId "${t}"`);const f=(0,o.useContext)(B.o),m=(0,rt.o)(i.blockchainId),I=(0,ot.A)(i.assetId),l=(0,Js.P)(i.assetId)!=="0",[u,y]=(0,o.useState)([]),[c,T]=(0,o.useState)(l),Te=!c&&!l,X=(0,o.useMemo)(()=>u.reduce((L,S)=>S.isSelected?L+Number(S.amount):L,0),[u]),v=L=>{const S=u.map(O=>O.id===L?wt(Kt({},O),{isSelected:!O.isSelected}):O);y(S)},k=()=>{a(`${D.b.SEND}/${i.assetId}/inscribe`)},$=()=>{const L=u.filter(S=>S.isSelected).map(S=>S.id);f.setContext({address:"",amount:X.toString(),inscriptions:L}),a(`${D.b.SEND}/${i.assetId}`)};return(0,o.useEffect)(()=>{nn(null,null,function*(){if(l)try{const S=(yield C.YW.emit(he.A.FETCH_INSCRIPTIONS_BALANCE_FOR_ADDRESS,{blockchainId:m.id,address:i.address,decimals:i.decimals})).map(O=>wt(Kt({},O),{isSelected:f.inscriptions?f.inscriptions.includes(O.id):!1}));y(S)}finally{T(!1)}})},[]),(0,e.jsxs)(g.LN,{children:[(0,e.jsx)(g.zY,{backAction:()=>a(-1),title:s({id:"send.title"},{assetSymbol:i.symbol})}),(0,e.jsxs)(g.Gv,{children:[(0,e.jsxs)(g.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(re.q,{src:i.iconUrl,name:i.name,network:i.address?m:void 0,size:te.Y.LARGE})}),(0,e.jsx)(N.E,{type:r.jK.SUBTITLE,theme:r.Il.SECONDARY,children:s({id:"generic.on-network"},{networkName:m.name})}),(0,e.jsx)("div",{className:"mt-1.5",children:(0,e.jsxs)(N.E,{type:r.jK.SCREAMER,children:[X," ",i.symbol]})})]}),(0,e.jsxs)("div",{className:"flex flex-col space-y-4 mb-4",children:[(0,e.jsx)(Ut.Z,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)(re.q,{src:i.iconUrl,name:i.name}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)(N.E,{type:r.jK.CAPTION,theme:r.Il.SECONDARY,children:s({id:"send.non-transferable-balance"})}),(0,e.jsxs)(N.E,{type:r.jK.TITLE,children:[I," ",i.symbol]})]})]}),(0,e.jsx)("div",{children:(0,e.jsx)(Ee.$,{shape:ke.dB.BADGE,onClick:k,children:s({id:"generic.inscribe"})})})]})}),c&&(0,e.jsx)("div",{className:"text-center",children:(0,e.jsx)(bt.y,{})}),Te&&(0,e.jsx)("div",{className:"mx-auto",children:(0,e.jsx)(N.E,{type:r.jK.CAPTION,theme:r.Il.SECONDARY,children:s({id:"generic.inscription.no-transferable-disclaimer"},{assetSymbol:i.symbol})})}),(0,e.jsx)("div",{className:"grid grid-cols-2 gap-4 justify-between",children:u.map(L=>(0,e.jsx)(Zs,{inscription:L,asset:i,onClick:v},L.id))})]})]}),(0,e.jsx)(Ee.$,{testid:"button-prepare-send-inscription",disabled:!X,onClick:$,children:s({id:"generic.continue"})})]})]})};var ln=Object.defineProperty,on=Object.defineProperties,rn=Object.getOwnPropertyDescriptors,Gt=Object.getOwnPropertySymbols,cn=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable,Vt=(s,a,t)=>a in s?ln(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,dt=(s,a)=>{for(var t in a||(a={}))cn.call(a,t)&&Vt(s,t,a[t]);if(Gt)for(var t of Gt(a))dn.call(a,t)&&Vt(s,t,a[t]);return s},zt=(s,a)=>on(s,rn(a));const un=({value:s,decimals:a,minimum:t,maximum:i,minimumThreshold:f,minimumThresholdWarning:m})=>{const I={number:!1,decimals:!1,minimum:!1,maximum:!1,minimumThreshold:!1,minimumThresholdWarning:null};if(!s||s==="0")return zt(dt({},I),{isValid:!1});try{const d=(0,w.A)(s);I.number=!0,I.minimum=t?d.gte((0,w.A)(t)):!0,I.maximum=i?d.lte((0,w.A)(i)):!0;const l=s.indexOf("."),u=l!==-1?s.substring(l+1):void 0;if(I.decimals=u&&typeof a=="number"?u.length<=a:!0,m&&m.value!=="0"&&i){const y=(0,w.A)(i),c=(0,w.A)(m.value);I.minimumThresholdWarning=y.gt(0)&&y.gte(d)&&y.minus(d).lt(c)?m.message:null}else I.minimumThresholdWarning=null;if(f&&f!=="0"&&i){const y=(0,w.A)(i),c=(0,w.A)(f);I.minimumThreshold=d.lte(y)&&y.minus(d).gte(c)}else I.minimumThreshold=!0}catch{}finally{return zt(dt({},I),{isValid:Object.entries(I).every(([d,l])=>d==="minimumThresholdWarning"||!!l)})}},mn=({value:s,asset:a,decimals:t,minimum:i,maximum:f,minimumThreshold:m,minimumThresholdWarning:I})=>{const{formatMessage:d}=(0,V.A)(),[l,u]=(0,o.useState)({isValid:!1,number:!1,decimals:!1,minimum:!1,maximum:!1,minimumThreshold:!1,minimumThresholdWarning:null});(0,o.useEffect)(()=>{u(dt({},un({value:s,asset:a,decimals:t,minimum:i,maximum:f,minimumThreshold:m,minimumThresholdWarning:I})))},[s,a,t,i,f]);const y=(0,o.useMemo)(()=>{if(!l.number)return d({id:"validate-amount.generic"});if(!l.decimals)return d({id:"validate-amount.decimals"},{number:t});if(!l.minimum)return d({id:"validate-amount.minimum"},{number:i});if(!l.maximum)return d({id:"validate-amount.maximum"},{asset:a.symbol});if(!l.minimumThreshold)return d({id:"validate-amount.minimum-threshold"},{number:m,asset:a.symbol});if(l.minimumThresholdWarning)return d({id:l.minimumThresholdWarning})},[d,l,a,t,i]);return{isValid:l.isValid,error:y}},vn=()=>{const{assetId:s}=(0,A.g)(),a=(0,A.Zp)(),{formatMessage:t}=(0,V.A)();if(!s)throw new Error(`Asset Id "${s}" is invalid.`);const i=(0,xe.Mr)(s);if(!i)throw new Error(`Could not find asset for assetId "${s}"`);const f=(0,rt.o)(i.blockchainId),m=(0,ot.A)(i.assetId),I=(0,q.F7)(f.coinId),d=(0,G.p)(),[l,u]=(0,o.useState)(""),y=mn({value:l,asset:i,decimals:i.decimals,maximum:m,minimumThreshold:"0"}),c=(0,o.useMemo)(()=>({asset:i,network:f,amount:l,to:I.address,type:_.w.Inscribe}),[i,f,l]);return(0,e.jsxs)(g.LN,{children:[(0,e.jsx)(g.zY,{title:`${t({id:"generic.inscribe"})} ${i.symbol}`,backAction:()=>a(-1)}),(0,e.jsxs)(g.Gv,{children:[(0,e.jsxs)(g.LO,{children:[(0,e.jsxs)("div",{className:"flex flex-col space-y-1 text-center pb-4",children:[(0,e.jsx)("div",{className:"flex justify-center",children:(0,e.jsx)(re.q,{src:i.iconUrl,name:i.name,network:i.address?f:void 0,size:te.Y.LARGE})}),(0,e.jsx)(N.E,{type:r.jK.SUBTITLE,theme:r.Il.SECONDARY,children:t({id:"generic.on-network"},{networkName:f.name})})]}),(0,e.jsxs)("div",{className:"pb-4",children:[(0,e.jsx)(Oe.S,{testid:"input-amount",label:t({id:"input-amount.amount.label"}),value:l,onChange:T=>u(T.target.value),placeholder:t({id:"input-amount.amount.placeholder"}),validation:y,actions:[{key:"max",placeholder:(0,e.jsx)(N.E,{theme:r.Il.BRAND,children:"MAX"}),disabled:m==="0",onClick:()=>u(m)}]}),(0,e.jsxs)("div",{className:"flex space-x-1",children:[(0,e.jsxs)(N.E,{weight:r.nG.NORMAL,type:r.jK.SUBTITLE,theme:r.Il.SECONDARY,children:[t({id:"generic.available-balance"}),":"]}),(0,e.jsx)(le.h,{testid:"inscribe-balance",weight:r.nG.NORMAL,textType:r.jK.SUBTITLE,theme:r.Il.SECONDARY,amountType:ee.Cu.CRYPTO,value:m,currency:i.symbol,maxSignificantDecimals:10})]})]})]}),d&&(0,e.jsx)("div",{className:"pb-4",children:(0,e.jsx)(it.e,{blockchainName:f.name})}),(0,e.jsx)(Ee.$,{testid:"button-prepare-inscribe-tx",disabled:!y.isValid,onClick:()=>a(D.b.SEND_CONFIRM,{state:c}),children:t({id:"generic.continue"})})]})]})};var hn=Object.defineProperty,fn=Object.defineProperties,pn=Object.getOwnPropertyDescriptors,kt=Object.getOwnPropertySymbols,xn=Object.prototype.hasOwnProperty,In=Object.prototype.propertyIsEnumerable,$t=(s,a,t)=>a in s?hn(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t,ut=(s,a)=>{for(var t in a||(a={}))xn.call(a,t)&&$t(s,t,a[t]);if(kt)for(var t of kt(a))In.call(a,t)&&$t(s,t,a[t]);return s},En=(s,a)=>fn(s,pn(a));const An=()=>{const s=i=>{t(f=>ut(ut({},f),i))},[a,t]=(0,o.useState)({setContext:s});return(0,e.jsx)(B.o.Provider,{value:En(ut({},a),{setContext:s}),children:(0,e.jsx)(A.sv,{})})},Ht=()=>(0,e.jsxs)(A.BV,{children:[(0,e.jsx)(A.qh,{index:!0,element:(0,e.jsx)(Hs,{})}),(0,e.jsxs)(A.qh,{element:(0,e.jsx)(An,{}),children:[(0,e.jsx)(A.qh,{path:"/:assetId",element:(0,e.jsx)(Bt,{})}),(0,e.jsx)(A.qh,{path:"/:collectionId/:nftId",element:(0,e.jsx)(Bt,{})}),(0,e.jsx)(A.qh,{path:"/:assetId/inscriptions",element:(0,e.jsx)(an,{})}),(0,e.jsx)(A.qh,{path:"/:assetId/inscribe",element:(0,e.jsx)(vn,{})}),(0,e.jsx)(A.qh,{path:"/confirm",element:(0,e.jsx)(Ns,{})})]})]}),yn=Ht}),31902:((W,M,n)=>{n.d(M,{P:()=>A});var e=n(79960);function A(o){var B;return((B=(0,e.t)()[o])==null?void 0:B.transferable)||"0"}}),41411:((W,M,n)=>{n.d(M,{D:()=>e});const e=A=>({isValid:!A,error:A??void 0})}),46707:((W,M,n)=>{n.d(M,{j:()=>o});var e=n(68157),A=n(96540);const o=(B,D)=>{const ae=(0,e.GV)(ve=>ve.nft.nfts[B].items);return(0,A.useMemo)(()=>ae.find(ve=>ve.id===D),[ae,D])}}),52294:((W,M,n)=>{n.d(M,{M:()=>ke});var e=n(74848),A=n(29584),o=n(23207),B=n(65504),D=n(68632),ae=n(64145),ve=n(22670),ze=n(28398),et=n(44832),tt=n(29189),fe=n(69275),Z=n(33055),Ue=n(29251),le=n(26113),pe=n(96540),xe=n(6442),Ie=n(98939),w=n(52114),V=n(1279),st=n(20998),nt=n(10551),at=(Ae,g,J)=>new Promise((N,r)=>{var Ce=G=>{try{q(J.next(G))}catch(ee){r(ee)}},_=G=>{try{q(J.throw(G))}catch(ee){r(ee)}},q=G=>G.done?N(G.value):Promise.resolve(G.value).then(Ce,_);q((J=J.apply(Ae,g)).next())});const Ee=[Ie.hF.SmartChain,Ie.hF.Ethereum,Ie.hF.Solana,Ie.hF.Tron,Ie.hF.Arbitrum],ke=({useGlobalState:Ae,localFilteringBlockchainId:g,onFilterChange:J})=>{const{formatMessage:N}=(0,xe.A)(),{trackAnalytics:r}=(0,o.s)(),Ce=(0,Z.A)(),_=(0,fe.o)(),q=(0,et.g)(!0),G=(0,tt.f)(),[ee,$e]=(0,pe.useState)(!1),oe=Ae?G:g,ie=(0,pe.useMemo)(()=>{if(Ce.type===Ue.S.MNEMONIC)return q;const j=Object.keys(_).map(C=>C);return q.filter(C=>j.includes(C.coinId.toString()))},[q,_,Ce]),te=(0,pe.useMemo)(()=>ie?.find(j=>j.id===oe),[ie,oe]);(0,pe.useEffect)(()=>{Ae&&oe&&!te&&ae.YW.emit(ve.A.SWITCH_FILTERING_BLOCKCHAIN,null)},[Ae,oe,te]);const re=(0,pe.useMemo)(()=>Ee.map(j=>ie.find(C=>C.coinId===j)).filter(j=>j!==void 0),[ie]),He=ie.length,Ye=j=>at(null,null,function*(){var C;if(!Ae){const Xe=(C=j?.id)!=null?C:null;J?.(Xe);return}if(!j){yield Promise.allSettled([ae.YW.emit(ve.A.SWITCH_FILTERING_BLOCKCHAIN,null),(0,le.yy)(250)]);return}const he=j.isCustom?ze.l.CUSTOM:ze.l.MAIN;yield Promise.allSettled([ae.YW.emit(ve.A.SWITCH_FILTERING_BLOCKCHAIN,j.id),(0,le.yy)(250)]),r({event:A.BQ.SWITCH_FILTERING_NETWORK,props:{pageViewSource:A.Un.HOME,blockchainName:j.name,blockchainChainId:j.chainId,blockchainType:he}})}),Le=j=>j?oe===j.id:!oe;return(0,e.jsxs)("div",{className:"flex items-center justify-between overflow-x-auto scrollbar-hide pb-2",children:[(0,e.jsx)("button",{onClick:()=>Ye(null),className:`flex-shrink-0 w-10 h-10 rounded-full border-2 transition-all flex items-center justify-center ${Le(null)?"border-primary bg-background-2":"border-transparent bg-background-2"}`,"data-testid":"horizontal-network-filter-all",title:N({id:"component.blockchain-select.all-networks",defaultMessage:"All Networks"}),children:(0,e.jsx)("span",{className:Le(null)?"!text-primary":"",children:(0,e.jsx)(w.E,{type:V.jK.SUBHEADER_14,theme:Le(null)?V.Il.PRIMARY_DEFAULT:void 0,children:N({id:"component.blockchain-select.all",defaultMessage:"All"})})})}),re.map(j=>{var C;return(0,e.jsx)("button",{onClick:()=>Ye(j),className:`flex-shrink-0 w-10 h-10 rounded-full border-2 transition-all ${Le(j)?"border-primary bg-background-2":"border-transparent bg-background-2"}`,"data-testid":`horizontal-network-filter-${j.symbol.toLowerCase()}`,title:(C=j.displayName)!=null?C:j.name,children:(0,e.jsx)("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center",children:(0,e.jsx)(B.q,{name:j.name,size:D.Y.MEDIUM,src:j.iconUrl})})},j.id)}),(0,e.jsxs)("button",{onClick:()=>$e(!0),className:"flex-shrink-0 px-3 py-2 rounded-full border-2 border-utility-1-opacity-5 bg-background-2 flex items-center gap-1.5","data-testid":"horizontal-network-filter-more",title:`${He} networks available`,children:[(0,e.jsx)(w.E,{type:V.jK.SUBHEADER_14,children:He}),(0,e.jsx)(nt.b,{width:12,height:12,colorClass:"text-utility-1-opacity-1"})]}),(0,e.jsx)(st.S,{isOpen:ee,onClose:()=>$e(!1),blockchainList:ie,selectedBlockchainId:oe??null,onSelectNetwork:Ye})]})}}),65818:((W,M,n)=>{n.d(M,{Q:()=>o});var e=n(96540),A=n(78023);const o=B=>{const D=(0,A.X)();return(0,e.useMemo)(()=>D.find(ae=>ae.id===B),[B,D])}}),78262:((W,M,n)=>{n.d(M,{k:()=>o});var e=n(74848),A=n(57886);const o=({on:B})=>B?(0,e.jsx)(A.y,{width:16,height:16,colorClass:"text-primary"}):(0,e.jsx)("div",{className:"border-backgroundTertiary border-2 rounded-lg w-4 h-4"})}),92926:((W,M,n)=>{n.d(M,{e:()=>e,z:()=>A});var e=(o=>(o.INITIATE="initiate",o.UPDATE="update",o.CLOSE="close",o))(e||{}),A=(o=>(o.recipient="recipient",o.meta="meta",o.amount="amount",o.maxAmount="maxAmount",o))(A||{})})}]);

//# sourceMappingURL=742.js.map