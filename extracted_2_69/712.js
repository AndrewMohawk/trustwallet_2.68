try{let ae=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},Q=new ae.Error().stack;Q&&(ae._sentryDebugIds=ae._sentryDebugIds||{},ae._sentryDebugIds[Q]="997ce623-2c44-4ae7-bdfa-e7829d11820a",ae._sentryDebugIdIdentifier="sentry-dbid-997ce623-2c44-4ae7-bdfa-e7829d11820a")}catch{}{let ae=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};ae.SENTRY_RELEASE={id:"2.67.0"}}(self.webpackChunkbrowser_extension_wallet=self.webpackChunkbrowser_extension_wallet||[]).push([[712],{2472:((ae,Q,s)=>{s.d(Q,{i:()=>y});var e=s(74848),F=s(48346);const y=({length:Y,isLoading:D,widthClass:p="w-20",heightClass:b="h-4",horizontal:z=!1,fullWidth:de=!1})=>D?(0,e.jsx)("div",{className:`flex ${z?"flex-row":"flex-col"} gap-2`,children:[...Array(Y)].map((Pe,Me)=>(0,e.jsx)(F.S,{isLoading:!0,widthClass:p,heightClass:b,fullWidth:de},"skeleton-line-list-"+Me))}):null}),6475:((ae,Q,s)=>{s.d(Q,{q:()=>D});var e=s(1651),F=s(58959),y=class extends e.${constructor(p,b){super(p,b)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(p,b){super.setOptions({...p,behavior:(0,F.PL)()},b)}getOptimisticResult(p){return p.behavior=(0,F.PL)(),super.getOptimisticResult(p)}fetchNextPage(p){return this.fetch({...p,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(p){return this.fetch({...p,meta:{fetchMore:{direction:"backward"}}})}createResult(p,b){const{state:z}=p,de=super.createResult(p,b),{isFetching:Pe,isRefetching:Me,isError:w,isRefetchError:ye}=de,fe=z.fetchMeta?.fetchMore?.direction,X=w&&fe==="forward",Ie=Pe&&fe==="forward",ne=w&&fe==="backward",xe=Pe&&fe==="backward";return{...de,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,F.rB)(b,z.data),hasPreviousPage:(0,F.RQ)(b,z.data),isFetchNextPageError:X,isFetchingNextPage:Ie,isFetchPreviousPageError:ne,isFetchingPreviousPage:xe,isRefetchError:ye&&!X&&!ne,isRefetching:Me&&!Ie&&!xe}}},Y=s(44171);function D(p,b){return(0,Y.t)(p,y,b)}}),20998:((ae,Q,s)=>{s.d(Q,{S:()=>oe});var e=s(74848),F=s(96540),y=s(6442),Y=s(52114),D=s(1279),p=s(8360),b=s(94893),z=s(9770),de=s(97726),Pe=s(46729),Me=s(95455),w=s(65504),ye=s(68632),fe=s(98939),X=s(22146),Ie=s(23350),ne=(I,O,j)=>new Promise((J,ie)=>{var q=U=>{try{L(j.next(U))}catch(ee){ie(ee)}},K=U=>{try{L(j.throw(U))}catch(ee){ie(ee)}},L=U=>U.done?J(U.value):Promise.resolve(U.value).then(q,K);L((j=j.apply(I,O)).next())});const xe=Object.values(fe.hF),T=I=>xe.includes(I),h=I=>{var O;return(O=I.displayName)!=null?O:I.name},$=(I,O)=>{const j=h(I).toLowerCase(),J=I.symbol.toLowerCase();return j.includes(O)||J.includes(O)},W=(I,O)=>xe.indexOf(I.coinId)-xe.indexOf(O.coinId),k=(I,O)=>h(I).localeCompare(h(O)),oe=({isOpen:I,onClose:O,blockchainList:j,selectedBlockchainId:J,onSelectNetwork:ie,hideAllNetworksOption:q})=>{const{formatMessage:K}=(0,y.A)(),[L,U]=(0,F.useState)(""),ee=L.toLowerCase(),Oe=(0,F.useMemo)(()=>j.filter(E=>T(E.coinId)).filter(E=>!L||$(E,ee)).sort(W),[j,L,ee]),re=(0,F.useMemo)(()=>j.filter(E=>!T(E.coinId)).filter(E=>!L||$(E,ee)).sort(k),[j,L,ee]),Ce=!L&&!q,je=L&&Oe.length===0&&re.length===0,Te=E=>E?J===E.id:!J,Ne=E=>ne(null,null,function*(){ie(E),O(),U("")}),Le=()=>{O(),U("")};return(0,e.jsx)(X.a,{opened:I,onClose:Le,title:K({id:"select-network.title",defaultMessage:"Select network"}),placement:Ie.Gn.BOTTOM,children:(0,e.jsxs)("div",{className:"flex flex-col min-h-[95vh]  space-y-3",children:[(0,e.jsx)(p.D,{placeholder:K({id:"select-network.search-placeholder",defaultMessage:"Search for network"}),value:L,onChange:E=>U(E.target.value),autoFocus:!1,testid:"network-modal-search"}),(0,e.jsx)("div",{className:"flex-1 overflow-y-auto tw-scrollbar flex flex-col",children:je?(0,e.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,e.jsx)(Me.B,{})}):(0,e.jsx)("div",{className:"space-y-4",children:(0,e.jsxs)(e.Fragment,{children:[Ce&&(0,e.jsx)(b.c,{onClick:()=>Ne(null),testid:"network-modal-all",children:(0,e.jsxs)("div",{className:"flex items-center justify-between py-3",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,e.jsx)(z.s,{width:20,height:20,colorClass:"text-primary"})}),(0,e.jsx)(Y.E,{type:D.jK.SUBHEADER_16,theme:D.Il.PRIMARY,children:K({id:"select-crypto.all-networks",defaultMessage:"All networks"})})]}),Te(null)?(0,e.jsx)(de.w,{width:24,height:24,colorClass:"text-primary"}):(0,e.jsx)(Pe.r,{width:24,height:24,colorClass:"text-utility-1-opacity-2"})]})}),Oe.length>0&&(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("div",{className:"mb-2",children:(0,e.jsx)(Y.E,{type:D.jK.BODY_14,theme:D.Il.SECONDARY,weight:D.nG.SEMIBOLD,testid:"popular-networks-title",children:K({id:"select-network.popular-networks",defaultMessage:"Popular networks"})})}),Oe.map(E=>(0,e.jsx)(b.c,{onClick:()=>Ne(E),testid:`network-modal-${E.symbol.toLowerCase()}`,children:(0,e.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsx)(w.q,{name:h(E),src:E.iconUrl,size:ye.Y.LARGE}),(0,e.jsx)(Y.E,{type:D.jK.SUBHEADER_16,theme:D.Il.PRIMARY,children:h(E)})]}),Te(E)?(0,e.jsx)(de.w,{width:24,height:24,colorClass:"text-primary"}):(0,e.jsx)(Pe.r,{width:24,height:24,colorClass:"text-utility-1-opacity-2"})]})},E.coinId))]}),re.length>0&&(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("div",{className:"mb-2",children:(0,e.jsx)(Y.E,{type:D.jK.BODY_14,theme:D.Il.SECONDARY,weight:D.nG.SEMIBOLD,testid:"az-networks-title",children:K({id:"select-network.az-networks",defaultMessage:"A-Z networks"})})}),re.map(E=>(0,e.jsx)(b.c,{onClick:()=>Ne(E),testid:`network-modal-${E.symbol.toLowerCase()}`,children:(0,e.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,e.jsx)(w.q,{name:h(E),src:E.iconUrl,size:ye.Y.LARGE}),(0,e.jsx)(Y.E,{type:D.jK.SUBHEADER_16,theme:D.Il.PRIMARY,children:h(E)})]}),Te(E)?(0,e.jsx)(de.w,{width:24,height:24,colorClass:"text-primary"}):(0,e.jsx)(Pe.r,{width:24,height:24,colorClass:"text-utility-1-opacity-2"})]})},E.coinId))]})]})})})]})})}}),38331:((ae,Q,s)=>{s.r(Q),s.d(Q,{default:()=>ls});var e=s(74848),F=s(84976),y=s(47767),Y=s(4800),D=s(6442),p=s(96540),b=s(49051),z=s(52619),de=s(65512),Pe=s(48346),Me=s(2472),w=s(26264),ye=(t=>(t.REGULAR="regular",t.P2P="p2p",t))(ye||{});const fe=(0,p.createContext)(null),X=()=>{const t=(0,p.useContext)(fe);if(!t)throw new Error("useBuyContext must be inside BuyContextProvider");return t};var Ie=s(63369),ne=s(29584),xe=s(41327),T=s(52114),h=s(1279);const $=({quote:t,paymentCategory:n,isLoading:o,onClick:i})=>{var r;const{formatMessage:l}=(0,D.A)();if(o)return(0,e.jsxs)("div",{className:"flex items-center justify-between w-full py-3 px-4 bg-background-secondary rounded-4 animate-pulse",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsx)("div",{className:"w-10 h-10 rounded-full bg-background-tertiary"}),(0,e.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,e.jsx)("div",{className:"w-[100px] h-4 bg-background-tertiary rounded"}),(0,e.jsx)("div",{className:"w-[80px] h-3.5 bg-background-tertiary rounded"})]})]}),(0,e.jsx)("div",{className:"w-5 h-5 bg-background-tertiary rounded"})]});if(!t)return null;const c=t.provider.name,a=t.provider.imageUrl,d=(r=n?.displayName)!=null?r:t.paymentMethod.paymentMethod;return(0,e.jsx)(de.$,{onClick:i,theme:z.ry.SECONDARY,shape:z.dB.DEFAULT,className:"flex items-center justify-between py-3 px-4 bg-background-secondary rounded-4",children:(0,e.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[a?(0,e.jsx)("img",{src:a,alt:c,className:"w-10 h-10"}):(0,e.jsx)("div",{className:"w-10 h-10 rounded-full bg-background-primary flex items-center justify-center",children:(0,e.jsx)(T.E,{type:h.jK.SUBHEADER_16,weight:h.nG.SEMIBOLD,children:c.charAt(0)})}),(0,e.jsxs)("div",{className:"flex flex-col items-start",children:[(0,e.jsx)(T.E,{type:h.jK.SUBHEADER_16,weight:h.nG.SEMIBOLD,children:d}),(0,e.jsx)(T.E,{type:h.jK.BODY_14,theme:h.Il.UTILITY_1_OPACITY_1,children:l({id:"buy-enter-amount.p2p-provider",defaultMessage:"with {providerName}"},{providerName:c})})]})]}),(0,e.jsx)(xe.v,{width:20,height:20,colorClass:"text-icon-secondary"})]})})};var W=s(97286),k=s(64145),oe=s(23384),I=(t=>(t.DIRECT="DIRECT",t.INDIRECT="INDIRECT",t.BINANCE_INDIRECT="BINANCE_INDIRECT",t))(I||{}),O=(t=>(t.KYCed="KYCed",t.LastUsed="LastUsed",t.IsRecommended="IsRecommended",t.BestPrice="BestPrice",t.ProviderDefaultForRegion="ProviderDefaultForRegion",t))(O||{});const j=({assetId:t,currency:n,amount:o,enabled:i=!0,isP2P:r=!1})=>{var l,c,a,d,m;const v=i&&!!t&&!!n&&!!o&&o!=="0",{data:S,isPending:M,isFetching:te,isError:V,error:H,refetch:A}=(0,W.I)({queryKey:["buy-provider-routes",t,n,o],queryFn:()=>{const Ae={assetId:t,currency:n,amount:o};return k.YW.emit(oe.A.GET_BUY_PROVIDER_ROUTES,Ae)},enabled:v&&!r,retry:2,refetchOnWindowFocus:!1,gcTime:1e3*60*5}),{data:R,isPending:_,isFetching:C,isError:G,error:pe,refetch:ve}=(0,W.I)({queryKey:["p2p-buy-quotes",t,n,o],queryFn:()=>k.YW.emit(oe.A.GET_P2P_BUY_CRYPTO_QUOTES,{assetId:t,amount:o,currency:n}),enabled:v&&r,retry:2,refetchOnWindowFocus:!1,gcTime:1e3*60*5}),ge=r?_:M,Z=r?C:te,P=r?G:V,f=r?pe:H,u=r?ve:A,g=(l=R?.quotes)!=null?l:[],B=(a=(c=S?.onramp)==null?void 0:c.quotes)!=null?a:[],le=(m=(d=S?.onramp)==null?void 0:d.paymentCategories)!=null?m:[],ce=!B.length||!le.length?[]:le.map(Ae=>{var Be;const Re=[...B.filter(be=>be.paymentMethod.categoryId===Ae.id)].sort((be,He)=>{if(be.isRecommended&&!He.isRecommended)return-1;if(!be.isRecommended&&He.isRecommended)return 1;const at=be.badges.includes(O.BestPrice),it=He.badges.includes(O.BestPrice);return at&&!it?-1:!at&&it?1:He.digitalMoney.amount-be.digitalMoney.amount}),as=(Be=Re.find(be=>be.isRecommended))!=null?Be:Re[0];return{category:Ae,quotes:Re,recommendedQuote:as}}).filter(Ae=>Ae.quotes.length>0),ue=()=>{if(!B.length)return;const Ae=B.find(_e=>_e.isRecommended);if(Ae)return Ae;const Be=B.find(_e=>_e.badges.includes(O.BestPrice));return Be||B.reduce((_e,Re)=>Re.digitalMoney.amount>_e.digitalMoney.amount?Re:_e,B[0])},me=()=>{if(g.length)return g[0]},se=ue(),x=me(),we=(()=>{var Ae;if(ce.length){if(se){const Be=ce.find(_e=>_e.quotes.some(Re=>Re.id===se.id));if(Be)return Be.category}return(Ae=ce[0])==null?void 0:Ae.category}})(),We=S?.routeType,Ue=r?g.length>0:We===I.DIRECT;return{providerRoutes:S,routeType:We,isDirectRoute:Ue,allQuotes:B,paymentCategories:le,providersByCategory:ce,bestQuote:se,defaultCategory:we,p2pQuotes:g,p2pBestQuote:x,isLoading:ge,isFetching:Z,isError:P,error:f,refetch:u}};var J=s(73900);const ie=({isValidFiatAmount:t,selectedFiat:n,formatMessage:o})=>{if(!t)return{isValid:!0,error:null};const i=parseFloat(n.amount);if(isNaN(i))return{isValid:!0,error:null};const{minAmount:r,maxAmount:l,symbol:c}=n;return!r||!l?{isValid:!0,error:null}:i<r?{isValid:!1,error:{type:"min",message:o({id:"buy-enter-amount.min-amount-error",defaultMessage:"Min amount is {amount} {currency}"},{amount:r.toLocaleString(void 0,{maximumFractionDigits:2}),currency:c})}}:i>l?{isValid:!1,error:{type:"max",message:o({id:"buy-enter-amount.max-amount-error",defaultMessage:"Max amount is {amount} {currency}"},{amount:l.toLocaleString(void 0,{maximumFractionDigits:2}),currency:c})}}:{isValid:!0,error:null}};var q=s(42430),K=s(53982),L=s(57097),U=s(89408),ee=s(42564),Oe=s(28398),re=s(23207),Ce=Object.defineProperty,je=Object.defineProperties,Te=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Le=Object.prototype.hasOwnProperty,E=Object.prototype.propertyIsEnumerable,N=(t,n,o)=>n in t?Ce(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,Ee=(t,n)=>{for(var o in n||(n={}))Le.call(n,o)&&N(t,o,n[o]);if(Ne)for(var o of Ne(n))E.call(n,o)&&N(t,o,n[o]);return t},Ge=(t,n)=>je(t,Te(n)),Ke=(t,n,o)=>new Promise((i,r)=>{var l=d=>{try{a(o.next(d))}catch(m){r(m)}},c=d=>{try{a(o.throw(d))}catch(m){r(m)}},a=d=>d.done?i(d.value):Promise.resolve(d.value).then(l,c);a((o=o.apply(t,n)).next())});const ct=()=>{const{trackAnalytics:t}=(0,re.s)(),n=i=>({id:i.id,isRecommended:i.isRecommended,digitalMoney:i.digitalMoney,fiatMoney:i.fiatMoney,provider:i.provider,paymentMethod:{paymentMethod:i.paymentMethod.paymentMethod,providerName:i.paymentMethod.providerName}});return(0,L.n)({mutationFn:i=>Ke(null,[i],function*({quote:r,asset:l}){var c;const a=n(r),d=yield k.YW.emit(oe.A.BUY_CRYPTO,{quote:a,assetId:l.assetId});if((c=d.error)!=null&&c.message)throw new Error(d.error.message);return{response:d,quote:r,asset:l}}),onSuccess:i=>Ke(null,[i],function*({response:r,quote:l,asset:c}){const{url:a,addressField:d,address:m}=r,v=new URL(a);d&&v.searchParams.set(d,m);for(const[S,M]of v.searchParams)S==="address"&&v.searchParams.set(S,(0,ee.d)(M));window.open(v.toString(),"_blank"),t({event:ne.Un.FIAT_ON_RAMPS_PROVIDER,props:{pageViewResourceType:ne.Rb.EXTERNAL,blockchainId:c.blockchainId,assetCurrency:l.digitalMoney.currency,assetAmount:l.digitalMoney.amount,assetFiatCurrency:l.fiatMoney.currency,assetFiatAmount:l.fiatMoney.amount,providerName:l.provider.name,paymentMethod:l.paymentMethod.paymentMethod,subPaymentMethod:l.paymentMethod.providerName}}),c.isShownInHomeScreen||(yield k.YW.emit(U.A.ADD_ASSET,{asset:Ge(Ee({},c),{isShownInHomeScreen:!0}),blockchainType:Oe.l.MAIN}))})})};var dt=Object.defineProperty,ut=Object.defineProperties,mt=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,pt=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,ze=(t,n,o)=>n in t?dt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,yt=(t,n)=>{for(var o in n||(n={}))pt.call(n,o)&&ze(t,o,n[o]);if(Ve)for(var o of Ve(n))ht.call(n,o)&&ze(t,o,n[o]);return t},ft=(t,n)=>ut(t,mt(n)),$e=(t,n,o)=>new Promise((i,r)=>{var l=d=>{try{a(o.next(d))}catch(m){r(m)}},c=d=>{try{a(o.throw(d))}catch(m){r(m)}},a=d=>d.done?i(d.value):Promise.resolve(d.value).then(l,c);a((o=o.apply(t,n)).next())});const vt=()=>{const{trackAnalytics:t}=(0,re.s)();return(0,L.n)({mutationFn:o=>$e(null,[o],function*({quote:i,asset:r}){return{response:yield k.YW.emit(oe.A.GET_P2P_BUY_CRYPTO_CHECKOUT,{quoteId:i.id,assetId:r.assetId}),quote:i,asset:r}}),onSuccess:o=>$e(null,[o],function*({response:i,quote:r,asset:l}){const{url:c}=i;window.open(c,"_blank"),t({event:ne.Un.FIAT_ON_RAMPS_PROVIDER,props:{pageViewResourceType:ne.Rb.EXTERNAL,blockchainId:l.blockchainId,assetCurrency:r.digitalMoney.currency,assetAmount:r.digitalMoney.amount,assetFiatCurrency:r.fiatMoney.currency,assetFiatAmount:r.fiatMoney.amount,providerName:r.provider.name,paymentMethod:r.paymentMethod.paymentMethod,subPaymentMethod:r.paymentMethod.providerName}}),l.isShownInHomeScreen||(yield k.YW.emit(U.A.ADD_ASSET,{asset:ft(yt({},l),{isShownInHomeScreen:!0}),blockchainType:Oe.l.MAIN}))})})};var gt=s(61228),Pt=Object.defineProperty,xt=Object.defineProperties,Et=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Ct=Object.prototype.hasOwnProperty,At=Object.prototype.propertyIsEnumerable,Xe=(t,n,o)=>n in t?Pt(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,Je=(t,n)=>{for(var o in n||(n={}))Ct.call(n,o)&&Xe(t,o,n[o]);if(Ze)for(var o of Ze(n))At.call(n,o)&&Xe(t,o,n[o]);return t},qe=(t,n)=>xt(t,Et(n));const Mt=()=>{var t,n,o,i,r,l,c;(0,Ie.K)({event:ne.Un.FIAT_ON_RAMPS,props:null});const{formatMessage:a}=(0,D.A)(),d=(0,y.Zp)(),{selectedCrypto:m,selectedFiat:v,setSelectedFiat:S,selectedProvider:M,setSelectedProvider:te,selectedPaymentCategory:V,setSelectedPaymentCategory:H,isP2PBuy:A}=X(),R=()=>A?"?mode=p2p":"",_=!!m?.assetId&&!!v?.amount&&v.amount!=="0",{bestQuote:C,p2pBestQuote:G,defaultCategory:pe,isDirectRoute:ve,isLoading:ge}=j({assetId:(t=m?.assetId)!=null?t:"",currency:(n=v?.symbol)!=null?n:"USD",amount:(o=v?.amount)!=null?o:"0",enabled:_,isP2P:A}),Z=ct(),P=vt();(0,p.useEffect)(()=>{C&&!M&&te(C),pe&&!V&&H(pe)},[C,pe,M,V,te,H]);const f=M??C,u=A?G?.digitalMoney.amount.toFixed(6):f?.digitalMoney.amount.toFixed(6),g=()=>{d(-1)},B=x=>{S(qe(Je({},v),{amount:x.toString()}))},le=()=>{m&&(A&&G?P.mutate({quote:G,asset:m}):f&&Z.mutate({quote:f,asset:m}))},he=v.amount!==""&&v.amount!=="0",ce=ie({isValidFiatAmount:he,selectedFiat:v,formatMessage:a}),ue=v.suggestedAmounts&&v.suggestedAmounts.length>0,me=A?(r=(i=P.error)==null?void 0:i.message)!=null?r:null:(c=(l=Z.error)==null?void 0:l.message)!=null?c:null,se=A?P.isPending:Z.isPending;return(0,e.jsx)(Y.LN,{wide:!0,children:(0,e.jsxs)("div",{className:"flex flex-col justify-between flex-1",children:[(0,e.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,e.jsx)(Y.zY,{backAction:g,title:a({id:"fund.buy-crypto.title",defaultMessage:"Buy crypto"})}),(0,e.jsx)(q.A,{vipBenefitsId:K.n.ONRAMP_FEE_DISCOUNT})]}),(0,e.jsxs)(Y.Gv,{className:"flex flex-col items-end gap-8 justify-center",children:[(0,e.jsx)(b.y,{asset:v,amount:v.amount,onAmountChange:x=>S(qe(Je({},v),{amount:x})),onAssetClick:()=>d(w.b.BUY_NEW+"/select-fiat"+R())}),(0,e.jsx)(b.y,{asset:m,amount:u,onAssetClick:()=>d(w.b.BUY_NEW+"/select-crypto"+R()),isLoading:he&&ge,isEditable:!1})]}),(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsxs)("div",{className:"grid grid-cols-4 gap-1.5 mb-6 h-[26px] items-center",children:[(0,e.jsx)(Me.i,{length:4,widthClass:"w-full",heightClass:"h-9",fullWidth:!0,isLoading:!ue,horizontal:!0}),ue&&v.suggestedAmounts.map((x,Se)=>(0,e.jsx)(de.$,{size:z.Vp.SMALL,onClick:()=>B(x),fullWidth:!0,theme:z.ry.SUBTLE,className:"font-semibold ",children:x},"suggested-amount-"+Se))]}),(0,e.jsx)("div",{className:"mb-4",children:he?ce.error?(0,e.jsxs)("div",{className:"flex items-center gap-2 py-5 px-4 bg-error-background rounded-4",children:[(0,e.jsx)(J.U,{width:14,height:14,colorClass:"text-error-main"}),(0,e.jsx)(T.E,{theme:h.Il.ERROR,type:h.jK.BODY_14,weight:h.nG.SEMIBOLD,children:ce.error.message})]}):ge?(0,e.jsx)(Pe.S,{isLoading:!0,widthClass:"w-full",heightClass:"h-16",fullWidth:!0}):A&&G?(0,e.jsx)("div",{className:"flex items-center py-3 px-4 bg-background-secondary rounded-4",children:(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[G.provider.imageUrl&&(0,e.jsx)("img",{src:G.provider.imageUrl,alt:G.provider.name,className:"w-10 h-10"}),(0,e.jsxs)("div",{className:"flex flex-col items-start",children:[(0,e.jsx)(T.E,{type:h.jK.SUBHEADER_16,weight:h.nG.SEMIBOLD,children:"P2P"}),(0,e.jsx)(T.E,{type:h.jK.BODY_14,theme:h.Il.UTILITY_1_OPACITY_1,children:a({id:"buy-enter-amount.p2p-provider",defaultMessage:"with {providerName}"},{providerName:G.provider.name})})]})]})}):ve?(0,e.jsx)($,{quote:f,paymentCategory:V,isLoading:!1,onClick:()=>d(w.b.BUY_NEW+"/select-provider")}):(0,e.jsx)("div",{className:"flex items-center justify-center py-3 px-4 bg-background-secondary rounded-xl",children:(0,e.jsx)(T.E,{type:h.jK.BODY_14,theme:h.Il.SECONDARY,children:a({id:"buy-enter-amount.no-payment-method",defaultMessage:"No available payment method"})})}):(0,e.jsxs)("div",{className:"flex items-center py-3 gap-2 px-4 bg-background-secondary rounded-xl",children:[(0,e.jsx)(gt.A,{width:24,height:24,colorClass:"text-text-secondary"}),(0,e.jsx)(T.E,{type:h.jK.BODY_14,theme:h.Il.SECONDARY,children:a({id:"buy-enter-amount.enter-amount-no-quote",defaultMessage:"Enter amount and select payment"})})]})}),me&&(0,e.jsxs)("div",{className:"flex items-center gap-2 py-3 px-4 bg-error-background rounded-4 mb-4",children:[(0,e.jsx)(J.U,{width:14,height:14,colorClass:"text-error-main"}),(0,e.jsx)(T.E,{theme:h.Il.ERROR,type:h.jK.BODY_14,weight:h.nG.SEMIBOLD,children:me})]}),(0,e.jsx)(de.$,{size:z.Vp.LARGE,shape:z.dB.DEFAULT,theme:z.ry.PRIMARY,onClick:le,disabled:!he||!ce.isValid||!ve||se,loading:se,children:a({id:"fund.buy-crypto-button",defaultMessage:"{label}"},{label:he?"Continue":"Enter amount"})})]})]})})},et=t=>{const{data:n,isFetching:o,error:i,refetch:r}=(0,W.I)({queryKey:["currency-config",t],queryFn:()=>k.YW.emit(oe.A.ONE_CLICK_BUY_CRYPTO_CONFIG,{assetId:t}),enabled:!!t,retry:2,refetchOnWindowFocus:!1,staleTime:3e5,gcTime:6e5});return{currencies:n??[],isLoading:o&&!n,error:i,refetch:r}};var Ye=s(25160),Fe=(t=>(t.DEFAULT="Default",t.LOCAL="Local",t.LAST_USED="LastUsed",t.POPULAR="Popular",t))(Fe||{}),It=s(28744),Ot=Object.defineProperty,jt=Object.defineProperties,St=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,Nt=Object.prototype.hasOwnProperty,_t=Object.prototype.propertyIsEnumerable,st=(t,n,o)=>n in t?Ot(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,Dt=(t,n)=>{for(var o in n||(n={}))Nt.call(n,o)&&st(t,o,n[o]);if(tt)for(var o of tt(n))_t.call(n,o)&&st(t,o,n[o]);return t},Bt=(t,n)=>jt(t,St(n));const Rt=()=>{const t=(0,y.Zp)(),{selectedFiat:n,setSelectedFiat:o,selectedCrypto:i,isP2PBuy:r,p2pConfig:l,isP2PConfigLoading:c}=X(),{currencies:a,isLoading:d}=et(r?void 0:i?.assetId),m=()=>r?"?mode=p2p":"",v=(0,p.useMemo)(()=>!r||!l?.supportedCurrencies?[]:l.supportedCurrencies.map(A=>{var R,_;return{fiatCurrency:A.fiatCurrency,badges:(_=(R=A.badges)==null?void 0:R.map(C=>C===Fe.LOCAL?Ye.H.LOCAL:C===Fe.LAST_USED?Ye.H.LAST_USED:C))!=null?_:[]}}),[r,l?.supportedCurrencies]),S=(0,p.useMemo)(()=>a.map(A=>({fiatCurrency:A.fiatCurrency,badges:A.badges})),[a]),M=r?v:S,te=r?c:d,V=()=>{t(-1)},H=A=>{var R;if(r){const _=(R=l?.supportedCurrencies)==null?void 0:R.find(C=>C.fiatCurrency===A);_&&(o({fiatCurrency:A,amount:_.defaultAmount,symbol:A,minAmount:parseFloat(_.minAmount),maxAmount:parseFloat(_.maxAmount),defaultAmount:parseFloat(_.defaultAmount),suggestedAmounts:_.suggestedAmounts}),t(w.b.BUY_NEW+"/enter-amount"+m()))}else{const _=a.find(C=>C.fiatCurrency===A);_&&(o(Bt(Dt({},_),{amount:_.defaultAmount.toString(),symbol:A})),t(w.b.BUY_NEW+"/enter-amount"+m()))}};return(0,e.jsx)(It.q,{onBackAction:V,selectedFiatCurrency:n.symbol,onSelectCurrency:H,currencies:M,isLoading:te})};var bt=s(6475),De=s(73208),Tt=s(75485),Lt=(t,n,o)=>new Promise((i,r)=>{var l=d=>{try{a(o.next(d))}catch(m){r(m)}},c=d=>{try{a(o.throw(d))}catch(m){r(m)}},a=d=>d.done?i(d.value):Promise.resolve(d.value).then(l,c);a((o=o.apply(t,n)).next())});const Ut=20,Ft=({tab:t,network:n,query:o,limit:i=Ut,enabled:r=!0,isP2PBuy:l=!1,p2pAssets:c=[],blockchainsByCoinId:a={}})=>{const d=P=>{const f={};if(o)return f.query=o,f.allNetwork=n,f.allLimit=i,f.allOffset=P,f;switch(t){case De.l.ALL:f.allNetwork=n,f.allLimit=i,f.allOffset=P;break;case De.l.TOP_100:f.top100Network=n,f.top100Limit=i,f.top100Offset=P;break;case De.l.STABLES:f.stablecoinsNetwork=n,f.stablecoinsLimit=i,f.stablecoinsOffset=P;break}return f},m=P=>{if(o)return P.all;switch(t){case De.l.ALL:return P.all;case De.l.TOP_100:return P.top100;case De.l.STABLES:return P.stablecoins;default:return P.all}},S=(()=>{if(!l||!c.length)return[];const P=(o??"").toLowerCase();return P?c.filter(f=>{var u,g;if(f.symbol.toLowerCase().includes(P)||f.network.toLowerCase().includes(P))return!0;const B=(0,Tt.X2)(f.assetId,!0),le=a[B];return((g=(u=le?.displayName)!=null?u:le?.name)!=null?g:"").toLowerCase().includes(P)}):c})(),{data:M,isFetching:te,isFetchingNextPage:V,error:H,refetch:A,fetchNextPage:R,hasNextPage:_}=(0,bt.q)({queryKey:["buy-crypto-assets",t,n,o,i],queryFn:P=>Lt(null,[P],function*({pageParam:f}){const{offset:u}=f;return k.YW.emit(oe.A.GET_BUY_CRYPTO_ASSETS,d(u))}),initialPageParam:{offset:0},getNextPageParam:(P,f)=>{const u=m(P);if(!u)return;const g=f.reduce((B,le)=>{var he,ce;const ue=m(le);return B+((ce=(he=ue?.docs)==null?void 0:he.length)!=null?ce:0)},0);if(!(g>=u.total))return{offset:g}},refetchOnWindowFocus:!1,staleTime:1e3*60*5,gcTime:1e3*60*10,enabled:r&&!l}),G=M?.pages?M.pages.flatMap(P=>{var f,u;return(u=(f=m(P))==null?void 0:f.docs)!=null?u:[]}):[],ve=(()=>{var P,f,u;return l?S.length:(P=M?.pages)!=null&&P[0]&&(u=(f=m(M.pages[0]))==null?void 0:f.total)!=null?u:0})(),Z=(()=>{var P,f,u;if(!l&&!(t!==De.l.ALL||o))return(u=(f=(P=M?.pages)==null?void 0:P[0])==null?void 0:f.recentlyPurchased)==null?void 0:u.docs})();return{assets:G,p2pAssets:S,total:ve,recentlyPurchased:Z,isLoading:l?!1:te&&!M,isFetchingNextPage:V,error:H,refetch:A,fetchNextPage:R,hasNextPage:l?!1:_??!1}};var wt=s(41393),Wt=s(87841),Kt=s(75985),Qe=s(42151),nt=s(83596),ot=s(33926),Yt=s(52294),kt=s(44832);const rt=()=>{var t,n;const o=(0,y.Zp)(),i=(0,y.zy)(),{formatMessage:r}=(0,D.A)(),{selectedCrypto:l,setSelectedCrypto:c,selectedNetwork:a,setSelectedNetwork:d,isP2PBuy:m,p2pConfig:v,selectedFiat:S,isP2PConfigLoading:M}=X(),te=i.pathname===w.b.BUY_NEW;(0,p.useEffect)(()=>{if(l&&te){const x=m?"?mode=p2p":"";o(w.b.BUY_NEW+"/enter-amount"+x,{replace:!0})}},[l,o,te,m]);const[V,H]=(0,p.useState)(De.l.ALL),[A,R]=(0,p.useState)(""),_=(0,Kt.d)(A,Qe.e1),C=(0,kt.g)(!0),G=x=>{const Se=x.target.value;R(Se)},pe=(0,Wt.w)(),{assets:ve,p2pAssets:ge,recentlyPurchased:Z,isLoading:P,hasNextPage:f,fetchNextPage:u}=Ft({tab:V,network:(t=a?.coinId)!=null?t:void 0,query:_||void 0,isP2PBuy:m,p2pAssets:v?.currencySupportedAssets,blockchainsByCoinId:pe}),g=m?window.innerHeight-Qe.v1:window.innerHeight-Qe.ht,B=!m&&!_&&Z&&Z.length>0,le=()=>{o(-1)},he=()=>m?"?mode=p2p":"",ce=x=>{var Se;const we=m?ge.find(Ue=>Ue.assetId===x):(Se=ve.find(Ue=>Ue.assetId===x))!=null?Se:Z?.find(Ue=>Ue.assetId===x);if(!we)return;const We=(0,wt.e9)(we,pe);We&&(c(We),o(te?w.b.BUY_NEW+"/enter-amount"+he():-1))},ue=x=>{H(x)},me=m?M:P,se=!me&&ve.length===0&&!B&&!m;return m?(0,e.jsxs)(nt.b,{onBackAction:le,searchText:A,onSearchChange:G,selectedNetwork:a,networkFilterNavigateTo:`${w.b.BUY_NEW}/select-network`,selectedAssetId:l?.assetId,isLoading:M,isEmpty:ge.length===0&&!M,hasMore:!1,onLoadMore:()=>{},scrollableAreaHeight:g,children:[(0,e.jsx)(T.E,{theme:h.Il.THIRD,children:r({id:"buy-select-crypto.p2p-assets-title",defaultMessage:"Available to {fiat} pair"},{fiat:S?.symbol})}),ge.map(x=>(0,e.jsx)(ot.A,{asset:x,onClick:()=>ce(x.assetId)},x.assetId))]}):(0,e.jsxs)(nt.b,{onBackAction:le,searchText:A,onSearchChange:G,showTabs:!0,selectedTab:V,onTabChange:ue,selectedNetwork:a,networkFilterNavigateTo:`${w.b.BUY_NEW}/select-network`,selectedAssetId:l?.assetId,isLoading:me,isEmpty:se,hasMore:f,onLoadMore:u,scrollableAreaHeight:g,children:[B&&Z&&Z.length>0&&(0,e.jsxs)("div",{className:"mb-4",children:[(0,e.jsx)(T.E,{theme:h.Il.THIRD,testid:"recently-purchased-title",children:r({id:"buy-select-crypto.recently-purchased",defaultMessage:"Recently purchased"})}),Z.map(x=>(0,e.jsx)(ot.A,{asset:x,onClick:()=>ce(x.assetId)},`recent-${x.assetId}`))]}),(0,e.jsx)("div",{className:"mb-4",children:(0,e.jsx)(Yt.M,{useGlobalState:!1,localFilteringBlockchainId:(n=a?.id)!=null?n:null,onFilterChange:x=>{const Se=x?C.find(we=>we.id===x):null;d(Se??null)}})})]})};var Ht=s(73632);const Gt=()=>{const{selectedNetwork:t,setSelectedNetwork:n}=X();return(0,e.jsx)(Ht.A,{selectedNetwork:t,setSelectedNetwork:n})};var Qt=s(29618),Vt=s(14940);const zt=()=>{var t,n,o,i;const r=(0,y.Zp)(),{formatMessage:l}=(0,D.A)(),{selectedCrypto:c,selectedFiat:a,selectedProvider:d,setSelectedProvider:m,selectedPaymentCategory:v,setSelectedPaymentCategory:S}=X(),{providersByCategory:M,paymentCategories:te,bestQuote:V,defaultCategory:H,isLoading:A,isError:R}=j({assetId:(t=c?.assetId)!=null?t:"",currency:(n=a?.symbol)!=null?n:"USD",amount:(o=a?.amount)!=null?o:"0",enabled:!!c?.assetId&&!!a?.amount&&a.amount!=="0"});(0,p.useEffect)(()=>{!v&&H&&S(H)},[v,H,S]);const C=(()=>{var u;if(!v)return[];const g=M.find(B=>B.category.id===v.id);return(u=g?.quotes)!=null?u:[]})(),pe=(()=>{var u;if(!d)return null;const g=C.find(B=>B.provider.name===d.provider.name&&B.paymentMethod.paymentMethod===d.paymentMethod.paymentMethod&&B.paymentMethod.categoryId===d.paymentMethod.categoryId);return(u=g?.id)!=null?u:null})(),ve=()=>{r(-1)},ge=u=>{const g=C.find(B=>B.id===u);g&&(m(g),r(-1))},Z=()=>{r(w.b.BUY_NEW+"/select-payment-method")},P=(i=pe??V?.id)!=null?i:"",f=v?{displayName:v.displayName,imageUrl:v.imageUrl,isTemplateImage:v.isTemplateImage,onSelect:Z}:void 0;return(0,e.jsx)(Qt.d,{onBackAction:ve,selectedQuoteId:P,onSelectProvider:ge,isLoading:A,isError:R,hasQuotes:te.length>0,paymentMethod:f,children:C.length===0?(0,e.jsx)("div",{className:"flex flex-col items-center justify-center py-8",children:(0,e.jsx)(T.E,{type:h.jK.BODY_14,theme:h.Il.SECONDARY,children:l({id:"select-provider.no-providers-for-method",defaultMessage:"No providers available for this payment method."})})}):C.map(u=>(0,e.jsx)(Vt.h,{id:u.id,providerName:u.provider.name,providerIcon:u.provider.imageUrl,cryptoAmount:u.digitalMoney.amount,cryptoCurrency:u.digitalMoney.currency,badgeText:u.badges.includes(O.BestPrice)?l({id:"select-provider.best-quote",defaultMessage:"Best quote"}):void 0,onClick:()=>ge(u.id)},u.id))})};var $t=s(79830),lt=s(7668),Zt=s(97726),Xt=s(46729);const Jt=({category:t})=>(0,e.jsx)(lt.sx,{value:t.id,className:"cursor-pointer",children:({checked:n})=>(0,e.jsxs)("div",{className:"flex items-center justify-between py-4",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-3",children:[t.imageUrl?(0,e.jsx)("img",{src:t.imageUrl,alt:t.displayName,width:40,height:40,className:t.isTemplateImage?"dark:invert":""}):(0,e.jsx)("div",{className:"w-10 h-10 rounded-full bg-background-secondary flex items-center justify-center",children:(0,e.jsx)(T.E,{type:h.jK.SUBHEADER_16,weight:h.nG.SEMIBOLD,children:t.displayName.charAt(0)})}),(0,e.jsx)(T.E,{type:h.jK.TITLE,theme:h.Il.PRIMARY,weight:h.nG.SEMIBOLD,children:t.displayName})]}),(0,e.jsx)("div",{className:"flex items-center",children:n?(0,e.jsx)(Zt.w,{width:24,height:24,colorClass:"text-brand-primary"}):(0,e.jsx)(Xt.r,{width:24,height:24,colorClass:"text-icon-disabled"})})]})}),qt=()=>{var t,n,o,i;const r=(0,y.Zp)(),{formatMessage:l}=(0,D.A)(),{selectedCrypto:c,selectedFiat:a,selectedPaymentCategory:d,setSelectedPaymentCategory:m,setSelectedProvider:v}=X(),{paymentCategories:S,providersByCategory:M,isLoading:te,isError:V}=j({assetId:(t=c?.assetId)!=null?t:"",currency:(n=a?.symbol)!=null?n:"USD",amount:(o=a?.amount)!=null?o:"0",enabled:!!c?.assetId&&!!a?.amount&&a.amount!=="0"}),H=()=>{r(-1)},A=R=>{const _=S.find(C=>C.id===R);if(_){m(_);const C=M.find(G=>G.category.id===R);C?.recommendedQuote?v(C.recommendedQuote):C?.quotes[0]&&v(C.quotes[0]),r(-1)}};return(0,e.jsxs)(Y.LN,{wide:!0,children:[(0,e.jsx)(Y.zY,{backAction:H,title:l({id:"buy-select-payment-method.title",defaultMessage:"Payment methods"})}),(0,e.jsx)(Y.Gv,{children:te?(0,e.jsx)("div",{className:"flex justify-center py-8",children:(0,e.jsx)($t.y,{})}):V?(0,e.jsx)("div",{className:"flex flex-col items-center justify-center py-8",children:(0,e.jsx)(T.E,{type:h.jK.BODY_14,theme:h.Il.SECONDARY,children:l({id:"buy-select-payment-method.error",defaultMessage:"Failed to load payment methods. Please try again."})})}):S.length===0?(0,e.jsx)("div",{className:"flex flex-col items-center justify-center py-8",children:(0,e.jsx)(T.E,{type:h.jK.BODY_14,theme:h.Il.SECONDARY,children:l({id:"buy-select-payment-method.no-methods",defaultMessage:"No payment methods available."})})}):(0,e.jsx)(lt.z6,{value:(i=d?.id)!=null?i:"",onChange:A,children:S.map(R=>(0,e.jsx)(Jt,{category:R},R.id))})})]})},es=()=>{var t,n,o,i;const{data:r,isFetching:l,error:c,refetch:a}=(0,W.I)({queryKey:["p2p-buy-crypto-config"],queryFn:()=>k.YW.emit(oe.A.GET_P2P_BUY_CRYPTO_CONFIG),retry:2,refetchOnWindowFocus:!1,staleTime:3e5,gcTime:6e5});return{config:r??null,selectedAsset:(t=r?.selectedAsset)!=null?t:null,supportedCurrencies:(n=r?.supportedCurrencies)!=null?n:[],currencySupportedAssets:(o=r?.currencySupportedAssets)!=null?o:[],providers:(i=r?.providers)!=null?i:[],isLoading:l&&!r,error:c,refetch:a}};var ts=s(47991);const ke="USD",ss=t=>{const n=t.find(r=>{var l;return(l=r.badges)==null?void 0:l.includes(Ye.H.LAST_USED)});if(n)return n;const o=t.find(r=>{var l;return(l=r.badges)==null?void 0:l.includes(Ye.H.LOCAL)});if(o)return o;const i=t.find(r=>r.fiatCurrency===ke);return i||t[0]},ns=({children:t,mode:n=ye.REGULAR})=>{var o;const i=(0,y.zy)(),r=(0,ts.P)(),l=(o=i.state)==null?void 0:o.assetId,c=n===ye.P2P,[a,d]=(0,p.useState)(null),[m,v]=(0,p.useState)(null),[S,M]=(0,p.useState)(null),[te,V]=(0,p.useState)(null),{config:H,isLoading:A}=es(),{currencies:R}=et(c?void 0:a?.assetId),[_,C]=(0,p.useState)({fiatCurrency:ke,defaultAmount:0,minAmount:0,maxAmount:0,suggestedAmounts:[],amount:"",symbol:ke}),[G,pe]=(0,p.useState)(null),[ve,ge]=(0,p.useState)(!1);(0,p.useEffect)(()=>{if(l&&!a&&r.length>0){const u=r.find(g=>g.assetId===l);u&&d(u)}},[l,a,r]),(0,p.useEffect)(()=>{var u,g,B,le,he,ce;if(!c||!H||ve)return;const ue=H.supportedCurrencies;if(!ue.length)return;const me=(le=(B=(g=(u=ue.find(se=>{var x;return(x=se.badges)==null?void 0:x.includes(Fe.DEFAULT)}))!=null?u:ue.find(se=>{var x;return(x=se.badges)==null?void 0:x.includes(Fe.LAST_USED)}))!=null?g:ue.find(se=>{var x;return(x=se.badges)==null?void 0:x.includes(Fe.LOCAL)}))!=null?B:ue.find(se=>se.fiatCurrency===ke))!=null?le:ue[0];if(me){const se=me.fiatCurrency;C({fiatCurrency:se,defaultAmount:parseFloat(me.defaultAmount),minAmount:parseFloat(me.minAmount),maxAmount:parseFloat(me.maxAmount),suggestedAmounts:(he=me.suggestedAmounts)!=null?he:[],badges:(ce=me.badges)==null?void 0:ce.map(x=>x),amount:me.defaultAmount,symbol:se}),ge(!0)}},[c,H,ve]),(0,p.useEffect)(()=>{var u;if(c||!R.length||!a?.assetId||G===a.assetId)return;const g=ss(R);g&&(C({fiatCurrency:g.fiatCurrency,defaultAmount:g.defaultAmount,minAmount:g.minAmount,maxAmount:g.maxAmount,suggestedAmounts:(u=g.suggestedAmounts)!=null?u:[],badges:g.badges,amount:g.defaultAmount.toString(),symbol:g.fiatCurrency}),pe(a.assetId),M(null),V(null))},[c,R,a?.assetId,G]);const Z=u=>{C(g=>(g.amount!==u.amount&&M(null),u))},P=u=>{d(u),M(null),V(null),pe(null)},f=(0,p.useMemo)(()=>({buyFlowMode:n,isP2PBuy:c,p2pConfig:c?H:null,isP2PConfigLoading:c?A:!1,selectedFiat:_,setSelectedFiat:Z,selectedCrypto:a,setSelectedCrypto:P,selectedNetwork:m,setSelectedNetwork:v,selectedProvider:S,setSelectedProvider:M,selectedPaymentCategory:te,setSelectedPaymentCategory:V}),[n,c,H,A,_,Z,a,P,m,S,te]);return(0,e.jsx)(fe.Provider,{value:f,children:t})};var os=s(84118),rs=s(84206);const ls=()=>{const[t]=(0,F.ok)(),o=t.get("mode")==="p2p"?ye.P2P:ye.REGULAR,{enabled:i}=(0,os.x)(rs.t);return i?(0,e.jsx)(ns,{mode:o,children:(0,e.jsxs)(y.BV,{children:[(0,e.jsx)(y.qh,{index:!0,element:(0,e.jsx)(rt,{})}),(0,e.jsx)(y.qh,{path:"/enter-amount",element:(0,e.jsx)(Mt,{})}),(0,e.jsx)(y.qh,{path:"/select-fiat",element:(0,e.jsx)(Rt,{})}),(0,e.jsx)(y.qh,{path:"/select-crypto",element:(0,e.jsx)(rt,{})}),(0,e.jsx)(y.qh,{path:"/select-network",element:(0,e.jsx)(Gt,{})}),(0,e.jsx)(y.qh,{path:"/select-provider",element:(0,e.jsx)(zt,{})}),(0,e.jsx)(y.qh,{path:"/select-payment-method",element:(0,e.jsx)(qt,{})})]})}):(0,e.jsx)(y.C5,{to:w.b.BUY,state:{showBackButton:!0}})}}),42430:((ae,Q,s)=>{s.d(Q,{A:()=>T});var e=s(74848),F=s(53982),y=s(4751),Y=s(64145),D=s(97286),p=s(11711),b=s(85655),z=s(98939);const de=h=>{var $,W,k,oe,I,O,j,J,ie;const q=(0,b.nK)(z.hF.Ethereum.toString()),{data:K,isPending:L,isError:U}=(0,D.I)({queryKey:["vip-tier-data",q?.address],queryFn:()=>Y.YW.emit(p.A.FETCH_USER_VIP_TIER_DATA,{address:q?.address}),enabled:!!q?.address}),ee=(W=($=K?.data)==null?void 0:$.vip_tier_level)!=null?W:F.j.NONE,Oe=(I=(oe=(k=K?.data)==null?void 0:k.vip_config)==null?void 0:oe.vip_tiers)==null?void 0:I.find(je=>je.level===ee),re=(J=(j=(O=K?.data)==null?void 0:O.vip_config)==null?void 0:j.vip_benefits)==null?void 0:J.find(je=>je.id===h);return{feesDiscountPercentage:(ie=re?.properties[ee])==null?void 0:ie.value,vipTier:Oe,isPendingVipData:L,isErrorVipData:U}};var Pe=s(22146),Me=s(65512),w=s(52619),ye=s(23350),fe=s(28898),X=s(15314),Ie=s(6442);const ne=({opened:h,vipTier:$,feesDiscountPercentage:W,onClose:k})=>{const{theme:oe}=(0,fe.h)(),{formatMessage:I}=(0,Ie.A)();if(!$)return null;const O=oe===X.W.DARK?$.icon_dark:$.icon_light,j=()=>{window.open("https://trustwallet.com/blog/announcements/introducing-trust-premium","_blank","noopener,noreferrer"),k()};return(0,e.jsx)(Pe.a,{opened:h,onClose:k,title:`${$.display_name} benefit`,placement:ye.Gn.CENTER,centerTitle:!0,children:(0,e.jsxs)("div",{className:"flex flex-col items-center space-y-6 py-4",children:[(0,e.jsx)("div",{className:"w-32 h-32 flex items-center justify-center",children:(0,e.jsx)("img",{src:O,alt:`${$.display_name} tier`,className:"w-full h-full"})}),(0,e.jsx)("p",{className:"text-center text-body3 font-medium leading-subtitle4 text-utility-1-opacity-2 px-4",children:I({id:"vip.modal-benefits-description",defaultMessage:"You're currently enjoying {feesDiscountPercentage}% off fees with your Trust Premium {displayName} benefits. Tap below to learn more about your Premium status and discover additional perks."},{displayName:$?.display_name,feesDiscountPercentage:W})}),(0,e.jsx)(Me.$,{theme:w.ry.PRIMARY,size:w.Vp.LARGE,onClick:j,fullWidth:!0,children:"Learn more"})]})})};var xe=s(96540);const T=({vipBenefitsId:h})=>{var $;const{vipTier:W,feesDiscountPercentage:k,isPendingVipData:oe,isErrorVipData:I}=de(h),[O,j]=(0,xe.useState)(!1),{formatMessage:J}=(0,Ie.A)(),ie=W?.level===F.j.SILVER,q=W?.level===F.j.GOLD,K=ie?"border-other-Silver":"border-other-Gold";return(ie||q)&&!oe&&!I?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:`py-3 px-4 rounded-4 flex items-center gap-2 bg-background-2 border-2 ${K} cursor-pointer hover:opacity-80 transition-opacity`,onClick:()=>j(!0),children:[(0,e.jsx)(y.hu,{tier:($=W?.level)==null?void 0:$.toString(),width:24,height:24}),(0,e.jsx)("span",{className:"text-caption1 font-semibold text-utility-1-opacity-1",children:J({id:"vip.banner-benefits",defaultMessage:"{displayName} benefit: {feesDiscountPercentage}% off on fees applied."},{displayName:W?.display_name,feesDiscountPercentage:k})})]}),(0,e.jsx)(ne,{opened:O,vipTier:W,feesDiscountPercentage:k,onClose:()=>j(!1)})]}):null}}),52294:((ae,Q,s)=>{s.d(Q,{M:()=>oe});var e=s(74848),F=s(29584),y=s(23207),Y=s(65504),D=s(68632),p=s(64145),b=s(22670),z=s(28398),de=s(44832),Pe=s(29189),Me=s(69275),w=s(33055),ye=s(29251),fe=s(26113),X=s(96540),Ie=s(6442),ne=s(98939),xe=s(52114),T=s(1279),h=s(20998),$=s(10551),W=(I,O,j)=>new Promise((J,ie)=>{var q=U=>{try{L(j.next(U))}catch(ee){ie(ee)}},K=U=>{try{L(j.throw(U))}catch(ee){ie(ee)}},L=U=>U.done?J(U.value):Promise.resolve(U.value).then(q,K);L((j=j.apply(I,O)).next())});const k=[ne.hF.SmartChain,ne.hF.Ethereum,ne.hF.Solana,ne.hF.Tron,ne.hF.Arbitrum],oe=({useGlobalState:I,localFilteringBlockchainId:O,onFilterChange:j})=>{const{formatMessage:J}=(0,Ie.A)(),{trackAnalytics:ie}=(0,y.s)(),q=(0,w.A)(),K=(0,Me.o)(),L=(0,de.g)(!0),U=(0,Pe.f)(),[ee,Oe]=(0,X.useState)(!1),re=I?U:O,Ce=(0,X.useMemo)(()=>{if(q.type===ye.S.MNEMONIC)return L;const N=Object.keys(K).map(Ee=>Ee);return L.filter(Ee=>N.includes(Ee.coinId.toString()))},[L,K,q]),je=(0,X.useMemo)(()=>Ce?.find(N=>N.id===re),[Ce,re]);(0,X.useEffect)(()=>{I&&re&&!je&&p.YW.emit(b.A.SWITCH_FILTERING_BLOCKCHAIN,null)},[I,re,je]);const Te=(0,X.useMemo)(()=>k.map(N=>Ce.find(Ee=>Ee.coinId===N)).filter(N=>N!==void 0),[Ce]),Ne=Ce.length,Le=N=>W(null,null,function*(){var Ee;if(!I){const Ke=(Ee=N?.id)!=null?Ee:null;j?.(Ke);return}if(!N){yield Promise.allSettled([p.YW.emit(b.A.SWITCH_FILTERING_BLOCKCHAIN,null),(0,fe.yy)(250)]);return}const Ge=N.isCustom?z.l.CUSTOM:z.l.MAIN;yield Promise.allSettled([p.YW.emit(b.A.SWITCH_FILTERING_BLOCKCHAIN,N.id),(0,fe.yy)(250)]),ie({event:F.BQ.SWITCH_FILTERING_NETWORK,props:{pageViewSource:F.Un.HOME,blockchainName:N.name,blockchainChainId:N.chainId,blockchainType:Ge}})}),E=N=>N?re===N.id:!re;return(0,e.jsxs)("div",{className:"flex items-center justify-between overflow-x-auto scrollbar-hide pb-2",children:[(0,e.jsx)("button",{onClick:()=>Le(null),className:`flex-shrink-0 w-10 h-10 rounded-full border-2 transition-all flex items-center justify-center ${E(null)?"border-primary bg-background-2":"border-transparent bg-background-2"}`,"data-testid":"horizontal-network-filter-all",title:J({id:"component.blockchain-select.all-networks",defaultMessage:"All Networks"}),children:(0,e.jsx)("span",{className:E(null)?"!text-primary":"",children:(0,e.jsx)(xe.E,{type:T.jK.SUBHEADER_14,theme:E(null)?T.Il.PRIMARY_DEFAULT:void 0,children:J({id:"component.blockchain-select.all",defaultMessage:"All"})})})}),Te.map(N=>{var Ee;return(0,e.jsx)("button",{onClick:()=>Le(N),className:`flex-shrink-0 w-10 h-10 rounded-full border-2 transition-all ${E(N)?"border-primary bg-background-2":"border-transparent bg-background-2"}`,"data-testid":`horizontal-network-filter-${N.symbol.toLowerCase()}`,title:(Ee=N.displayName)!=null?Ee:N.name,children:(0,e.jsx)("div",{className:"w-full h-full rounded-full overflow-hidden flex items-center justify-center",children:(0,e.jsx)(Y.q,{name:N.name,size:D.Y.MEDIUM,src:N.iconUrl})})},N.id)}),(0,e.jsxs)("button",{onClick:()=>Oe(!0),className:"flex-shrink-0 px-3 py-2 rounded-full border-2 border-utility-1-opacity-5 bg-background-2 flex items-center gap-1.5","data-testid":"horizontal-network-filter-more",title:`${Ne} networks available`,children:[(0,e.jsx)(xe.E,{type:T.jK.SUBHEADER_14,children:Ne}),(0,e.jsx)($.b,{width:12,height:12,colorClass:"text-utility-1-opacity-1"})]}),(0,e.jsx)(h.S,{isOpen:ee,onClose:()=>Oe(!1),blockchainList:Ce,selectedBlockchainId:re??null,onSelectNetwork:Le})]})}}),53982:((ae,Q,s)=>{s.d(Q,{j:()=>F,n:()=>e});var e=(y=>(y.TWT_GAS_RAMP="zero_gas_twt_ramp",y.TWT_GAS_FEE_DISCOUNT="twt_gas_fee_discount",y.SWAP_FEE_DISCOUNT="swap_fee_discount",y.ONRAMP_FEE_DISCOUNT="on_ramp_fee_discount",y.OFFRAMP_FEE_DISCOUNT="off_ramp_fee_discount",y.TRUST_ALPHA_ACCESS="trust_alpha_access",y.COMMUNITY_AIRDROP="community_airdrop",y))(e||{}),F=(y=>(y[y.NONE=0]="NONE",y[y.BRONZE=1]="BRONZE",y[y.SILVER=2]="SILVER",y[y.GOLD=3]="GOLD",y))(F||{})}),61228:((ae,Q,s)=>{s.d(Q,{A:()=>Y});var e=s(74848);const F=20,y=20,Y=({width:D,height:p,colorClass:b})=>(0,e.jsxs)("svg",{className:b,xmlns:"http://www.w3.org/2000/svg",width:D??F,height:p??y,viewBox:"0 0 17 13",fill:"none",children:[(0,e.jsxs)("g",{clipPath:"url(#clip0_10654_4700)",children:[(0,e.jsx)("path",{d:"M15 0H1.66667C0.75 0 0 0.808333 0 1.79167V10.9083C0 11.8917 0.75 12.7 1.66667 12.7H15C15.925 12.7 16.6667 11.8917 16.6667 10.9083V1.79167C16.6667 0.808333 15.925 0 15 0ZM14.7917 1.875V2.39167H1.875V1.875H14.7917ZM1.875 10.8333V4.26667H14.7917V10.8333H1.875Z",fill:"currentColor"}),(0,e.jsx)("path",{d:"M12.8171 5H10.9421C10.4255 5 10.0088 5.41667 10.0088 5.93333C10.0088 6.45 10.4255 6.86667 10.9421 6.86667H12.8171C13.3338 6.86667 13.7505 6.45 13.7505 5.93333C13.7505 5.41667 13.3338 5 12.8171 5Z",fill:"currentColor"})]}),(0,e.jsx)("defs",{children:(0,e.jsx)("clipPath",{id:"clip0_10654_4700",children:(0,e.jsx)("rect",{width:"16.6667",height:"12.7083",fill:"white"})})})]})}),84206:((ae,Q,s)=>{s.d(Q,{t:()=>e});const e={name:"onramp-revamp",default:!1}})}]);

//# sourceMappingURL=712.js.map